<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub Pedagógico</title>
    <link rel="icon" type="image/png" href="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749543469/SLAP_FAVICON_AMARELO_coilvj.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: SLAP Brand Colors: #F1D24B (Primary Yellow), #FF5C3D (Secondary Orange/Red), #84C7DF (Secondary Light Blue), #8671D1 (Secondary Purple) -->
    <style>
        html, body {
            height: 100%;
        }
        body {
            font-family: 'DM Sans', sans-serif;
            line-height: 1.25; /* leading-tight */
            display: flex;
            flex-direction: column;
        }
        #app-container {
            flex: 1 0 auto;
        }
        footer {
            flex-shrink: 0;
        }
        .nav-button.active, .hub-nav-button.active, .creators-tab.active {
            background-color: #FFFBEB; /* yellow-50 */
            color: #F1D24B;
            font-weight: 600;
        }
        .cefr-level-bar {
            background-color: #e0e0e0;
            border-radius: 9999px; /* Tailwind's rounded-full */
            height: 1.5rem; /* Equivalent to h-6 */
            margin-bottom: 0.5rem; /* Equivalent to mb-2 */
            position: relative;
            overflow: hidden;
        }
        .slap-level-indicator {
            background-color: #F1D24B;
            height: 100%;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* font-medium */
            color: #44403c; /* stone-800 */
        }
        .cefr-label {
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            color: #44403c; /* stone-800 */
        }
        .method-phase-card {
            border-radius: 0.75rem; /* rounded-xl */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            overflow: hidden;
        }
        .method-phase-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        /* Specific background and text colors for method phases */
        .method-phase-spark { background-color: #F1D24B; color: #44403c; }
        .method-phase-learn { background-color: #84C7DF; color: #44403c; }
        .method-phase-apply { background-color: #8671D1; color: #ffffff; }
        .method-phase-perform { background-color: #FF5C3D; color: #ffffff; }

        .method-phase-card h3 { font-weight: 700; color: inherit; }
        .method-phase-card p { line-height: 1.5; text-align: left; }

        /* Creators Room Cards */
        .prohibited-rule-card { background-color: #fef2f2; border: 1px solid #f87171; color: #b91c1c; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 1px 2px rgba(0,0,0,0.05); line-height: 1.5; position: relative; }
        .prohibited-rule-card .icon-x { position: absolute; top: 0.75rem; right: 0.75rem; color: #ef4444; }
        .prohibited-rule-card h4 { padding-right: 2.5rem; }
        .prohibited-rule-card strong { color: #b91c1c; }
        .good-practice-card { background-color: #D1FAE5; border: 1px solid #34D399; color: #065F46; padding: 1rem; border-radius: 0.5rem; box-shadow: 0 1px 2px rgba(0,0,0,0.05); line-height: 1.5; position: relative; }
        .good-practice-card .icon-check { position: absolute; top: 0.75rem; left: 0.75rem; color: #10B981; }
        .good-practice-card h4 { padding-left: 2.5rem; }
        .good-practice-card strong { color: #065F46; }

        /* FAQ specific styles */
        .faq-item { background-color: #f5f5f4; border-radius: 0.5rem; margin-bottom: 0.75rem; overflow: hidden; }
        .faq-question { display: flex; justify-content: space-between; align-items: center; padding: 1rem; cursor: pointer; font-weight: 600; color: #44403c; }
        .faq-answer { padding: 0 1rem; color: #57534e; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out, padding 0.3s ease-out; }
        .faq-answer.open { max-height: 9999px; padding: 1rem; transition: max-height 0.3s ease-in, padding 0.3s ease-in; }
        .faq-arrow { transition: transform 0.3s ease; }
        .faq-arrow.rotate { transform: rotate(90deg); }
        
        /* PDI Section */
        .info-box { background-color: #f3f4f6; border-left: 4px solid #9ca3af; padding: 1rem; display: flex; align-items: flex-start; gap: 0.75rem; border-radius: 0.25rem; color: #4b5563; }
        .info-box-yellow { background-color: #fffbeb; border-left: 4px solid #F1D24B; color: #b45309; }
        .info-box svg { flex-shrink: 0; width: 1.25rem; height: 1.25rem; margin-top: 0.125rem; color: #9ca3af; }
        .info-box-yellow svg { color: #F1D24B; }
        .pdi-card { transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .pdi-card:hover { transform: translateY(-5px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .pdi-card-yellow { border-left: 4px solid #F1D24B; }
        .pdi-card-orange { border-left: 4px solid #FF5C3D; }
        .pdi-card-purple { border-left: 4px solid #8671D1; }

        /* Níveis SLAP > Objetivos do Nível Card */
        .focus-point-card {
            padding: 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            background-color: #84C7DF;
            color: #44403c;
            text-align: center;
        }

        /* Deep Dive */
        .crisis-card { background-color: #FFFBEB; border: 1px solid #F1D24B; color: #44403c; padding: 1.5rem; border-radius: 0.75rem; }
        .audio-player-button { background-color: #F1D24B; color: #44403c; border: none; padding: 0.75rem 1.25rem; border-radius: 9999px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; display: flex; align-items: center; gap: 0.5rem; }
        .audio-player-button:hover { background-color: #eab308; }
        .audio-player-button svg { width: 1.25rem; height: 1.25rem; }
        
        /* Creators Room Tab Menu */
        .creators-tab-container { display: flex; flex-wrap: wrap; margin-bottom: 1.5rem; border-bottom: 1px solid #e7e5e4; gap: 1rem; }
        .creators-tab { padding: 0.75rem 0.25rem; text-align: center; font-weight: 600; color: #78716c; cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s ease-in-out; }
        .creators-tab:hover { color: #F1D24B; }
        .creators-tab.active { color: #F1D24B; border-color: #F1D24B; }
        
        /* Funnel Styles */
        .funnel-stage { padding: 1.5rem; border-radius: 0.75rem; margin-bottom: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); text-align: center; position: relative; }
        .funnel-stage-icon { margin-bottom: 0.75rem; display: inline-block; background-color: white; padding: 0.5rem; border-radius: 9999px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .funnel-top { background-color: #D1FAE5; color: #065F46; }
        .funnel-middle { background-color: #FFFBEB; color: #44403c; }
        .funnel-bottom { background-color: #FEE2E2; color: #991B1B; }
        .funnel-stage:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -0.75rem;
            transform: translateX(-50%);
            width: 0; 
            height: 0; 
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid #a8a29e; /* stone-400 */
        }
        
        /* New Regimento Interno Styles */
        .regimento-section {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #e7e5e4;
        }
        .regimento-topic:last-child {
            margin-bottom: 0;
        }
        .regimento-topic h4 {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            color: #44403c; /* stone-700 */
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #F1D24B;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
        }
        .regimento-topic h5 {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600;
            color: #57534e; /* stone-600 */
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .regimento-topic p, .regimento-topic ul {
            line-height: 1.75;
            color: #78716c; /* stone-500 */
        }
        .regimento-topic ul {
            list-style-position: outside;
            list-style-type: disc;
            padding-left: 1.25rem;
            margin-top: 0.75rem;
        }
         .regimento-topic ul li {
            padding-left: 0.25rem;
            margin-bottom: 0.5rem;
        }
        
        /* Links Úteis Styles */
        .links-uteis-section .faq-item {
             background-color: white;
             border: 1px solid #e7e5e4;
             box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }
        .links-uteis-section .faq-answer ul {
            padding: 0.5rem 0;
        }
        .links-uteis-section .faq-answer a {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s;
        }
        .links-uteis-section .faq-answer a:hover {
            background-color: #FFFBEB; /* yellow-50 */
        }

        /* Test Your English Styles */
        .quiz-option {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            margin-bottom: 0.75rem;
            text-align: left;
            background-color: #f5f5f4; /* stone-100 */
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        .quiz-option:hover:not(:disabled) {
            background-color: #e7e5e4; /* stone-200 */
            border-color: #F1D24B;
        }
        .quiz-option:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .quiz-option.correct {
            background-color: #D1FAE5; /* green-200 */
            border-color: #34D399; /* green-400 */
            color: #065F46; /* green-800 */
        }
        .quiz-option.incorrect {
            background-color: #FEE2E2; /* red-200 */
            border-color: #F87171; /* red-400 */
            color: #991B1B; /* red-800 */
        }
        .quiz-feedback {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            font-size: 0.875rem;
            line-height: 1.5;
        }
        .quiz-feedback.correct {
            background-color: #ECFDF5; /* green-50 */
            color: #059669; /* green-600 */
        }
         .quiz-feedback.incorrect {
            background-color: #FEF2F2; /* red-50 */
            color: #DC2626; /* red-600 */
        }
        #quiz-explanation strong {
            font-weight: 700;
        }
        .quiz-nav-button {
             background-color: #F1D24B; color: #44403c; border: none; padding: 0.75rem 1.5rem; border-radius: 9999px; font-weight: 600; cursor: pointer; transition: background-color 0.2s;
        }
         .quiz-nav-button:hover {
            background-color: #eab308;
        }

        /* Teacher's Room specific styles */
        .teacher-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid #e7e5e4;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .teacher-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .teacher-card img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem;
            border: 3px solid #F1D24B;
        }
        .teacher-dossier-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #e7e5e4;
        }
        .teacher-dossier-header img {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem;
            border: 4px solid #F1D24B;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .teacher-dossier-info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        @media (min-width: 768px) {
            .teacher-dossier-info-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        .info-item {
            background-color: #f5f5f4;
            padding: 1rem;
            border-radius: 0.5rem;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        .info-item strong {
            display: block;
            font-weight: 600;
            color: #44403c;
            margin-bottom: 0.25rem;
        }
        .info-item ul {
            list-style: disc;
            list-style-position: inside;
            margin-top: 0.5rem;
        }
        .info-item li {
            margin-bottom: 0.25rem;
        }
        .info-item:last-child {
            margin-bottom: 0;
        }
        /* Tag styles */
        .tag {
            display: inline-flex;
            align-items: center;
            padding: 0.3rem 0.75rem;
            border-radius: 9999px; /* rounded-full */
            background-color: #f5f5f4; /* stone-100 */
            border: 1px solid #a8a29e; /* stone-400 */
            color: #44403c; /* stone-800 */
            font-size: 0.75rem; /* text-xs */
            font-weight: 600; /* font-semibold */
            text-transform: uppercase;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            white-space: nowrap;
        }
        /* BrainFlip specific styles */
        .flashcard-container {
            perspective: 1000px; /* For 3D flip animation */
            width: 100%;
            max-width: 400px; /* Max width of the card */
            height: 250px; /* Height of the card */
            margin: 0 auto; /* Center the card container */
        }
        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s; /* Flip animation time */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Card shadow */
            border-radius: 12px; /* Rounded corners */
            background-color: #ffffff; /* Default background for the card */
            border: 2px solid #84C7DF; /* SLAP Light Blue border */
        }
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* Hide the back when not flipped */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            border-radius: 12px; /* Rounded corners */
            font-size: 1.25rem; /* Font size */
            line-height: 1.5; /* Line height */
            color: #1f2937; /* Dark text */
        }
        .flashcard-front {
            background-color: #ffffff; /* White background for front */
            font-weight: 600; /* Bold for the term */
        }
        .flashcard-back {
            background-color: #DBEAFE; /* Light blue background for back (blue-100) */
            transform: rotateY(180deg); /* Start flipped to the back */
        }
        .navigation-button-game {
            background-color: #F1D24B; /* SLAP Yellow */
            color: #44403c; /* Stone 800 */
            padding: 0.75rem 1.5rem;
            border-radius: 9999px; /* rounded-full */
            font-weight: 700; /* font-bold */
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .navigation-button-game:hover {
            background-color: #eab308; /* Darker yellow on hover */
            transform: translateY(-2px);
        }
        .navigation-button-game:focus {
            outline: none;
            box-shadow: 0 0 0 4px rgba(241, 210, 75, 0.5); /* Focus ring */
        }
        /* Estilos para o novo Menu Dropdown */
.nav-item.active {
    background-color: #FFFBEB; /* yellow-50 */
    color: #F1D24B;
    font-weight: 600;
}
.dropdown-toggle.active-parent {
    background-color: #f5f5f4; /* stone-100 */
    color: #44403c; /* stone-700 */
}
.dropdown-arrow.rotate-180 {
    transform: rotate(180deg);
}
.submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
}
.submenu.open {
    max-height: 500px; /* Altura suficiente para os itens */
}
/* Estilos para o novo player de áudio do Deep Dive */
.audio-player-container {
    display: flex;
    align-items: center;
    gap: 0.75rem; /* 12px */
    width: 100%;
    max-width: 450px;
}
.play-pause-button {
    background-color: #F1D24B;
    color: #44403c;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background-color 0.2s;
    flex-shrink: 0;
}
.play-pause-button:hover {
    background-color: #eab308;
}
.play-pause-button svg {
    width: 20px;
    height: 20px;
}
.progress-bar {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 6px;
    background: #e7e5e4; /* stone-200 */
    border-radius: 3px;
    outline: none;
    cursor: pointer;
}
.progress-bar::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: #44403c; /* stone-700 */
    border-radius: 50%;
    cursor: pointer;
}
.progress-bar::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: #44403c; /* stone-700 */
    border-radius: 50%;
    cursor: pointer;
}
.time-display {
    font-size: 0.75rem; /* text-xs */
    color: #57534e; /* stone-600 */
    min-width: 70px;
    text-align: center;
}
.speed-button {
    background-color: #f5f5f4; /* stone-100 */
    border: 1px solid #d6d3d1; /* stone-300 */
    color: #44403c;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s, border-color 0.2s;
}
.speed-button.active {
    background-color: #F1D24B;
    border-color: #eab308;
}
/* Estilo para o Menu Suspenso (Select) da Grade */
.grade-select-container {
    margin-bottom: 1.5rem;
    max-width: 400px;
}
.grade-select {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    border: 1px solid #d6d3d1; /* stone-300 */
    background-color: #ffffff;
    font-weight: 600;
    color: #44403c; /* stone-700 */
    -webkit-appearance: none;
    appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
    cursor: pointer;
}
        
/* CORREÇÃO para o container da Grade de Horários */
.schedule-container {
    display: grid;
    /* Define 5 colunas de tamanho igual (uma para cada dia) */
    grid-template-columns: repeat(5, 1fr); 
    gap: 4px;
    background-color: #e7e5e4; /* stone-200 */
    border: 1px solid #e7e5e4;
    border-radius: 0.5rem;
    overflow-x: auto;
    width: 100%;
}
.schedule-header, .schedule-time, .schedule-cell {
    padding: 0.75rem;
    background-color: #ffffff;
    text-align: center;
    font-weight: 600;
}
.schedule-header {
    background-color: #f5f5f4; /* stone-100 */
    color: #44403c; /* stone-700 */
}
.schedule-cell {
    min-height: 80px;
    border-top: 1px solid #e7e5e4;
    border-left: 1px solid #e7e5e4;
}
.class-entry {
    padding: 0.75rem; /* Aumenta o padding para melhor espaçamento */
    border-radius: 0.375rem; /* rounded-md */
    text-align: left;
    margin-bottom: 0.5rem;
    color: #44403c;
    transition: transform 0.2s;
    display: flex; /* Adicionado para alinhar o conteúdo */
    flex-direction: column; /* Adicionado para empilhar os itens */
    gap: 0.25rem; /* Adiciona um pequeno espaço entre as linhas */
}
.class-entry:hover {
    transform: scale(1.05);
}
.class-entry strong {
    display: block;
    font-weight: 700;
    font-size: 1rem; /* Aumenta um pouco o nome do aluno */
}
/* Cores para os professores */
/* ADICIONE ESTAS LINHAS NO LUGAR */
.class-entry {
    background-color: #F5F5F5 !important; /* Fundo amarelo para todas */
    border-color: #E0E0E0 !important;     /* Borda amarela mais escura */
}
.class-tag {
    font-size: 0.625rem;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 9999px;
    color: white;
    margin-bottom: 4px;
    display: inline-block;
    text-transform: uppercase;
}
.tag-turma { background-color: #FF5C3D; } /* Tag Azul */
.tag-vip   { background-color: #8671D1; } /* Tag Roxa */
        /* --- Estilos para o Calendário --- */
.calendar-container {
    background-color: #ffffff;
    padding: 1.5rem;
    border-radius: 0.75rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    border: 1px solid #e7e5e4;
}

.calendar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.calendar-header h3 {
    font-size: 1.5rem;
    font-weight: 700;
    color: #44403c;
}

.calendar-nav-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.5rem;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 0.5rem;
    text-align: center;
}

.calendar-day-header {
    font-weight: 600;
    color: #a8a29e;
    font-size: 0.875rem;
    padding-bottom: 0.5rem;
}

.calendar-day {
    padding: 0.5rem;
    border-radius: 50%;
    cursor: pointer;
    position: relative;
    transition: background-color 0.2s;
    aspect-ratio: 1 / 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

.calendar-day.other-month {
    color: #d6d3d1;
    cursor: default;
}

.calendar-day.current-month:hover {
    background-color: #FFFBEB; /* yellow-50 */
}

.calendar-day.today {
    background-color: #F1D24B;
    color: #44403c;
    font-weight: 700;
}

.event-dot {
    position: absolute;
    bottom: 6px;
    left: 50%;
    transform: translateX(-50%);
    width: 6px;
    height: 6px;
    border-radius: 50%;
}

.dot-event { background-color: #8671D1; } /* Roxo para eventos SLAP */
.dot-holiday { background-color: #FF5C3D; } /* Laranja para feriados */
.dot-gravacao { background-color: #4b5563; } /* Cinza para gravação */
.dot-opcional { background-color: #22c55e; } /* Verde para opcional */
.dot-urgente  { background-color: #ef4444; } /* Vermelho para urgente */
.dot-lembrete { background-color: #f59e0b; } /* Âmbar para lembrete */

/* --- Estilos para o Modal de Eventos --- */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s, visibility 0.3s;
}
.modal-overlay.visible {
    opacity: 1;
    visibility: visible;
}
.modal-content {
    background-color: white;
    padding: 2rem;
    border-radius: 0.75rem;
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    transform: scale(0.95);
    transition: transform 0.3s;
}
.modal-overlay.visible .modal-content {
    transform: scale(1);
}
.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #e7e5e4;
    padding-bottom: 1rem;
    margin-bottom: 1rem;
}
.modal-header h4 { font-size: 1.25rem; font-weight: 700; color: #44403c; }
.modal-close-btn {
    background: none;
    border: none;
    cursor: pointer;
    color: #a8a29e;
}
.modal-event-item {
    padding: 0.75rem 0;
    border-bottom: 1px solid #f5f5f4;
}
.modal-event-item:last-child {
    border-bottom: none;
}
.modal-event-item .event-type {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
}
.event-type-holiday { background-color: #FFE4E6; color: #9F1239; } /* red-100, red-800 */
.event-type-event { background-color: #EFEBFF; color: #4C1D95; } /* violet-100, violet-800 */
.event-type-gravacao { background-color: #e5e7eb; color: #374151; } /* gray-200, gray-700 */
.event-type-opcional { background-color: #d1fae5; color: #065f46; } /* green-100, green-800 */
.event-type-urgente  { background-color: #fee2e2; color: #991b1b; } /* red-200, red-800 */
.event-type-lembrete { background-color: #fffbeb; color: #b45309; } /* amber-50, amber-700 */
    </style>
    <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body class="bg-stone-50 text-stone-800">

    <div id="app-container">
        <div id="app" class="min-h-screen md:flex">
            
            <aside class="md:w-64 bg-white md:border-r border-b border-stone-200 p-4 md:p-6 flex flex-col">
    <div class="mb-6 text-center">
        <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749349751/DBB440C2-684E-4DCF-9CD3-B2DDC18F1E53_3_vgocga.jpg" onerror="this.onerror=null;this.src='https://placehold.co/96x96/e0e0e0/ffffff?text=LOGO'" alt="SLAP Logo" class="w-24 h-auto mx-auto rounded-lg">
    </div>
    <h1 class="text-xl font-bold text-stone-800 mb-6 text-center">Hub Pedagógico</h1>
    <nav id="main-navigation" class="space-y-1 flex-1">
        <!-- Início -->
        <button data-target="inicio" class="nav-item w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center font-semibold">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
            Início
        </button>

        <!-- Níveis (Dropdown) -->
        <div class="nav-dropdown">
            <button class="nav-item dropdown-toggle w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center justify-between font-semibold">
                <span class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>
                    Níveis
                </span>
                <svg class="dropdown-arrow w-4 h-4 transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
            <div class="submenu pl-6 mt-1 space-y-1">
                <button data-target="slap-levels" class="nav-item submenu-item w-full text-left px-4 py-2 rounded-lg text-stone-600 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors">CPs</button>
                <button data-target="cefr" class="nav-item submenu-item w-full text-left px-4 py-2 rounded-lg text-stone-600 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors">CEFR</button>
            </div>
        </div>
        
        <!-- SLAP Games (Dropdown) com o novo ícone de gamepad -->
<div class="nav-dropdown">
    <button class="nav-item dropdown-toggle w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center justify-between font-semibold">
        <span class="flex items-center">
             <!-- ÍCONE NOVO: GAMEPAD MAIS LEGÍVEL -->
             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
                <line x1="6" x2="10" y1="12" y2="12"/>
                <line x1="8" x2="8" y1="10" y2="14"/>
                <rect width="20" height="12" x="2" y="6" rx="2"/>
                <path d="M17 11h.01"/>
             </svg>
            SLAP Games
        </span>
        <svg class="dropdown-arrow w-4 h-4 transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
    </button>
    <div class="submenu pl-6 mt-1 space-y-1">
        <button data-target="brainflip" class="nav-item submenu-item w-full text-left px-4 py-2 rounded-lg text-stone-600 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors">BrainFlip</button>
        <button data-target="test-your-english" class="nav-item submenu-item w-full text-left px-4 py-2 rounded-lg text-stone-600 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors">English Quiz</button>
    </div>
</div>

        <!-- Grade -->
<button data-target="grade" class="nav-item w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center font-semibold">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line>
    </svg>
    Grade
</button>

        <!-- Calendário -->
<button data-target="calendario" class="nav-item w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center font-semibold">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>
    Calendário
</button>
        
        <!-- Teacher's Room -->
        <button data-target="teachers-room" class="nav-item w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center font-semibold">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            Teachers Room
        </button>

        <!-- Creators Room -->
        <button data-target="creators-room" class="nav-item w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center font-semibold">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><path d="M15 12h.01"></path><path d="M12 12h.01"></path><path d="M9 12h.01"></path><path d="M12 2a3.5 3.5 0 0 0 0 7 3.5 3.5 0 0 0 0-7z"></path><path d="M12 22a3.5 3.5 0 0 0 0-7 3.5 3.5 0 0 0 0 7z"></path><path d="M22 12a3.5 3.5 0 0 0-7 0 3.5 3.5 0 0 0 7 0z"></path><path d="M2 12a3.5 3.5 0 0 0 7 0 3.5 3.5 0 0 0-7 0z"></path></svg>
            Creators Room
        </button>

        <!-- Suporte (Dropdown) -->
        <div class="nav-dropdown">
            <button class="nav-item dropdown-toggle w-full text-left px-4 py-2.5 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center justify-between font-semibold">
                <span class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                    Suporte
                </span>
                <svg class="dropdown-arrow w-4 h-4 transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
            <div class="submenu pl-6 mt-1 space-y-1">
                <button data-target="deep-dive" class="nav-item submenu-item w-full text-left px-4 py-2 rounded-lg text-stone-600 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors">Deep Dive</button>
                <button data-target="method" class="nav-item submenu-item w-full text-left px-4 py-2 rounded-lg text-stone-600 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors">Método</button>
            </div>
        </div>
    </nav>
</aside>
    
            <main class="flex-1 p-4 sm:p-6 md:p-8">
                <header id="main-header" class="mb-8">
                    <h2 id="main-title" class="text-3xl font-bold text-[#F1D24B]"></h2>
                    <p id="main-description" class="mt-2 text-stone-600"></p>
                </header>
                
                <div id="content-area">
                    <!-- Conteúdo será injetado aqui dinamicamente -->
                </div>
            </main>
        </div>
    </div>

    <footer class="bg-stone-800 text-stone-400 mt-auto">
        <div class="container mx-auto px-6 py-6">
            <div class="flex flex-col sm:flex-row justify-between items-center">
                 <div class="text-sm">
                    © 2024 SLAP Inglês. Todos os direitos reservados.
                </div>
                <div class="flex gap-6 mt-4 sm:mt-0">
                    <a href="https://www.youtube.com/@slapingles" target="_blank" rel="noopener noreferrer" class="text-stone-400 hover:text-white transition-colors">
                         <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2A29 29 0 0 0 23 11.75a29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>
                    </a>
                    <a href="https://www.instagram.com/slapingles" target="_blank" rel="noopener noreferrer" class="text-stone-400 hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                    </a>
                    <a href="https://www.tiktok.com/@slapingles" target="_blank" rel="noopener noreferrer" class="text-stone-400 hover:text-white transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    
    <audio id="click-sound" src="https://res.cloudinary.com/dqfi22uz0/video/upload/v1749379887/click_lremdg.mp3" preload="auto"></audio>
    <audio id="correct-sound" src="https://res.cloudinary.com/dqfi22uz0/video/upload/v1749377574/correct_pew0xz.mp3" preload="auto"></audio>
    <audio id="wrong-sound" src="https://res.cloudinary.com/dqfi22uz0/video/upload/v1749377575/wrong_hdpg0g.mp3" preload="auto"></audio>


    <script>
let loggedInUser = null;
        
// O resto do seu código (as funções renderGradeSection, etc.) continua abaixo...
        // Ação: Substitua sua função renderGradeSection() inteira por esta:

function renderGradeSection() {
    setActiveHubButton(null);
    showHeader();
    document.getElementById('main-title').textContent = 'Grade de Horários';

    // Verifica a função do utilizador logado para decidir o que mostrar
    if (loggedInUser && loggedInUser.role === 'professor') {
        // --- VISÃO RESTRITA PARA PROFESSORES ---
        document.getElementById('main-description').textContent = 'Visualize sua grade de horários individual.';

        // Extrai o nome do email (ex: 'victor' de 'victor@slapingles.com')
        const namePart = loggedInUser.username.split('@')[0];
        const teacherName = namePart.charAt(0).toUpperCase() + namePart.slice(1);
        const teacherKey = `Teacher ${teacherName}`;

        // Verifica se o professor tem uma grade de horários nos dados
        if (scheduleData[teacherKey]) {
            // Renderiza o conteúdo SEM o menu de seleção
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <div id="schedule-grid-container">
                        <!-- A tabela de horários do professor será renderizada aqui -->
                    </div>
                </section>
            `;
            // Chama a função para desenhar a grade apenas para o professor logado
            renderScheduleGrid(teacherKey);
        } else {
            // Mensagem de fallback caso a grade do professor não seja encontrada
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <p>Sua grade de horários ainda não foi configurada.</p>
                </section>
            `;
        }
        
    } else {
        // --- VISÃO COMPLETA PARA COORDENADORES E ADMINS ---
        document.getElementById('main-description').textContent = 'Selecione um professor no menu suspenso para ver a grade de horários individual ou visualize a grade geral.';

        // Cria as opções para o menu suspenso
        let optionsHtml = '<option value="all">Todos os Professores</option>';
        Object.keys(scheduleData).forEach(teacher => {
            optionsHtml += `<option value="${teacher}">${teacher}</option>`;
        });

        // Define a estrutura da página da Grade com um menu suspenso (<select>)
        contentArea.innerHTML = `
            <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                <div class="grade-select-container">
                    <label for="teacher-select" class="block text-sm font-medium text-stone-700 mb-1">Selecione uma grade:</label>
                    <select id="teacher-select" class="grade-select">
                        ${optionsHtml}
                    </select>
                </div>
                <div id="schedule-grid-container">
                    <!-- A tabela de horários será renderizada aqui -->
                </div>
            </section>
        `;

        // Adiciona o evento "onchange" para o menu suspenso
        const teacherSelect = document.getElementById('teacher-select');
        teacherSelect.addEventListener('change', (event) => {
            const teacherFilter = event.target.value;
            renderScheduleGrid(teacherFilter); // Re-renderiza a grade com o filtro
        });

        // Renderiza a grade inicial com "Todos os Professores"
        renderScheduleGrid('all');
    }
}
// Ação: Substitua esta função inteira
function renderScheduleGrid(teacherFilter) {
    const gridContainer = document.getElementById('schedule-grid-container');
    if (!gridContainer) return;

    const days = ["Segunda", "Terça", "Quarta", "Quinta", "Sexta"];

    let gridHtml = `<div class="schedule-container">`;
    
    // Cabeçalho com os dias da semana
    days.forEach(day => gridHtml += `<div class="schedule-header">${day}</div>`);

    // Células dos dias (uma para cada dia da semana)
    days.forEach(day => {
        let cellContent = '';

        // Coleta todas as aulas do dia
        const dailyClasses = [];
        Object.keys(scheduleData).forEach(teacher => {
            if (teacherFilter === 'all' || teacherFilter === teacher) {
                if (scheduleData[teacher][day]) {
                    Object.keys(scheduleData[teacher][day]).forEach(startTime => {
                        const classInfo = scheduleData[teacher][day][startTime];
                        dailyClasses.push({
                            startTime: startTime,
                            ...classInfo,
                            teacher: teacher
                        });
                    });
                }
            }
        });
        
        // Ordena as aulas pelo horário de início
        dailyClasses.sort((a, b) => a.startTime.localeCompare(b.startTime));

        // Monta o HTML para cada aula do dia
        dailyClasses.forEach(classInfo => {
            const teacherName = teacherFilter === 'all' ? `<em>(${classInfo.teacher.replace('Teacher ', '')})</em>` : '';
            
            // Define a classe e o texto da tag com base no tipo da aula
            const tagClass = classInfo.type === 'vip' ? 'tag-vip' : 'tag-turma';
            const tagText = classInfo.type === 'vip' ? 'VIP' : 'TURMA';

            // Agora a caixinha sempre será amarela (definido no CSS) e terá a tag interna
            cellContent += `
                <div class="class-entry">
                    <span class="class-tag ${tagClass}">${tagText}</span>
                    <span class="text-xs text-stone-600">${classInfo.startTime.replace(':00','h')} às ${classInfo.endTime.replace(':00','h')}</span>
                    <strong>${classInfo.student} ${teacherName}</strong>
                    <span class="text-sm text-stone-700">${classInfo.level}</span>
                </div>`;
        });
        
        // Adiciona a célula do dia ao grid
        gridHtml += `<div class="schedule-cell">${cellContent}</div>`;
    });

    gridHtml += '</div>'; // Fecha o container
    gridContainer.innerHTML = gridHtml;
}
        // --- Funções para a Seção Calendário ---

let currentDate = new Date();

function renderCalendarSection() {
    setActiveHubButton(null);
    showHeader();
    document.getElementById('main-title').textContent = 'Calendário de Eventos';
    document.getElementById('main-description').textContent = 'Navegue pelo calendário para ver feriados nacionais e eventos importantes do SLAP.';

    contentArea.innerHTML = `
        <div id="calendar-wrapper"></div>
        <div id="calendar-modal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="modal-date"></h4>
                    <button class="modal-close-btn" onclick="closeCalendarModal()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>
                <div id="modal-body"></div>
            </div>
        </div>
    `;

    generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
}

// Ação: Substitua esta função inteira
function generateCalendar(year, month) {
    const calendarWrapper = document.getElementById('calendar-wrapper');
    const monthNames = ["Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"];
    const daysOfWeek = ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"];

    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startDayOfWeek = firstDay.getDay();

    let calendarHtml = `
        <div class="calendar-container">
            <div class="calendar-header">
                <button class="calendar-nav-btn" onclick="changeMonth(-1)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M15.41 7.41L14 6l-6 6l6 6l1.41-1.41L10.83 12z"/></svg>
                </button>
                <h3>${monthNames[month]} ${year}</h3>
                <button class="calendar-nav-btn" onclick="changeMonth(1)">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M8.59 16.59L10 18l6-6l-6-6l-1.41 1.41L13.17 12z"/></svg>
                </button>
            </div>
            <div class="calendar-grid">
                ${daysOfWeek.map(day => `<div class="calendar-day-header">${day}</div>`).join('')}
    `;

    for (let i = 0; i < startDayOfWeek; i++) {
        calendarHtml += `<div></div>`;
    }

    const today = new Date();
    for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        let dayClasses = 'calendar-day current-month';
        let dotsHtml = '';

        if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
            dayClasses += ' today';
        }

        if (eventData[dateStr]) {
    const hasHoliday = eventData[dateStr].some(e => e.type === 'holiday');
    const hasEvent = eventData[dateStr].some(e => e.type === 'event');
    const hasGravacao = eventData[dateStr].some(e => e.type === 'gravacao');
    const hasOpcional = eventData[dateStr].some(e => e.type === 'opcional');
    const hasUrgente = eventData[dateStr].some(e => e.type === 'urgente');
    const hasLembrete = eventData[dateStr].some(e => e.type === 'lembrete');

    if (hasHoliday) dotsHtml += '<div class="event-dot dot-holiday"></div>';
    if (hasEvent) dotsHtml += '<div class="event-dot dot-event"></div>';
    if (hasGravacao) dotsHtml += '<div class="event-dot dot-gravacao"></div>';
    if (hasOpcional) dotsHtml += '<div class="event-dot dot-opcional"></div>';
    if (hasUrgente) dotsHtml += '<div class="event-dot dot-urgente"></div>';
    if (hasLembrete) dotsHtml += '<div class="event-dot dot-lembrete"></div>';
}

        calendarHtml += `<div class="${dayClasses}" data-date="${dateStr}" onclick="showCalendarModal('${dateStr}')">${day}${dotsHtml}</div>`;
    }

    calendarHtml += `</div></div>`;
    calendarWrapper.innerHTML = calendarHtml;
}

function changeMonth(direction) {
    currentDate.setMonth(currentDate.getMonth() + direction);
    generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
}

// Ação: Substitua esta função inteira
function showCalendarModal(dateStr) {
    if (!eventData[dateStr]) return;

    const modal = document.getElementById('calendar-modal');
    const modalDate = document.getElementById('modal-date');
    const modalBody = document.getElementById('modal-body');

    const date = new Date(dateStr.replace(/-/g, '/'));
    modalDate.textContent = date.toLocaleDateString('pt-BR', { day: 'numeric', month: 'long', year: 'numeric' });

    let eventsHtml = '';
    eventData[dateStr].forEach(event => {
        let typeClass = '';
    let typeText = '';

    if (event.type === 'holiday') {
        typeClass = 'event-type-holiday';
        typeText = 'Feriado';
    } else if (event.type === 'event') {
        typeClass = 'event-type-event';
        typeText = 'Evento';
    } else if (event.type === 'gravacao') {
        typeClass = 'event-type-gravacao';
        typeText = 'Gravação';
    } else if (event.type === 'opcional') {
        typeClass = 'event-type-opcional';
        typeText = 'Opcional';
    } else if (event.type === 'urgente') {
        typeClass = 'event-type-urgente';
        typeText = 'Urgente';
    } else if (event.type === 'lembrete') {
        typeClass = 'event-type-lembrete';
        typeText = 'Lembrete';
    }

    eventsHtml += `
        <div class="modal-event-item">
            <span class="event-type ${typeClass}">${typeText}</span>
            <p class="text-stone-700">${event.description}</p>
        </div>
    `;
});
    modalBody.innerHTML = eventsHtml || '<p>Nenhum evento para este dia.</p>';
    modal.classList.add('visible');
}

function closeCalendarModal() {
    const modal = document.getElementById('calendar-modal');
    modal.classList.remove('visible');
}
        const motivationalQuotes = [
            { quote: "The secret of getting ahead is getting started.", author: "Mark Twain" },
            { quote: "It’s not whether you get knocked down, it’s whether you get up.", author: "Vince Lombardi" },
            { quote: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { quote: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
            { quote: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { quote: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
            { quote: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis" },
            { quote: "Act as if what you do makes a difference. It does.", author: "William James" },
            { quote: "The journey of a thousand miles begins with a single step.", author: "Lao Tzu" },
            { quote: "What you get by achieving your goals is not as important as what you become by achieving your goals.", author: "Zig Ziglar" },
            { quote: "Either you run the day or the day runs you.", author: "Jim Rohn" },
            { quote: "I can't change the direction of the wind, but I can adjust my sails to always reach my destination.", author: "Jimmy Dean" },
            { quote: "Perfection is not attainable, but if we chase perfection we can catch excellence.", author: "Vince Lombardi" },
            { quote: "The best way to predict the future is to create it.", author: "Peter Drucker" },
            { quote: "Don’t watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { quote: "A creative man is motivated by the desire to achieve, not by the desire to beat others.", author: "Ayn Rand" },
            { quote: "If you want to lift yourself up, lift up someone else.", author: "Booker T. Washington" },
            { quote: "Limitations live only in our minds. But if we use our imaginations, our possibilities become limitless.", author: "Jamie Paolinetti" },
            { quote: "The harder the conflict, the more glorious the triumph.", author: "Thomas Paine" },
            { quote: "I am not a product of my circumstances. I am a product of my decisions.", author: "Stephen Covey" },
            { quote: "Strive not to be a success, but rather to be of value.", author: "Albert Einstein" },
            { quote: "You miss 100% of the shots you don’t take.", author: "Wayne Gretzky" },
            { quote: "The mind is everything. What you think you become.", author: "Buddha" },
            { quote: "The only impossible journey is the one you never begin.", author: "Tony Robbins" },
            { quote: "Your time is limited, so don’t waste it living someone else’s life.", author: "Steve Jobs" },
            { quote: "The most difficult thing is the decision to act, the rest is merely tenacity.", author: "Amelia Earhart" },
            { quote: "An unexamined life is not worth living.", author: "Socrates" },
            { quote: "Eighty percent of success is showing up.", author: "Woody Allen" },
            { quote: "Don't be afraid to give up the good to go for the great.", author: "John D. Rockefeller" },
            { quote: "The two most important days in your life are the day you are born and the day you find out why.", author: "Mark Twain" },
            { quote: "Whatever you are, be a good one.", author: "Abraham Lincoln" },
            { quote: "The best revenge is massive success.", author: "Frank Sinatra" },
            { quote: "I have not failed. I've just found 10,000 ways that won't work.", author: "Thomas A. Edison" },
            { quote: "A person who never made a mistake never tried anything new.", author: "Albert Einstein" },
            { quote: "What seems to us as bitter trials are often blessings in disguise.", author: "Oscar Wilde" },
            { quote: "It is never too late to be what you might have been.", author: "George Eliot" },
            { quote: "To be yourself in a world that is constantly trying to make you something else is the greatest accomplishment.", author: "Ralph Waldo Emerson" },
            { quote: "You can't use up creativity. The more you use, the more you have.", author: "Maya Angelou" },
            { quote: "Build your own dreams, or someone else will hire you to build theirs.", author: "Farrah Gray" },
            { quote: "The only thing standing between you and your goal is the story you keep telling yourself as to why you can't achieve it.", author: "Jordan Belfort" },
            { quote: "If you are not willing to risk the usual, you will have to settle for the ordinary.", author: "Jim Rohn" },
            { quote: "All our dreams can come true, if we have the courage to pursue them.", author: "Walt Disney" },
            { quote: "Do one thing every day that scares you.", author: "Eleanor Roosevelt" },
            { quote: "It does not matter how slowly you go as long as you do not stop.", author: "Confucius" },
            { quote: "Success is walking from failure to failure with no loss of enthusiasm.", author: "Winston Churchill" },
            { quote: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
            { quote: "It is our choices, that show what we truly are, far more than our abilities.", author: "J.K. Rowling" },
            { quote: "Don't let yesterday take up too much of today.", author: "Will Rogers" },
            { quote: "The successful warrior is the average man, with laser-like focus.", author: "Bruce Lee" },
            { quote: "In the middle of every difficulty lies opportunity.", author: "Albert Einstein" }
        ];
        
        const employeeOfTheMonth = {
            name: "Ana Clara",
            photo: "https://res.cloudinary.com/dqfi22uz0/image/upload/v1749377016/AVATAR_FEM_LARANJA_ym6wjt.png",
            reason: "Pelo seu incrível empenho na organização dos eventos culturais e por sempre trazer novas ideias que engajam nossos alunos e equipe. Sua proatividade é uma inspiração para todos!"
        };
// Ação: Substitua este bloco de código
// Ação: Substitua todo este bloco de código
const scheduleData = {
    "Teacher Victor": {
        "Segunda": {
            "10:00": { student: "Carlos Silva", level: "Freshman 2", endTime: "11:00" },
            "14:00": { student: "Mariana Costa", level: "Starter 1", endTime: "15:00" },
        },
        "Quarta": {
            "11:00": { student: "Pedro Martins", level: "Sophomore 1", endTime: "12:00" },
            "12:00": { student: "Pedro Martins", level: "Sophomore 1", endTime: "12:00" },
        },
        "Sexta": {
            "09:00": { student: "Ana Beatriz", level: "Freshman 2", endTime: "10:00" },
        }
    },
    "Teacher Letícia": {
        "Terça": {
            "15:00": { student: "Juliana Souza", level: "Junior 1", endTime: "16:00" },
            "16:00": { student: "Ricardo Alves", level: "Junior 1", endTime: "17:00" },
        },
        "Quinta": {
            "10:00": { student: "Fernanda Lima", level: "Senior 2", endTime: "11:00" },
            "11:00": { student: "Lucas Pereira", level: "Senior 2", endTime: "12:00" },
        }
    },
    "Teacher Areli": {
        "Segunda": {
            "11:00": { student: "Gabriel Rocha", level: "Starter 2", endTime: "12:00" },
        },
        "Quarta": {
            "16:00": { student: "Beatriz Mendes", level: "Freshman 1", endTime: "17:00" },
            "17:00": { student: "Rafael Gomes", level: "Freshman 1", endTime: "18:00" },
        }
    },
    "Teacher Jaynni": {
        // Adicione aqui as aulas da Teacher Jaynni
    },
    "Teacher Anael": {
        "Segunda": {
            "08:00": { student: "Rallyson Chaves", level: "a preencher", endTime: "09:00", type: "vip" },
            "15:00": { student: "Arthur Medeiros", level: "a preencher", endTime: "16:00", type: "vip" },
            "18:00": { student: "Elyonara Lyra", level: "a preencher", endTime: "19:00", type: "vip" },
            "19:00": { student: "Gabriel Bouret", level: "a preencher", endTime: "20:00", type: "vip" },
            "20:00": { student: "Carlos Eduardo", level: "a preencher", endTime: "21:00", type: "vip" }
        },
        "Terça": {
            "15:00": { student: "Samantha Lima", level: "a preencher", endTime: "16:00", type: "vip" },
            "16:00": { student: "Thais Souza", level: "a preencher", endTime: "17:00", type: "vip" },
            "17:00": { student: "Magno Oliveira", level: "a preencher", endTime: "18:00", type: "vip" },
            "19:00": { student: "Paulo Macedo", level: "a preencher", endTime: "20:00", type: "vip" },
            "20:00": { student: "Junior 1", level: "Pre-advanced 1", endTime: "21:00", type: "turma" },
            "21:00": { student: "Leonardo Souza", level: "a preencher", endTime: "22:00", type: "vip" }
        },
        "Quarta": {
            "08:00": { student: "Rallyson Chaves", level: "a preencher", endTime: "09:00", type: "vip" },
            "15:00": { student: "Arthur Medeiros", level: "a preencher", endTime: "16:00", type: "vip" },
            "18:00": { student: "Elyonara Lyra", level: "a preencher", endTime: "19:00", type: "vip" },
            "19:00": { student: "Gabriel Bouret", level: "a preencher", endTime: "20:00", type: "vip" },
            "20:00": { student: "Carlos Eduardo", level: "a preencher", endTime: "21:00", type: "vip" }
        },
        "Quinta": {
            "15:00": { student: "Samantha Lima", level: "a preencher", endTime: "16:00" },
            "16:00": { student: "Thais Souza", level: "a preencher", endTime: "17:00" },
            "17:00": { student: "Magno Oliveira", level: "a preencher", endTime: "18:00" },
            "19:00": { student: "Paulo Macedo", level: "a preencher", endTime: "20:00" },
            "20:00": { student: "Junior 1", level: "a preencher", endTime: "21:00" },
            "21:00": { student: "Leonardo Souza", level: "a preencher", endTime: "22:00" }
        }
    },
    "Teacher Felipe": {
        // Adicione aqui as aulas do Teacher Felipe
    },
    "Teacher Gabriella": {
        // Adicione aqui as aulas da Teacher Gabriella
    }
};
        const eventData = {
    // --- Feriados Nacionais 2025 (Brasil) ---
    "2025-01-01": [{ type: "holiday", description: "Confraternização Universal (Ano Novo)" }],
    "2025-03-03": [{ type: "holiday", description: "Carnaval (Ponto Facultativo)" }],
    "2025-03-04": [{ type: "holiday", description: "Carnaval (Ponto Facultativo)" }],
    "2025-04-18": [{ type: "holiday", description: "Paixão de Cristo" }],
    "2025-04-21": [{ type: "holiday", description: "Tiradentes" }],
    "2025-05-01": [{ type: "holiday", description: "Dia do Trabalho" }],
    "2025-06-19": [{ type: "holiday", description: "Corpus Christi (Ponto Facultativo)" }],
    "2025-09-07": [{ type: "holiday", description: "Independência do Brasil" }],
    "2025-10-12": [{ type: "holiday", description: "Nossa Senhora Aparecida" }],
    "2025-10-15": [{ type: "holiday", description: "Dia do Professor" }],
    "2025-11-02": [{ type: "holiday", description: "Finados" }],
    "2025-11-15": [{ type: "holiday", description: "Proclamação da República" }],
    "2025-11-20": [{ type: "holiday", description: "Dia da Consciência Negra" }],
    "2025-12-25": [{ type: "holiday", description: "Natal" }],

    // --- Eventos SLAP (Exemplos) ---
    "2025-06-27": [{ type: "event", description: "Reunião Pedagógica Mensal" }],
    "2025-07-15": [{ type: "event", description: "Início das Inscrições para Novas Turmas" }],
    "2025-07-30": [{ type: "event", description: "Prazo Final: Entrega de Planejamentos" }, { type: "event", description: "Prazo Final: Entrega de Planejamentos" }]
    "2025-08-05": [{ type: "gravacao", description: "Gravação da aula de revisão para o YouTube" }],
    "2025-08-12": [{ type: "opcional", description: "Workshop de conversação (Opcional)" }],
    "2025-08-19": [{ type: "urgente", description: "Urgente: Enviar notas finais dos alunos" }],
    "2025-08-26": [{ type: "lembrete", description: "Lembrete: Preparar material para o próximo mês" }],
    "2025-08-28": [{ type: "lembrete", description: "Lembrete: Reunião com a Letícia" }, { type: "urgente", description: "Responder e-mails dos pais" }
};
const courseData = [
    {
        name: "Starter 1",
        lessons: [
    {
        title: "OPEN HOUSE",
        communicativeObjective: "Apresentar-se, conhecer os colegas e aprender comandos básicos da sala de aula.",
        functions: ["My name is...", "Nice to meet you.", "What's your name?", "Open your books.", "Listen and repeat."],
        vocabulary: ["teacher", "student", "book", "hello", "goodbye"],
        grammarTopic: ["Subject Pronouns (I, you)"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "FEELINGS",
        communicativeObjective: "Falar sobre sentimentos e responder como está se sentindo.",
        functions: ["How are you?", "How are you feeling?", "I am happy.", "I'm not sad."],
        vocabulary: ["happy", "sad", "angry", "tired", "sleepy", "hungry", "thirsty"],
        grammarTopic: ["Verb To Be (am/are) com adjetivos"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "NAMES & GREETINGS",
        communicativeObjective: "Usar saudações formais e informais e perguntar sobre nomes completos.",
        functions: ["Good morning/afternoon/evening.", "What's your first/middle/last name?", "What's your nickname?"],
        vocabulary: ["first name", "middle name", "last name", "nickname", "greetings"],
        grammarTopic: ["Nenhum"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "NUMBERS PT. 1",
        communicativeObjective: "Reconhecer e usar números de 1 a 20 e falar sobre idade.",
        functions: ["How old are you?", "I am ___ years old."],
        vocabulary: ["numbers 1-20"],
        grammarTopic: ["Verb To Be (is/are) para idades"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "NUMBERS PT. 2",
        communicativeObjective: "Reconhecer e usar números de 21 a 100 e perguntar sobre números de telefone.",
        functions: ["What's your phone number?", "My phone number is..."],
        vocabulary: ["numbers 21-100", "phone number", "cell phone"],
        grammarTopic: ["Nenhum"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "SPELLING",
        communicativeObjective: "Soletrar nomes e palavras simples usando o alfabeto.",
        functions: ["How do you spell your name?", "It's..."],
        vocabulary: ["letras do alfabeto (A-Z)"],
        grammarTopic: ["O alfabeto"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "ORDINAL NUMBERS",
        communicativeObjective: "Usar números ordinais para falar sobre datas e sequências.",
        functions: ["When is your birthday?", "My birthday is on..."],
        vocabulary: ["1st to 31st (first, second, third...)", "date", "birthday"],
        grammarTopic: ["Preposição 'on' para datas"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "BASIC VERBS",
        communicativeObjective: "Descrever ações e atividades cotidianas.",
        functions: ["I work.", "You study.", "We eat pizza."],
        vocabulary: ["work", "study", "eat", "sleep", "drink", "live", "watch TV"],
        grammarTopic: ["Verbos de ação no Simple Present"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "BASIC ADJECTIVES",
        communicativeObjective: "Descrever pessoas, lugares e objetos usando adjetivos básicos.",
        functions: ["The house is big.", "The car is cheap.", "He is a good student."],
        vocabulary: ["big", "small", "good", "bad", "beautiful", "ugly", "expensive", "cheap"],
        grammarTopic: ["Posição dos adjetivos (antes do substantivo)"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "DEMONSTRATIVE PRONOUNS",
        communicativeObjective: "Apontar para objetos próximos e distantes.",
        functions: ["What is this?", "This is an apple.", "What are those?", "Those are cars."],
        vocabulary: ["this", "that", "these", "those", "objetos da sala de aula"],
        grammarTopic: ["Uso de this/that/these/those"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "VERB TO BE",
        communicativeObjective: "Revisar e consolidar o uso do verbo 'To Be' (am, is, are) em sentenças afirmativas, negativas e interrogativas.",
        functions: ["Are you a student?", "Yes, I am.", "She isn't here.", "Is he a doctor?"],
        vocabulary: ["doctor", "engineer", "student", "teacher", "occupations"],
        grammarTopic: ["Revisão completa do Verbo 'To Be'"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "COUNTRIES & NATIONALITIES",
        communicativeObjective: "Falar sobre países e nacionalidades.",
        functions: ["Where are you from?", "I'm from Brazil.", "She is Japanese."],
        vocabulary: ["Brazil", "USA", "Japan", "Italy", "Brazilian", "American", "Japanese", "Italian"],
        grammarTopic: ["Nacionalidades como adjetivos"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "NEIGHBORHOOD",
        communicativeObjective: "Descrever lugares no bairro e dar direções simples.",
        functions: ["Where is the bank?", "It's next to the supermarket.", "There is a park on my street."],
        vocabulary: ["bank", "supermarket", "park", "school", "hospital", "street", "avenue"],
        grammarTopic: ["There is/There are & Preposições de lugar (in, on, at, next to)"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "FAMILY MEMBERS",
        communicativeObjective: "Falar sobre os membros da família.",
        functions: ["This is my mother.", "He is my brother.", "Do you have a sister?"],
        vocabulary: ["mother", "father", "sister", "brother", "son", "daughter", "parents"],
        grammarTopic: ["Genitive Case ('s) - ex: 'My mother's name'"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "SIMPLE PRESENT PT. 1",
        communicativeObjective: "Falar sobre rotinas e hábitos usando I, You, We, They.",
        functions: ["I wake up at 7.", "We work on Mondays.", "Do you live here?"],
        vocabulary: ["wake up", "go to work", "have breakfast", "every day", "on Mondays"],
        grammarTopic: ["Simple Present (I, You, We, They) - affirmative, negative (don't), interrogative (Do)"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "SIMPLE PRESENT PT. 2",
        communicativeObjective: "Falar sobre rotinas e hábitos usando He, She, It.",
        functions: ["He works here.", "She doesn't live in São Paulo.", "Does he like coffee?"],
        vocabulary: ["likes", "works", "studies", "goes", "watches"],
        grammarTopic: ["Simple Present (He, She, It) - 3rd person 's', negative (doesn't), interrogative (Does)"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "CAN & CAN’T",
        communicativeObjective: "Falar sobre habilidades e permissões.",
        functions: ["I can swim.", "She can't drive.", "Can you speak English?", "You can park here."],
        vocabulary: ["swim", "drive", "cook", "sing", "dance", "play the guitar"],
        grammarTopic: ["Modal Verb 'Can' para habilidade e permissão"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "OBJECT PRONOUNS",
        communicativeObjective: "Usar pronomes de objeto para substituir substantivos.",
        functions: ["She likes me.", "I call him every day.", "He gave it to us."],
        vocabulary: ["me", "you", "him", "her", "it", "us", "them"],
        grammarTopic: ["Diferença entre Subject e Object Pronouns"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "MIDTERM TEST",
        communicativeObjective: "Avaliar o conhecimento adquirido na primeira metade do curso.",
        functions: ["Avaliação"],
        vocabulary: ["Avaliação"],
        grammarTopic: ["Conteúdo das aulas 1 a 18"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "LIKES AND DISLIKES",
        communicativeObjective: "Expressar gostos e desgostos.",
        functions: ["I like to travel.", "I love eating pizza.", "She hates waking up early."],
        vocabulary: ["like", "love", "hate", "enjoy", "prefer", "+ verb-ing"],
        grammarTopic: ["Verbos de preferência + gerúndio"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "MT CORRECTION",
        communicativeObjective: "Corrigir e revisar as questões do teste de meio de período.",
        functions: ["Let's check the answers.", "Do you have any questions?"],
        vocabulary: ["test", "question", "answer", "correct", "incorrect"],
        grammarTopic: ["Revisão dos tópicos do Midterm Test"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "FREE TIME ACTIVITIES",
        communicativeObjective: "Falar sobre atividades de tempo livre e hobbies.",
        functions: ["What do you do in your free time?", "I like watching movies.", "I go to the gym."],
        vocabulary: ["watch movies", "listen to music", "go to the gym", "read books", "play sports"],
        grammarTopic: ["Adverbs of frequency (always, sometimes, never)"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "MONTHS & HOLIDAYS",
        communicativeObjective: "Falar sobre os meses do ano e feriados comuns.",
        functions: ["My birthday is in July.", "Christmas is in December."],
        vocabulary: ["January-December", "Christmas", "New Year's Eve", "Carnival"],
        grammarTopic: ["Preposição 'in' para meses"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "POSSESSIVE ADJECTIVES",
        communicativeObjective: "Falar sobre posse.",
        functions: ["This is my book.", "Her name is Ana.", "What is their address?"],
        vocabulary: ["my", "your", "his", "her", "its", "our", "their"],
        grammarTopic: ["Uso de adjetivos possessivos antes de substantivos"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "POSSESSIVE PRONOUNS",
        communicativeObjective: "Substituir substantivos para indicar posse.",
        functions: ["This book is mine.", "The blue car is hers.", "Is this pencil yours?"],
        vocabulary: ["mine", "yours", "his", "hers", "its", "ours", "theirs"],
        grammarTopic: ["Diferença entre Possessive Adjectives e Pronouns"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "FOOD & FRUITS",
        communicativeObjective: "Falar sobre comidas e frutas e fazer pedidos em um restaurante.",
        functions: ["I would like a salad.", "What do you want to drink?", "Can I have the bill, please?"],
        vocabulary: ["rice", "beans", "chicken", "salad", "apple", "banana", "orange", "water", "soda"],
        grammarTopic: ["Countable e Uncountable nouns (some/any)"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "PRESENTATION",
        communicativeObjective: "Fazer uma pequena apresentação sobre um tema familiar (ex: família, hobbies, rotina).",
        functions: ["Today, I'm going to talk about...", "First...", "Then...", "Finally..."],
        vocabulary: ["vocabulário das aulas anteriores"],
        grammarTopic: ["gramática das aulas anteriores"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "HOURS",
        communicativeObjective: "Perguntar e responder sobre as horas.",
        functions: ["What time is it?", "It's seven o'clock.", "It's half past ten.", "It's a quarter to nine."],
        vocabulary: ["o'clock", "half past", "a quarter to", "a quarter past", "a.m.", "p.m."],
        grammarTopic: ["Estruturas para dizer as horas"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "KAHOOT REVIEW",
        communicativeObjective: "Revisar de forma divertida o conteúdo da segunda metade do curso.",
        functions: ["Game-based review"],
        vocabulary: ["Revisão geral"],
        grammarTopic: ["Revisão geral"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "LISTENING TEST",
        communicativeObjective: "Avaliar a habilidade de compreensão auditiva.",
        functions: ["Avaliação"],
        vocabulary: ["Avaliação"],
        grammarTopic: ["Nenhum"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "GRAMMAR TEST",
        communicativeObjective: "Avaliar o conhecimento gramatical adquirido no curso.",
        functions: ["Avaliação"],
        vocabulary: ["Avaliação"],
        grammarTopic: ["Todo o conteúdo gramatical do nível"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "GT & LT CORRECTION",
        communicativeObjective: "Corrigir e revisar as questões dos testes de gramática e listening.",
        functions: ["Let's check the answers.", "Do you have any questions?"],
        vocabulary: ["test", "question", "answer", "score"],
        grammarTopic: ["Revisão dos tópicos avaliados"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "OT REVIEW",
        communicativeObjective: "Revisar o conteúdo e preparar os alunos para o teste oral.",
        functions: ["Let's practice for the oral test.", "Talk about your family.", "Describe your routine."],
        vocabulary: ["Revisão geral"],
        grammarTopic: ["Revisão geral"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "ORAL TEST – DAY 1",
        communicativeObjective: "Avaliar a habilidade de comunicação oral dos alunos.",
        functions: ["Avaliação"],
        vocabulary: ["Avaliação"],
        grammarTopic: ["Nenhum"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "ORAL TEST – DAY 2",
        communicativeObjective: "Avaliar a habilidade de comunicação oral dos alunos.",
        functions: ["Avaliação"],
        vocabulary: ["Avaliação"],
        grammarTopic: ["Nenhum"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    },
    {
        title: "GENERAL FEEDBACK",
        communicativeObjective: "Fornecer feedback geral sobre o desempenho no curso e discutir os próximos passos.",
        functions: ["Course review", "General feedback", "Next steps"],
        vocabulary: ["feedback", "performance", "improvement", "next level"],
        grammarTopic: ["Nenhum"],
        teacherMaterialUrl: "#", studentMaterialUrl: "#"
    }
],
        focusPoints: ["Falar sobre si mesmo", "Absorver vocabulário básico", "Absorver gramática básica", "Falar sobre horas", "Criar um contato inicial com o inglês"]
    },
    {
        name: "Starter 2",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    },
    {
        name: "Freshman 1",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    },
    {
        name: "Freshman 2",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    },
    {
        name: "Sophomore 1",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    },
    {
        name: "Junior 1",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    },
    {
        name: "Junior 2",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    },
    {
        name: "Senior 1",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    },
    {
        name: "Senior 2",
        lessons: Array.from({ length: 36 }, (_, i) => ({
            title: `LESSON ${String(i + 1).padStart(2, '0')}`,
            communicativeObjective: "A ser preenchido", functions: [], vocabulary: [], grammarTopic: [], teacherMaterialUrl: "#", studentMaterialUrl: "#"
        })),
        focusPoints: ["A ser preenchido"]
    }
];

        // Function to convert string to title case, preserving specific uppercase terms
        const toTitleCase = (str) => {
            const exceptions = ['PT.', 'MT', 'GT', 'LT', 'OT', 'AI', 'GEN Z', 'YOLO', 'FOMO', 'FOMU'];
            return str.toLowerCase().split(' ').map(word => {
                if (exceptions.includes(word.toUpperCase().replace('.', ''))) {
                    return word.toUpperCase();
                }
                return word.charAt(0).toUpperCase() + word.slice(1);
            }).join(' ');
        };

        const cefrLevels = [
            { level: "Pre-A1", slapLevels: ["Starter 1"], progressPercentage: 10 },
            { level: "A1", slapLevels: ["Starter 2"], progressPercentage: 25 },
            { level: "A1+", slapLevels: ["Freshman 1"], progressPercentage: 40 },
            { level: "A2", slapLevels: ["Freshman 2"], progressPercentage: 55 },
            { level: "A2+", slapLevels: ["Sophomore 1"], progressPercentage: 65 },
            { level: "B1+", slapLevels: ["Junior 1"] , progressPercentage: 75 },
            { level: "B2-", slapLevels: ["Junior 2"], progressPercentage: 85 },
            { level: "B2", slapLevels: ["Senior 1"], progressPercentage: 95 },
            { level: "B2+/C1", slapLevels: ["Senior 2"], progressPercentage: 100 }
        ];

        const cefrFaqs = [
            {
                question: "O que é o CEFR?",
                answer: "O CEFR (Common European Framework of Reference for Languages) é um guia internacionalmente reconhecido para descrever a proficiência em um idioma. Ele define o que um estudante é capaz de fazer em diferentes níveis de proficiência."
            },
            {
                question: "Quais certificações seguem esse padrão?",
                answer: "Diversas certificações renomadas seguem o padrão CEFR, como Cambridge English (KET, PET, FCE, CAE, CPE), IELTS, TOEFL (com equivalências) e o DELF/DALF para o francês, entre outros. O alinhamento com o CEFR garante que o nível de proficiência seja compreendido globalmente."
            },
            {
                question: "Como o CEFR beneficia o ensino de inglês?",
                answer: "O CEFR proporciona uma estrutura clara para o currículo, auxilia no planejamento das aulas com objetivos bem definidos, facilita a avaliação do progresso dos alunos e permite a comparação de níveis entre diferentes sistemas de ensino e países. Ele serve como um guia para a progressão contínua."
            },
            {
                question: "Os níveis do SLAP correspondem exatamente aos níveis CEFR?",
                answer: "Os níveis do SLAP são cuidadosamente alinhados com o CEFR para garantir uma progressão lógica e eficaz no aprendizado. No entanto, é importante notar que as faixas '+' ou '-' em alguns níveis SLAP indicam uma transição ou um aprofundamento específico dentro daquele patamar do CEFR, oferecendo uma experiência mais gradual e completa para o aluno."
            }
        ];


        const isTestOrReview = (lesson) => {
            const lessonUpper = lesson.toUpperCase();
            const specificTests = ['MIDTERM TEST', 'GRAMMAR TEST', 'ORAL TEST – DAY 1', 'ORAL TEST – DAY 2', 'LISTENING TEST'];
            return specificTests.includes(lessonUpper);
        };

        let currentChart;
        const contentArea = document.getElementById('content-area');
        const mainHeader = document.getElementById('main-header');

        // Funções de renderização principais, agora anexadas ao objeto window
        function setActiveHubButton(buttonId) {
            document.querySelectorAll('.hub-nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            const button = document.getElementById(buttonId);
            if(button) {
                button.classList.add('active');
            }
        }

        function getCategory(lesson) {
            const lessonUpper = lesson.toUpperCase();
            for (const category in categories) {
                if (categories[category].some(keyword => lessonUpper.includes(keyword))) {
                    return category;
                }
            }
            return 'Vocabulary'; /* Fallback */
        }
        
        const arrowIcon = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="mr-2 text-stone-600 group-[.active]:text-[#F1D24B]"><polyline points="9 18 15 12 9 6"></polyline></svg>`;
        
        const levelIcons = Array(10).fill(arrowIcon);
        
        function showHeader() {
             mainHeader.classList.remove('hidden');
             contentArea.classList.remove('lg:col-span-5'); // Remove class if it exists from other layouts
             contentArea.classList.remove('grid'); // Remove class if it exists from other layouts

        }
        
        function hideHeader() {
            mainHeader.classList.add('hidden');
            contentArea.classList.remove('grid', 'lg:grid-cols-5', 'gap-8');
        }

        function renderInicioSection() {
            setActiveHubButton('nav-inicio');
            hideHeader();
            
            const randomQuote = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
             const greetings = ["Bem-vindo!", "Welcome!", "Bienvenue!", "Willkommen!", "¡Bienvenido!", "ようこそ!"];

            contentArea.innerHTML = `
                <section>
                    <div class="bg-[#F1D24B] text-stone-800 p-8 rounded-xl shadow-lg mb-8 text-center">
                         <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749349751/DBB440C2-684E-4DCF-9CD3-B2DDC18F1E53_3_vgocga.jpg" onerror="this.onerror=null;this.src='https://placehold.co/96x96/e0e0e0/ffffff?text=LOGO'" alt="SLAP Logo" class="w-32 h-auto mx-auto rounded-lg mb-4">
                        <h2 class="text-4xl md:text-5xl font-bold h-16 flex items-center justify-center">
                           <span id="welcome-animation" style="transition: opacity 0.5s ease-in-out;"></span>
                        </h2>
                        <p class="mt-2 text-lg">Seu hub pedagógico para integrar, facilitar e potencializar o ensino no SLAP.</p>
                    </div>
                     <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 text-center">
                        <button onclick="window.renderTestYourEnglishSection()" class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-transform flex flex-col items-center justify-center">
                             <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="#8671D1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2z"></path><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><path d="M12 17h.01"></path></svg>
                            <span class="font-semibold text-stone-700">English Quiz</span>
                        </button>
                        <button onclick="window.renderPdiSection()" class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-transform flex flex-col items-center justify-center">
                           <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="#84C7DF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                            <span class="font-semibold text-stone-700">PDI</span>
                        </button>
                        <button onclick="window.renderLinksUteisSection()" class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-transform flex flex-col items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="#FF5C3D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
                            <span class="font-semibold text-stone-700">Links Úteis</span>
                        </button>
                        <button onclick="window.renderRegimentoInternoSection()" class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl hover:scale-105 transition-transform flex flex-col items-center justify-center">
                             <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="#F1D24B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                            <span class="font-semibold text-stone-700">Regimento Interno</span>
                        </button>
                    </div>
                     <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="bg-white text-stone-800 p-6 rounded-xl shadow-lg flex flex-col">
                            <h3 class="text-2xl font-bold text-center sm:text-left text-stone-800 mb-2">Destaque do Mês</h3>
                            <p class="text-xl font-bold text-center sm:text-left text-[#FF5C3D] mb-4">${employeeOfTheMonth.name}</p>
                             <div class="flex flex-col sm:flex-row items-center gap-6">
                                <img src="${employeeOfTheMonth.photo}" onerror="this.onerror=null;this.src='https://placehold.co/150/e0e0e0/ffffff?text=Foto'" alt="Destaque do Mês: ${employeeOfTheMonth.name}" class="w-32 h-32 rounded-full object-cover flex-shrink-0">
                                <div class="text-center sm:text-left">
                                    <p class="text-stone-600 leading-relaxed">${employeeOfTheMonth.reason}</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-stone-800 text-white p-6 rounded-xl shadow-lg flex flex-col justify-center">
                            <h3 class="text-2xl font-bold text-white mb-4 text-center">Frase do Dia</h3>
                            <div class="flex flex-col items-center gap-4">
                                <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="#F1D24B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"></path><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.75-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c.25 0 .25.25.25.5v3.5c0 .25-.25.5-.25.5H16c-1.25 0-2 .75-2 2z"></path></svg>
                                <blockquote class="text-xl italic text-stone-300 text-center">
                                    "${randomQuote.quote}"
                                </blockquote>
                                <cite class="text-stone-400 font-semibold not-italic">- ${randomQuote.author}</cite>
                            </div>
                        </div>
                    </div>
                </section>
            `;
             // Welcome animation logic
            let greetingIndex = 0;
            const welcomeElement = document.getElementById('welcome-animation');
            if (welcomeElement) {
                if (window.welcomeInterval) clearInterval(window.welcomeInterval);
                
                const updateGreeting = () => {
                    welcomeElement.style.opacity = 0;
                    setTimeout(() => {
                        greetingIndex = (greetingIndex + 1) % greetings.length;
                        welcomeElement.textContent = greetings[greetingIndex];
                        welcomeElement.style.opacity = 1;
                    }, 500);
                };
                
                welcomeElement.textContent = greetings[0];
                welcomeElement.style.opacity = 1;

                window.welcomeInterval = setInterval(updateGreeting, 2500);
            }
        }

        function renderSlapLevelsSection() {
            setActiveHubButton('nav-slap-levels');
            showHeader();
            document.getElementById('main-title').textContent = 'Níveis e CPs';
            document.getElementById('main-description').textContent = 'Explore a estrutura completa do nosso currículo, com detalhes de cada nível e a distribuição das aulas. Use a navegação lateral para visualizar o conteúdo de cada etapa.';
            
            contentArea.innerHTML = `
                <section class="flex flex-col md:flex-row gap-8">
                    <div id="level-sub-navigation" class="md:w-1/4 bg-white p-4 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="text-lg font-semibold text-stone-800 mb-4">Níveis SLAP</h3>
                        <nav class="space-y-2">
                        </nav>
                    </div>
                    <div class="md:w-3/4 flex-1 grid grid-cols-1 lg:grid-cols-5 gap-8">
                        <section id="focus-section" class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-stone-200 flex flex-col justify-center">
                            <h3 class="text-lg font-semibold text-center mb-4 text-stone-800">Objetivos do Nível</h3>
                            <div id="focus-points-grid" class="grid grid-cols-1 gap-3">
                                <!-- Focus points will be rendered here -->
                            </div>
                        </section>
                        <section id="lessons-section" class="lg:col-span-3 bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                            <h3 id="lessons-title" class="text-lg font-semibold mb-4 text-stone-800">CP do Nível:</h3>
                            <div id="lessons-grid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 overflow-y-auto max-h-[85vh] pr-2">
                            </div>
                        </section>
                    </div>
                </section>
            `;
            
            const levelNavContainer = document.querySelector('#level-sub-navigation nav');
            levelNavContainer.innerHTML = courseData.map((level, index) => `
                <button data-index="${index}" class="nav-button w-full text-left px-4 py-2 rounded-lg text-stone-700 hover:bg-yellow-50 hover:text-[#F1D24B] transition-colors flex items-center">
                    ${levelIcons[index]}
                    ${level.name}
                </button>
            `).join('');

            document.querySelectorAll('#level-sub-navigation .nav-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = e.currentTarget.dataset.index;
                    renderLevel(index);
                });
            });
            renderLevel(0); /* Carrega Starter 1 por padrão quando Níveis SLAP é selecionado */
        }

       function renderLevel(index) {
            const level = courseData[index];
            
            document.getElementById('lessons-title').textContent = `CP do Nível: ${level.name}`;
            
            const lessonsGrid = document.getElementById('lessons-grid');
            lessonsGrid.innerHTML = level.lessons.map((lesson, i) => {
                // Agora acessamos lesson.title, pois 'lesson' é um objeto
                const isTest = isTestOrReview(lesson.title);
                const bgColorClass = isTest ? 'bg-[#F1D24B]' : 'bg-stone-100';
                const textColorClass = isTest ? 'text-stone-800' : 'text-stone-700';
                const numberColorClass = isTest ? 'text-stone-800' : 'text-[#F1D24B]';

                // A div foi trocada por um botão com onclick
                return `
                    <button onclick="window.renderLessonDetail(${index}, ${i})" class="w-full text-left ${bgColorClass} p-3 rounded-lg flex flex-col items-start shadow-sm hover:transform hover:-translate-y-1 transition-transform duration-200">
                        <span class="text-sm font-bold ${numberColorClass} mb-1">${String(i + 1).padStart(2, '0')}</span>
                        <span class="text-sm ${textColorClass} w-full">${toTitleCase(lesson.title)}</span>
                    </button>
                `;
            }).join('');

            document.querySelectorAll('#level-sub-navigation .nav-button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.index === String(index)) { // Comparação corrigida para string
                    btn.classList.add('active');
                }
            });

            renderFocusPoints(level);
        }
        function renderFocusPoints(level) {
            const focusPointsGrid = document.getElementById('focus-points-grid');
            focusPointsGrid.innerHTML = level.focusPoints.map((point) => {
                return `
                    <div class="focus-point-card">
                        ${point}
                    </div>
                `;
            }).join('');
        }

        function renderLessonDetail(courseIndex, lessonIndex) {
    hideHeader();

    const level = courseData[courseIndex];
    const lesson = level.lessons[lessonIndex];

    if (!lesson || typeof lesson !== 'object') {
        contentArea.innerHTML = '<p>Erro: Dados da aula não encontrados ou em formato incorreto.</p>';
        return;
    }

    const createTagsHtml = (items) => {
        if (!items || items.length === 0) return '<p class="text-sm text-stone-500">N/A</p>';
        return items.map(item => `<span class="tag">${item}</span>`).join('');
    };

    contentArea.innerHTML = `
        <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 max-w-4xl mx-auto">
            <button onclick="window.renderSlapLevelsSection()" class="mb-6 inline-flex items-center text-stone-600 hover:text-[#F1D24B] transition-colors font-semibold">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1"><polyline points="15 18 9 12 15 6"></polyline></svg>
                Voltar para a lista de aulas
            </button>

            <div class="text-center border-b border-stone-200 pb-6 mb-6">
                <h2 class="text-3xl font-bold text-[#F1D24B]">${toTitleCase(lesson.title)}</h2>
                <p class="text-xl text-stone-700 font-medium">${level.name}</p>
            </div>

            <div class="space-y-6">
                <div class="info-item bg-stone-50 p-4 rounded-lg">
                    <strong>Objetivo Comunicativo:</strong>
                    <p class="text-stone-700 mt-1">${lesson.communicativeObjective || 'Não especificado.'}</p>
                </div>
                
                <div class="info-item bg-stone-50 p-4 rounded-lg">
                    <strong>Funções / Chunks:</strong>
                    <div class="flex flex-wrap pt-2 gap-2">
                        ${createTagsHtml(lesson.functions)}
                    </div>
                </div>
                
                <div class="info-item bg-stone-50 p-4 rounded-lg">
                    <strong>Vocabulário Principal:</strong>
                    <div class="flex flex-wrap pt-2 gap-2">
                        ${createTagsHtml(lesson.vocabulary)}
                    </div>
                </div>

                <div class="info-item bg-stone-50 p-4 rounded-lg">
                    <strong>Tópico Gramatical:</strong>
                    <div class="flex flex-wrap pt-2 gap-2">
                        ${createTagsHtml(lesson.grammarTopic)}
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-stone-200 flex flex-col sm:flex-row gap-4 justify-center">
                <a href="${lesson.teacherMaterialUrl}" target="_blank" class="navigation-button-game text-center">
                    📥 Faça o download da aula aqui
                </a>
                <a href="${lesson.studentMaterialUrl}" target="_blank" class="navigation-button-game text-center">
                    📥 Faça o download do material do aluno aqui
                </a>
            </div>
        </section>
    `;
}

        function renderCefrSection() {
            setActiveHubButton('nav-cefr');
             showHeader();
            document.getElementById('main-title').textContent = 'CEFR: Alinhamento de Proficiência SLAP';
            document.getElementById('main-description').textContent = 'Compreenda a proficiência de cada nível do SLAP no Quadro Comum Europeu de Referência para Línguas (CEFR), um guia global para o aprendizado de idiomas.';
            
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-semibold mb-4 text-stone-800">Níveis CEFR e SLAP</h3>
                    <div class="space-y-4 mb-8">
                        ${cefrLevels.map(cefr => `
                            <div class="flex flex-col sm:flex-row items-start sm:items-center">
                                <p class="cefr-label sm:w-24 text-stone-800 mb-1 sm:mb-0">${cefr.level}</p>
                                <div class="flex-1 w-full sm:ml-4 bg-gray-200 rounded-full h-6 relative overflow-hidden">
                                    <div class="slap-level-indicator bg-[#F1D24B] h-full absolute top-0 left-0 flex items-center justify-center rounded-full" style="width: ${cefr.progressPercentage}%;">
                                        <span class="z-10 text-stone-800 font-medium whitespace-nowrap px-2">${cefr.slapLevels.join(', ')}</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <h3 class="text-lg font-semibold mb-4 text-stone-800">Perguntas Frequentes sobre CEFR</h3>
                    <div class="space-y-3">
                        ${cefrFaqs.map((faq, index) => `
                            <div class="faq-item">
                                <div class="faq-question">
                                    <span>${faq.question}</span>
                                    <svg class="faq-arrow w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                                </div>
                                <div class="faq-answer">
                                    <p class="py-2">${faq.answer}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <p class="mt-6 text-sm text-stone-600">
                        Esta representação visual demonstra a progressão do aprendizado de acordo com o CEFR, mostrando como cada nível do SLAP contribui para o desenvolvimento da proficiência.
                    </p>
                </section>
            `;
            
            if (currentChart) {
                currentChart.destroy();
            }
            document.querySelectorAll('.faq-question').forEach(button => {
                button.addEventListener('click', toggleFaq);
            });
        }

        function toggleFaq(event) {
            const faqItem = event.currentTarget.closest('.faq-item');
            if (!faqItem) return;

            const answer = faqItem.querySelector('.faq-answer');
            const arrow = faqItem.querySelector('.faq-arrow');
            
            const isOpening = !answer.classList.contains('open');

            // Close all other open FAQs before opening the new one
            document.querySelectorAll('.faq-answer.open').forEach(openAnswer => {
                if (openAnswer !== answer) {
                    openAnswer.classList.remove('open');
                    const otherArrow = openAnswer.parentElement.querySelector('.faq-arrow');
                    if (otherArrow) otherArrow.classList.remove('rotate');
                }
            });

            if (isOpening) {
                answer.classList.add('open');
                if (arrow) arrow.classList.add('rotate');
            } else {
                answer.classList.remove('open');
                if (arrow) arrow.classList.remove('rotate');
            }
        }

        // --- GLOBAL CONTENT DEFINITIONS ---
        const goodPracticesRules = [
            { title: "Postar constantemente", description: "Mantenha uma frequência de postagens para construir e engajar sua audiência, criando um senso de expectativa." },
            { title: "Compartilhar dicas e conteúdos úteis", description: "Ofereça valor real aos seus seguidores com dicas práticas de inglês, curiosidades culturais e insights sobre o aprendizado." },
            { title: "Interagir com seguidores nos comentários", description: "Responda a perguntas, crie conversas e mostre que valoriza a participação da sua comunidade." },
            { title: "Utilizar hashtags estratégicas", description: "Pesquise e use hashtags relevantes e populares para aumentar a visibilidade do seu conteúdo e alcançar novos públicos." },
            { title: "Adaptar o conteúdo para cada rede", description: "Entenda as particularidades de cada plataforma (Instagram, TikTok, etc.) e crie formatos que se encaixem melhor no comportamento dos usuários de cada uma." },
            { title: "Fazer collabs com criadores do mesmo nicho", description: "Colabore com outros creators de inglês para expandir seu alcance e apresentar novos pontos de vista ao público." },
            { title: "Compartilhar bastidores e rotina real", description: "Mostre o lado humano e autêntico da sua rotina como professor e creator, gerando conexão e identificação." },
            { title: "Criar enquetes e abrir caixinhas de pergunta", description: "Utilize os recursos interativos das redes sociais para coletar opiniões, tirar dúvidas e aumentar o engajamento direto." },
            { title: "Mostrar transformação dos alunos", description: "Compartilhe cases de sucesso e o progresso dos alunos (com consentimento) para inspirar e demonstrar a eficácia do método do SLAP." },
            { title: "Usar CTAs claros", description: "Direcione seus seguidores com chamadas para ação (CTAs) claras e objetivas, como 'Visite nosso site', 'Agende sua aula experimental' ou 'Deixe seu comentário'." },
            { title: "Divulgar as turmas abertas com antecedência", description: "Mantenha seu público informado sobre novas turmas e cursos, criando expectativa e permitindo que se organizem para a matrícula." },
            { title: "Reaproveitar conteúdos bons em novos formatos", description: "Transforme vídeos longos em pequenos cortes, artigos em threads, ou lives em posts de carrossel. Maximize o alcance do seu material." },
            { title: "Participar de trends de forma autêntica", description: "Engaje-se nas trends do momento, mas adapte-as à sua persona e aos valores do SLAP para que pareçam naturais e criativas." },
            { title: "Usar legendas acessíveis", description: "Sempre adicione legendas aos seus vídeos. Isso aumenta o alcance, a compreensão (especialmente para não-nativos) e a acessibilidade do conteúdo." },
            { title: "Medir resultados", description: "Acompanhe as métricas de engajamento, visualizações e crescimento para entender o que funciona melhor e otimizar sua estratégia de conteúdo." }
        ];

        const prohibitedContentRules = [
            { title: "Falar sobre política, religião ou temas polêmicos", description: "Mantenha o foco no ensino de inglês e em temas neutros para evitar alienar ou ofender parte do público." },
            { title: "Criticar outras escolas ou professores", description: "Concentre-se em destacar os pontos fortes do SLAP, sem depreciar a concorrência. A ética profissional é fundamental." },
            { title: "Utilizar uma linguagem que não represente a escola", description: "Evite gírias excessivas, palavrões ou um tom de voz que não esteja alinhado com a imagem profissional e amigável do SLAP." },
            { title: "Postar conteúdo com erros de inglês", description: "Revise todo o conteúdo cuidadosamente antes de postar. Erros podem minar a credibilidade do SLAP como autoridade no ensino do idioma." },
            { title: "Expor negativamente alunos ou colegas", description: "Nunca compartilhe informações, imagens ou situações que possam constranger ou expor alunos e membros da equipe. A privacidade é prioridade." },
            { title: "Ignorar plágio", description: "Sempre dê crédito a fontes externas e nunca utilize material de outros criadores sem a devida permissão. Crie conteúdo original." },
            { title: "Prometer resultados milagrosos ou irreais", description: "Seja honesto sobre o processo de aprendizado. Evite promessas como 'fique fluente em 3 meses' que geram expectativas falsas." },
            { title: "Fazer SPAM nos comentários ou DMs", description: "Não envie mensagens em massa não solicitadas para promover a escola. A interação deve ser orgânica e baseada em interesse genuíno." },
            { title: "Discutir informações internas ou confidenciais", description: "Assuntos relacionados a salários, problemas internos ou dados de alunos não devem ser mencionados publicamente." },
            { title: "Usar imagens sem direito de uso", description: "Utilize bancos de imagens gratuitos ou pagos e sempre verifique as licenças para evitar problemas legais de direitos autorais." }
        ];

        function renderGoodPracticesContent() {
            setActiveHubButton('nav-creators-room');
            showHeader();
            document.getElementById('main-title').textContent = 'Creators Room: Boas Práticas para Redes Sociais';
            document.getElementById('main-description').textContent = 'Dicas essenciais para criar conteúdo engajador e alinhado com a marca SLAP no Instagram e TikTok.';
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <div class="creators-tab-container">
                        <button class="creators-tab active" onclick="window.renderGoodPracticesContent()">Boas Práticas</button>
                        <button class="creators-tab" onclick="window.renderGlossaryContent()">Glossário de Termos</button>
                        <button class="creators-tab" onclick="window.renderContentFunnel()">Funil de Conteúdo</button>
                        <button class="creators-tab" onclick="window.renderProhibitedContent()">O Que NÃO Fazer</button>
                    </div>
                    <h3 class="text-lg font-semibold mb-4 text-stone-800">Diretrizes de Boas Práticas</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${goodPracticesRules.map((rule, index) => `
                            <div class="good-practice-card">
                                <svg class="icon-check" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                                <h4 class="text-base font-semibold mb-1 pl-8">
                                    ${index + 1}. ${rule.title}
                                </h4>
                                <p class="text-sm">
                                    ${rule.description}
                                </p>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
        }

        const glossaryTerms = [
            { term: "CTA (Call to Action)", explanation: "Uma frase ou botão que indica ao usuário a próxima ação desejada, como 'Saiba Mais', 'Inscreva-se', 'Compre Agora'." },
            { term: "Gancho", explanation: "O elemento inicial de um conteúdo que captura a atenção do público nos primeiros segundos, incentivando-o a continuar assistindo ou lendo." },
            { term: "Storytelling", explanation: "A arte de contar histórias para transmitir uma mensagem, criar conexão emocional e tornar o conteúdo mais memorável e envolvente." },
            { term: "Alcance", explanation: "O número total de pessoas únicas que visualizaram seu conteúdo ou que foram expostas à sua publicação em uma plataforma." },
            { term: "Engajamento", explanation: "A métrica que mede a interação do público com o seu conteúdo, incluindo curtidas, comentários, compartilhamentos, salvamentos e cliques." },
            { term: "Reaproveitamento de Conteúdo", explanation: "A prática de transformar um conteúdo existente em diferentes formatos ou plataformas para maximizar seu alcance e valor (ex: transformar uma live em vários posts curtos)." },
            { term: "Roteiro", explanation: "O planejamento detalhado de um vídeo ou áudio, incluindo falas, ações, transições e elementos visuais, para guiar a produção do conteúdo." },
            { term: "Copy", explanation: "Texto persuasivo usado em marketing e publicidade para convencer o público a realizar uma ação específica, como clicar em um link ou comprar um produto." },
            { term: "Trend", explanation: "Tendências populares em plataformas como TikTok e Instagram, geralmente envolvendo músicas, desafios ou formatos de vídeo específicos que viralizam." },
            { term: "Conteúdo Perpétuo", explanation: "Conteúdo que permanece relevante e útil ao longo do tempo, sem se tornar obsoleto rapidamente (ex: '5 Dicas de Pronúncia')." },
            { term: "Prova Social", explanation: "Evidências de que outras pessoas aprovaram ou se beneficiaram do seu produto/serviço, como depoimentos de alunos, número de seguidores ou avaliações positivas." },
            { term: "Tom de Voz", explanation: "A personalidade e o estilo de comunicação de uma marca ou criador, que se reflete na escolha de palavras, entonação e forma de se expressar." },
            { term: "Autoridade", explanation: "A percepção de que você é um especialista ou uma fonte confiável em determinado assunto, construída através da entrega consistente de conteúdo de valor e conhecimento." },
            { term: "Humanização", explanation: "A estratégia de mostrar o lado humano da marca ou do criador, compartilhando bastidores, experiências pessoais e vulnerabilidades para gerar conexão com o público." },
            { term: "Objeção", explanation: "Dúvidas, medos ou preocupações que o público pode ter antes de tomar uma decisão (ex: 'Inglês é muito difícil', 'Não tenho tempo'). O conteúdo pode ser usado para quebrá-las." },
            { term: "Jornada do Aluno", explanation: "As diferentes etapas pelas quais um aluno passa, desde o primeiro contato com a escola até a matrícula e a conclusão do curso, influenciada por diversos pontos de contato e conteúdos." },
            { term: "Posicionamento", explanation: "Como a marca ou criador deseja ser percebido pelo público, destacando seus diferenciais e valores no mercado." },
            { term: "Conteúdo de Engajamento", explanation: "Conteúdo cujo principal objetivo é gerar interação com a audiência, como perguntas, enquetes, desafios ou 'complete a frase'." },
            { term: "Conteúdo de Valor", explanation: "Conteúdo que oferece informações úteis, soluções para problemas, entretenimento ou inspiração para o público, sem necessariamente ser uma venda direta." },
            { term: "Conteúdo Institucional", explanation: "Conteúdo focado em apresentar a escola, seus valores, estrutura, equipe, diferenciais e o que ela oferece aos alunos." }
        ];

        function renderGlossaryContent() {
            setActiveHubButton('nav-creators-room');
             showHeader();
            document.getElementById('main-title').textContent = 'Creators Room: Glossário de Termos';
            document.getElementById('main-description').textContent = 'Entenda os termos mais comuns no universo de conteúdo e marketing digital, explicados de forma simples e prática.';
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <div class="creators-tab-container">
                        <button class="creators-tab" onclick="window.renderGoodPracticesContent()">Boas Práticas</button>
                        <button class="creators-tab active" onclick="window.renderGlossaryContent()">Glossário de Termos</button>
                        <button class="creators-tab" onclick="window.renderContentFunnel()">Funil de Conteúdo</button>
                        <button class="creators-tab" onclick="window.renderProhibitedContent()">O Que NÃO Fazer</button>
                    </div>
                    <h3 class="text-lg font-semibold mb-4 text-stone-800">Termos Essenciais</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${glossaryTerms.map(term => `
                            <div class="bg-stone-100 p-4 rounded-lg shadow-sm">
                                <h4 class="font-semibold text-stone-800">${term.term}</h4>
                                <p class="text-sm text-stone-600 mt-1">${term.explanation}</p>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
        }

        function renderContentFunnel() {
            setActiveHubButton('nav-creators-room');
            showHeader();
            document.getElementById('main-title').textContent = 'Creators Room: Funil de Conteúdo';
            document.getElementById('main-description').textContent = 'Compreenda como construir conteúdos estratégicos para cada etapa da jornada do seu público, do reconhecimento à conversão.';
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <div class="creators-tab-container">
                        <button class="creators-tab" onclick="window.renderGoodPracticesContent()">Boas Práticas</button>
                        <button class="creators-tab" onclick="window.renderGlossaryContent()">Glossário de Termos</button>
                        <button class="creators-tab active" onclick="window.renderContentFunnel()">Funil de Conteúdo</button>
                        <button class="creators-tab" onclick="window.renderProhibitedContent()">O Que NÃO Fazer</button>
                    </div>
                    <h3 class="text-lg font-semibold mb-4 text-stone-800 text-center">A Estratégia da Pirâmide</h3>
                    <div class="flex flex-col items-center space-y-4">
                        <div class="funnel-stage funnel-top w-full md:w-3/4 lg:w-2/3 xl:w-1/2 relative">
                             <div class="funnel-stage-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="8.5" cy="7" r="4"/><path d="M20 8v6"/><path d="M23 11h-6"/></svg></div>
                            <h4 class="text-xl font-bold mb-2">Topo de Funil</h4>
                            <p class="text-sm mb-1">Objetivo: Atrair atenção e alcançar novas pessoas.</p>
                            <p class="text-sm"><strong>Conteúdos:</strong> Dicas rápidas, curiosidades, memes, enquetes, vídeos de humor.</p>
                        </div>
                        <div class="funnel-stage funnel-middle w-full md:w-3/4 lg:w-2/3 xl:w-1/2 relative">
                            <div class="funnel-stage-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></div>
                            <h4 class="text-xl font-bold mb-2">Meio de Funil</h4>
                            <p class="text-sm mb-1">Objetivo: Criar conexão e gerar desejo.</p>
                            <p class="text-sm"><strong>Conteúdos:</strong> Bastidores, depoimentos, caixas de perguntas, explicações do método.</p>
                        </div>
                        <div class="funnel-stage funnel-bottom w-full md:w-3/4 lg:w-2/3 xl:w-1/2">
                           <div class="funnel-stage-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg></div>
                            <h4 class="text-xl font-bold mb-2">Fundo de Funil</h4>
                            <p class="text-sm mb-1">Objetivo: Converter em matrículas.</p>
                            <p class="text-sm"><strong>Conteúdos:</strong> Ofertas, abertura de turmas, CTAs diretos, prints de conversas.</p>
                        </div>
                    </div>
                    <p class="mt-6 text-sm text-stone-600 text-center">
                        Entender o funil de conteúdo ajuda a criar materiais que guiam o público desde o primeiro contato até a matrícula, de forma estratégica.
                    </p>
                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
        }
        
        function renderProhibitedContent() {
            setActiveHubButton('nav-creators-room');
             showHeader();
            document.getElementById('main-title').textContent = 'Creators Room: O Que NÃO Fazer';
            document.getElementById('main-description').textContent = 'Diretrizes claras sobre conteúdos e práticas a serem evitadas para manter a integridade, o profissionalismo e a imagem do SLAP.';
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <div class="creators-tab-container">
                        <button class="creators-tab" onclick="window.renderGoodPracticesContent()">Boas Práticas</button>
                        <button class="creators-tab" onclick="window.renderGlossaryContent()">Glossário de Termos</button>
                        <button class="creators-tab" onclick="window.renderContentFunnel()">Funil de Conteúdo</button>
                        <button class="creators-tab" onclick="window.renderProhibitedContent()">O Que NÃO Fazer</button>
                    </div>
                    <h3 class="text-lg font-semibold mb-4 text-stone-800">Conteúdos e Práticas a Serem Evitadas</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${prohibitedContentRules.map((rule, index) => `
                            <div class="prohibited-rule-card">
                                <svg class="icon-x" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                <h4 class="text-base font-semibold mb-1 pr-8">
                                    ${index + 1}. ${rule.title}
                                </h4>
                                <p class="text-sm">
                                    ${rule.description}
                                </p>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
        }


        function renderCreatorsRoom() {
            setActiveHubButton('nav-creators-room');
            showHeader();
            window.renderGoodPracticesContent(); // Default to Good Practices when Creators Room is opened
        }

        function renderMethodSection() {
            setActiveHubButton('nav-method');
            showHeader();
            document.getElementById('main-title').textContent = 'Método SLAP: Guia de Ensino Dinâmico';
            document.getElementById('main-description').textContent = 'Nosso método é um guia para planejar aulas de inglês engajadoras, progressivas e com foco na prática ativa. Ele é dividido em quatro fases: SPARK, LEARN, APPLY e PERFORM.';
            
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                       <div class="method-phase-card method-phase-spark p-6">
                            <h3 class="text-xl font-bold mb-4">SPARK</h3>
                            <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749349726/SPARK_oohlnr.png" onerror="this.onerror=null;this.src='https://placehold.co/128x128/e0e0e0/ffffff?text=SPARK'" alt="Imagem SPARK" class="w-full h-40 object-contain mx-auto rounded-lg mb-4">
                            <p>Essa fase serve para ativar o interesse e a curiosidade dos alunos. É um momento de quebra de gelo, onde o professor apresenta uma imagem, vídeo, pergunta ou situação que desperte atenção e provoque uma reação emocional ou cognitiva. O objetivo aqui não é ensinar, mas preparar o terreno para o aprendizado, deixando os alunos mais engajados e curiosos sobre o que virá.</p>
                        </div>
                        <div class="method-phase-card method-phase-learn p-6">
                            <h3 class="text-xl font-bold mb-4">LEARN</h3>
                            <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749350100/LEARN_vwakoa.png" onerror="this.onerror=null;this.src='https://placehold.co/128x128/e0e0e0/ffffff?text=LEARN'" alt="Imagem LEARN" class="w-full h-40 object-contain mx-auto rounded-lg mb-4">
                            <p>Essa é a fase de ensino direto do conteúdo, com explicações claras, visualmente organizadas e, quando possível, com apoio de exemplos e repetições guiadas. O foco aqui é clareza, simplicidade e progressão lógica. Tudo que é novo é apresentado nessa fase, respeitando o nível de proficiência do aluno. Pode incluir explicações visuais, exercícios simples, etc.</p>
                        </div>
                         <div class="method-phase-card method-phase-apply p-6">
                            <h3 class="text-xl font-bold mb-4">APPLY</h3>
                            <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749350106/APPLY_kivovl.png" onerror="this.onerror=null;this.src='https://placehold.co/128x128/e0e0e0/ffffff?text=APPLY'" alt="Imagem APPLY" class="w-full h-40 object-contain mx-auto rounded-lg mb-4">
                            <p>Aqui os alunos aplicam o que aprenderam de maneira mais ativa. É uma fase de prática mais autônoma, mas ainda com suporte. As atividades são pensadas para gerar produção, percepção, interação ou reconhecimento do conteúdo, com uma ligação mais direta com a vida real ou com o uso comunicativo da língua. Pode envolver jogos, desafios, atividades em dupla, listening, leitura, prática controlada, etc.</p>
                        </div>
                        <div class="method-phase-card method-phase-perform p-6">
                            <h3 class="text-xl font-bold mb-4">PERFORM</h3>
                            <img src="https://res.cloudinary.com/dqfi22uz0/image/upload/v1749350100/PERFORM_m2x6cw.png" onerror="this.onerror=null;this.src='https://placehold.co/128x128/e0e0e0/ffffff?text=PERFORM'" alt="Imagem PERFORM" class="w-full h-40 object-contain mx-auto rounded-lg mb-4">
                            <p>É a fase final, de consolidação e performance espontânea. Aqui o aluno precisa usar o que aprendeu de forma mais livre, sem depender tanto do apoio do professor. Pode ser uma mini apresentação, uma conversa real, um jogo criativo ou uma simulação. O objetivo é que o aluno demonstre domínio do conteúdo e coloque em prática em um contexto mais natural e autêntico.</p>
                        </div>
                    </div>
                     <h3 class="text-lg font-semibold mt-8 mb-4 text-stone-800">Exemplos de Atividades por Fase</h3>
                    <div class="space-y-3">
                        <div class="faq-item bg-stone-100">
                            <div class="faq-question"><span class="flex items-center"><span class="w-3 h-3 rounded-full bg-[#F1D24B] mr-3"></span>Spark</span><svg class="faq-arrow w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                            <div class="faq-answer bg-stone-100"><ul class="list-disc list-inside"><li>Atividades com séries e músicas</li><li>Quebra-gelos</li><li>Warm-ups</li><li>Lead-ins leves para introdução de tema</li></ul></div>
                        </div>
                         <div class="faq-item bg-stone-100">
                            <div class="faq-question"><span class="flex items-center"><span class="w-3 h-3 rounded-full bg-[#84C7DF] mr-3"></span>Learn</span><svg class="faq-arrow w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                            <div class="faq-answer bg-stone-100"><ul class="list-disc list-inside"><li>Apresentação de frases e vocabulário</li><li>Comparação de estruturas</li><li>Atividades explicativas</li></ul></div>
                        </div>
                        <div class="faq-item bg-stone-100">
                            <div class="faq-question"><span class="flex items-center"><span class="w-3 h-3 rounded-full bg-[#8671D1] mr-3"></span>Apply</span><svg class="faq-arrow w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                            <div class="faq-answer bg-stone-100"><ul class="list-disc list-inside"><li>Fill the gaps</li><li>Unscrambling</li><li>Perguntas dirigidas com base no conteúdo aprendido</li></ul></div>
                        </div>
                        <div class="faq-item bg-stone-100">
                            <div class="faq-question"><span class="flex items-center"><span class="w-3 h-3 rounded-full bg-[#FF5C3D] mr-3"></span>Perform</span><svg class="faq-arrow w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div>
                            <div class="faq-answer bg-stone-100"><ul class="list-disc list-inside"><li>Perguntas abertas</li><li>Debates</li><li>Roleplays e simulações</li></ul></div>
                        </div>
                    </div>
                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
             document.querySelectorAll('.faq-question').forEach(button => {
                button.addEventListener('click', toggleFaq);
            });
        };
        
        const certifications = [
            { name: "TKT", description: "Teaching Knowledge Test", bonus: "R$30/mês" },
            { name: "Graduação em Letras Inglês", description: "Bacharelado ou Licenciatura", bonus: "R$60/mês" },
            { name: "Graduação em Tradução", description: "Bacharelado ou Tecnólogo", bonus: "R$60/mês" },
            { name: "FCE", description: "B2 First", bonus: "R$60/mês" },
            { name: "TOEFL", description: "Test of English as a Foreign Language", bonus: "R$70/mês (validade de 2 anos)" },
            { name: "TESOL", description: "Teaching English to Speakers of Other Languages", bonus: "R$80/mês" },
            { name: "TEFL", description: "Teaching English as a Foreign Language", bonus: "R$80/mês" },
            { name: "CAE", description: "C1 Advanced", bonus: "R$90/mês" },
            { name: "CELTA", description: "Certificate in Teaching English to Speakers of Other Languages", bonus: "R$100/mês" },
            { name: "CPE", description: "C2 Proficiency", bonus: "R$120/mês" },
            { name: "DELTA", description: "Diploma in Teaching English to Speakers of Other Languages", bonus: "R$150/mês por módulo" },
            { name: "Mestrado", description: "Em áreas correlatas", bonus: "R$150/mês" },
            { name: "Doutorado", description: "Em áreas correlatas", bonus: "R$200/mês" }
        ];

        const commemorativeBonuses = [
            { name: "Dia da Mulher", description: "Apenas colaboradoras mulheres recebem a bonificação." },
            { name: "Páscoa", description: "Todos os colaboradores recebem uma bonificação." },
            { name: "Dia do Trabalhador", description: "Todos os colaboradores recebem uma bonificação." },
            { name: "Dia das Mães", description: "Apenas colaboradoras mães recebem a bonificação." },
            { name: "Dia dos Pais", description: "Apenas colaboradores pais recebem a bonificação." },
            { name: "Dia do Professor", description: "Todos os professores recebem uma bonificação." },
            { name: "Day Off no Aniversário", description: "Verificar disponibilidade com a coordenação pedagógica." },
            { name: "Bônus de Aniversário", description: "Todos os colaboradores recebem um bônus." },
            { name: "Bônus de Natal", description: "Todos os colaboradores recebem uma bonificação." },
        ];
        
        const crisisKits = [
          {
            title: "Meu aluno fala muito pouco na aula. E agora?",
            description: "Estratégias para incentivar a participação e criar um ambiente seguro para alunos mais quietos.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749349699/deep_dive_-_alunos_quietos_cp50tu.mp3"
          },
          {
            title: "Meu aluno falta muito. Como lidar com isso?",
            description: "Orientações sobre como abordar a ausência, reconectar com o aluno e entender as causas.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749349699/deep_dive_-_aluno_que_falta_muito_otdojp.mp3"
          },
           {
            title: "Meu aluno está desnivelado da turma. O que faço?",
            description: "Dicas para adaptar atividades e garantir que todos os alunos, independentemente do nível, se sintam incluídos.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749349699/deep_dive_-_aluno_desnivelado_nhh80r.mp3"
          },
          {
            title: "Como sei se estou dando uma aula boa?",
            description: "Uma reflexão sobre indicadores de uma aula de sucesso, indo além da participação visível.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749349699/deep_dive_-_como_sei_se_dei_uma_aula_boa_anea8n.mp3"
          },
          {
            title: "Meu aluno fala muito. O que fazer?",
            description: "Técnicas para gerenciar a participação excessiva e garantir o equilíbrio na aula.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749364414/deep_dive_-_aluno_fala_muito_hxjxnq.mp3"
          },
          {
            title: "Tenho uma turma muito cheia. Como lidar?",
            description: "Estratégias para gerenciar grandes turmas sem excluir ninguém e mantendo a qualidade.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749362130/deep_dive_-_salas_mt_cheias_dfodog.mp3"
          },
          {
            title: "Como dar feedback aos alunos adequadamente?",
            description: "Um guia para fornecer feedback construtivo, motivador e alinhado com o método SLAP.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749362130/deep_dive_-_como_dar_feedback_hdwgn0.mp3"
          },
           {
            title: "Como posso fazer uma boa revisão antes das provas?",
            description: "Métodos eficazes para revisar o conteúdo de forma dinâmica e que realmente prepare os alunos.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749362130/deep_dive_-_como_dar_uma_revisa%CC%83o_de_provas_eficaz_p9lmsf.mp3"
          },
          {
            title: "Sou professor e me sinto inseguro. O que faço?",
            description: "Uma conversa sobre a síndrome do impostor e como lidar com a insegurança na sala de aula.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749349699/deep_dive_-_professor_inseguro_m8t8cy.mp3"
          },
          {
            title: "Meu aluno entende, mas não consegue falar. O que fazer?",
            description: "Dicas para destravar a fala e transformar o conhecimento passivo do aluno em habilidade ativa.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749355159/deep_dive_-_meu_aluno_entende_mas_nao_consegue_falar_pk99e6.mp3"
          },
          {
            title: "Meu aluno traz temas polêmicos para a aula. Como lidar?",
            description: "Como mediar discussões delicadas, manter o foco da aula e garantir um ambiente respeitoso.",
            audioSrc: "https://res.cloudinary.com/dqfi22uz0/video/upload/v1749355160/deep_dive_-_meu_aluno_traz_temas_pole%CC%82micos_hzofht.mp3"
          }
        ];
        
        const usefulLinks = {
            "Verbo To Be": [
                { title: "Aula 1: Verbo To Be - Explicação Completa (YouTube)", url: "https://www.youtube.com/watch?v=3R-IH-V7lwQ" },
                { title: "Aula 2: Verbo To Be - Gramática e Exemplos (YouTube)", url: "https://www.youtube.com/watch?v=vX1TCxH_NZs" },
                { title: "Exercício 1: Pratique o Verbo To Be (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=8406" },
                { title: "Exercício 2: Verbo To Be - Preencha os Espaços (British Council)", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/verb-be" },
                { title: "Exercício 3: Teste Interativo - Verbo To Be (Perfect English Grammar)", url: "https://www.perfect-english-grammar.com/verb-to-be-exercise-1.html" }
            ],
            "Simple Present": [
                { title: "Aula 1: Simple Present Tense - Aula Explicativa (YouTube)", url: "https://www.youtube.com/watch?v=7dq0YJS_56c" },
                { title: "Aula 2: Simple Present com Exercícios (YouTube)", url: "https://www.youtube.com/watch?v=ACDlqL7HpWI" },
                { title: "Exercício 1: Simple Present - Pratique Aqui (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=11340" },
                { title: "Exercício 2: British Council - Simple Present Practice", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/present-simple" },
                { title: "Exercício 3: Perfect English Grammar - Simple Present Quiz", url: "https://www.perfect-english-grammar.com/simple-present-exercise-1.html" }
            ],
            "Simple Past": [
                 { title: "Aula 1: Simple Past Tense - Explicação (YouTube)", url: "https://www.youtube.com/watch?v=5dGk4rQZEk4" },
                 { title: "Aula 2: Simple Past com Exercícios (YouTube)", url: "https://www.youtube.com/watch?v=zjvccXmrmXA" },
                 { title: "Exercício 1: Pratique Simple Past (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=15870" },
                 { title: "Exercício 2: British Council - Simple Past Practice", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/past-simple-regular-verbs" },
                 { title: "Exercício 3: Perfect English Grammar - Past Simple Quiz", url: "https://www.perfect-english-grammar.com/past-simple-exercise-1.html" }
            ],
            "How Many / How Much": [
                 { title: "Aula 1: How Many vs How Much (YouTube - English with Lucy)", url: "https://www.youtube.com/watch?v=ppD_S_32a2I" },
                 { title: "Aula 2: Quantifiers - How Many e How Much (YouTube)", url: "https://www.youtube.com/watch?v=Ovd1SYqDBa0" },
                 { title: "Exercício 1: Pratique How Many / How Much (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=2237" },
                 { title: "Exercício 2: British Council - Quantifiers Practice", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/much-many-lot-little-few" },
                 { title: "Exercício 3: Perfect English Grammar - How Many / How Much Quiz", url: "https://www.perfect-english-grammar.com/how-many-how-much-exercise-1.html" }
            ],
            "Genitive Case": [
                 { title: "Aula 1: Genitive Case - Explicação e Uso (YouTube)", url: "https://www.youtube.com/watch?v=TAYcNEb3dUM" },
                 { title: "Aula 2: Possessive Case - Genitive (YouTube)", url: "https://www.youtube.com/watch?v=Urs8G8iR6-A" },
                 { title: "Exercício 1: Pratique Genitive Case (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=1835" },
                 { title: "Exercício 2: British Council - Possessives Practice", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/possessives" },
                 { title: "Exercício 3: Perfect English Grammar - Possessive Case Quiz", url: "https://www.perfect-english-grammar.com/possessive-case-exercise-1.html" }
            ],
             "Causative Form": [
                 { title: "Aula 1: Causative Form - Explicação (YouTube)", url: "https://www.youtube.com/watch?v=QXgYgC-qhRQ" },
                 { title: "Aula 2: Causative Have / Get (YouTube)", url: "https://www.youtube.com/watch?v=XYRTTl_NbMQ" },
                 { title: "Exercício 1: Pratique Causative Form (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=2705" },
                 { title: "Exercício 2: British Council - Causative Practice", url: "https://learnenglish.britishcouncil.org/grammar/b2-c1-grammar/causative-verbs-have-something-done" },
                 { title: "Exercício 3: Perfect English Grammar - Causative Quiz", url: "https://www.perfect-english-grammar.com/causative-exercise-1.html" }
            ],
             "Zero Conditional": [
                 { title: "Aula 1: Zero Conditional (BBC Learning English)", url: "https://www.youtube.com/watch?v=1t2s4WbWf5c" },
                 { title: "Aula 2: Zero Conditional - Explained (YouTube)", url: "https://www.youtube.com/watch?v=Afk-TqOtu4s" },
                 { title: "Exercício 1: Pratique Zero Conditional (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=1433" },
                 { title: "Exercício 2: British Council - Zero Conditional Practice", url: "https://learnenglish.britishcouncil.org/grammar/b1-b2-grammar/conditionals-zero-conditional" },
                 { title: "Exercício 3: Perfect English Grammar - Zero Conditional Quiz", url: "https://www.perfect-english-grammar.com/zero-conditional-exercise-1.html" }
            ],
            "First Conditional": [
                 { title: "Aula 1: First Conditional - Explicação (YouTube)", url: "https://www.youtube.com/watch?v=frY2lxk8qBo" },
                 { title: "Aula 2: First Conditional - Exercícios (YouTube)", url: "https://www.youtube.com/watch?v=5UiG0xOKp1I" },
                 { title: "Exercício 1: Pratique First Conditional (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=1438" },
                 { title: "Exercício 2: British Council - First Conditional Practice", url: "https://learnenglish.britishcouncil.org/grammar/b1-b2-grammar/conditionals-first-conditional" },
                 { title: "Exercício 3: Perfect English Grammar - First Conditional Quiz", url: "https://www.perfect-english-grammar.com/first-conditional-exercise-1.html" }
            ],
            "Second Conditional": [
                 { title: "Aula 1: Second Conditional - Explicação (YouTube)", url: "https://www.youtube.com/watch?v=dAzX0iYdFXo" },
                 { title: "Aula 2: Second Conditional - Exercícios (YouTube)", url: "https://www.youtube.com/watch?v=73fWk7riJok" },
                 { title: "Exercício 1: Pratique Second Conditional (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=1441" },
                 { title: "Exercício 2: British Council - Second Conditional Practice", url: "https://learnenglish.britishcouncil.org/grammar/b1-b2-grammar/conditionals-second-conditional" },
                 { title: "Exercício 3: Perfect English Grammar - Second Conditional Quiz", url: "https://www.perfect-english-grammar.com/second-conditional-exercise-1.html" }
            ],
            "Verbos no Passado": [
                 { title: "Aula 1: Verbos no Passado - Explicação (YouTube)", url: "https://www.youtube.com/watch?v=fVd20G9YFwg" },
                 { title: "Aula 2: Verbos Regulares e Irregulares no Passado (YouTube)", url: "https://www.youtube.com/watch?v=6iMzxR1qtxo" },
                 { title: "Exercício 1: Pratique Verbos no Passado (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=15870" },
                 { title: "Exercício 2: British Council - Past Verbs Practice", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/past-simple-regular-verbs" },
                 { title: "Exercício 3: Perfect English Grammar - Past Verbs Quiz", url: "https://www.perfect-english-grammar.com/past-simple-exercise-1.html" }
            ],
            "Should": [
                 { title: "Aula 1: Should - Uso e Explicação (YouTube)", url: "https://www.youtube.com/watch?v=FZtEZGxLMjs" },
                 { title: "Aula 2: Should - Exercícios e Exemplos (YouTube)", url: "https://www.youtube.com/watch?v=R12t3DF8Hf0" },
                 { title: "Exercício 1: Pratique Should (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=1839" },
                 { title: "Exercício 2: British Council - Should Practice", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/should-and-shouldnt-for-advice" },
                 { title: "Exercício 3: Perfect English Grammar - Should Quiz", url: "https://www.perfect-english-grammar.com/modal-verbs-of-obligation-exercise-1.html" }
            ],
            "Would": [
                 { title: "Aula 1: Would - Explicação e Uso (YouTube)", url: "https://www.youtube.com/watch?v=0hrWZ18xgLM" },
                 { title: "Aula 2: Would - Exercícios e Exemplos (YouTube)", url: "https://www.youtube.com/watch?v=rxzVhHcEYvs" },
                 { title: "Exercício 1: Pratique Would (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=2331" },
                 { title: "Exercício 2: British Council - Would Practice", url: "https://learnenglish.britishcouncil.org/grammar/b1-b2-grammar/would" },
                 { title: "Exercício 3: Perfect English Grammar - Would Quiz", url: "https://www.perfect-english-grammar.com/conditionals-exercise-1.html" }
            ],
            "Could": [
                 { title: "Aula 1: Could - Explicação e Uso (YouTube)", url: "https://www.youtube.com/watch?v=dtK9CcrlKXc" },
                 { title: "Aula 2: Could - Exercícios e Exemplos (YouTube)", url: "https://www.youtube.com/watch?v=ln77HkqHHR0" },
                 { title: "Exercício 1: Pratique Could (English Exercises Online)", url: "https://www.englishexercises.org/makeagame/viewgame.asp?id=2432" },
                 { title: "Exercício 2: British Council - Could Practice", url: "https://learnenglish.britishcouncil.org/grammar/a1-a2-grammar/can-and-could-for-ability" },
                 { title: "Exercício 3: Perfect English Grammar - Could Quiz", url: "https://www.perfect-english-grammar.com/can-could-be-able-to-exercise-1.html" }
            ]
        };

        function renderPdiSection() {
            setActiveHubButton(null); // No active button in nav
            showHeader();
            document.getElementById('main-title').textContent = 'PDI: Plano de Desenvolvimento Individual';
            document.getElementById('main-description').textContent = 'Este espaço é dedicado ao seu plano de carreira e desenvolvimento profissional no SLAP, oferecendo caminhos claros para evolução.';
            
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="text-lg font-semibold mb-4 text-stone-800">O que é um PDI?</h3>
                    <p class="text-stone-700 mb-6">
                        Um Plano de Desenvolvimento Individual é uma ferramenta personalizada para impulsionar a carreira e o crescimento profissional dos professores, com caminhos claros para evolução dentro do SLAP.
                    </p>

                    <h3 class="text-lg font-semibold mb-4 text-stone-800">Bonificações por Certificações e Formação</h3>
                    <p class="text-sm text-stone-600 mb-4">Válido somente após o colaborador completar 1 ano de empresa.</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                        ${certifications.map(cert => `
                            <div class="bg-stone-100 p-4 rounded-lg shadow-sm flex flex-col h-full pdi-card pdi-card-yellow">
                                <div class="flex-grow">
                                    <h4 class="font-semibold text-stone-800">${cert.name}</h4>
                                    <p class="text-xs text-stone-500 mt-1">${cert.description}</p>
                                </div>
                                <p class="text-sm text-stone-600 mt-2 font-medium">${cert.bonus}</p>
                            </div>
                        `).join('')}
                    </div>
                    
                    <h3 class="text-lg font-semibold mt-8 mb-4 text-stone-800">Benefício Lealdade</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-stone-100 p-4 rounded-lg shadow-sm pdi-card pdi-card-purple">
                            <h4 class="font-semibold text-stone-800">Nível A</h4>
                            <p class="text-sm text-stone-600">Colaboradores com mais de 2 anos de casa: <strong>R$100/mês</strong></p>
                        </div>
                        <div class="bg-stone-100 p-4 rounded-lg shadow-sm pdi-card pdi-card-purple">
                            <h4 class="font-semibold text-stone-800">Nível B</h4>
                            <p class="text-sm text-stone-600">Colaboradores com mais de 4 anos de casa: <strong>R$200/mês</strong></p>
                        </div>
                        <div class="bg-stone-100 p-4 rounded-lg shadow-sm pdi-card pdi-card-purple">
                            <h4 class="font-semibold text-stone-800">Nível C</h4>
                            <p class="text-sm text-stone-600">Colaboradores com mais de 6 anos de casa: <strong>R$400/mês</strong></p>
                        </div>
                        <div class="bg-stone-100 p-4 rounded-lg shadow-sm pdi-card pdi-card-purple">
                            <h4 class="font-semibold text-stone-800">Nível D</h4>
                            <p class="text-sm text-stone-600">Colaboradores com mais de 8 anos de casa: <strong>A negociar</strong></p>
                        </div>
                    </div>

                    <h3 class="text-lg font-semibold mb-4 text-stone-800">Bonificações Comemorativas</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                        ${commemorativeBonuses.map(bonus => `
                             <div class="bg-stone-100 p-4 rounded-lg shadow-sm flex flex-col h-full pdi-card pdi-card-orange">
                                <h4 class="font-semibold text-stone-800 flex-grow">${bonus.name}</h4>
                                <p class="text-xs text-stone-500 mt-1">${bonus.description}</p>
                            </div>
                        `).join('')}
                    </div>

                    <div class="info-box mt-8">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg>
                        <div>
                            <h4 class="font-bold">Observação Importante</h4>
                            <p class="text-sm">Essas bonificações serão creditadas no Caju, nosso cartão benefício, e não possuem nenhum vínculo com salário ou pagamentos relacionados à CLT.</p>
                        </div>
                    </div>

                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
        }
        
        function renderDeepDiveSection() {
            setActiveHubButton('nav-deep-dive');
            showHeader();
            document.getElementById('main-title').textContent = 'Deep Dive';
            document.getElementById('main-description').textContent = 'Um mergulho profundo em desafios pedagógicos comuns, com orientações práticas para você navegar em situações complexas com mais segurança e confiança.';
            
            contentArea.innerHTML = `
                <section>
                    <div class="info-box mt-0 mb-8 p-4 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        <div class="ml-3">
                          <h3 class="text-sm font-medium">Aviso importante</h3>
                          <div class="mt-2 text-sm">
                            <p>As vozes utilizadas nos áudios desta seção são geradas por inteligência artificial. No entanto, todo o conteúdo foi desenvolvido exclusivamente pelo SLAP e segue nossas diretrizes pedagógicas e valores institucionais. O conteúdo compartilhado aqui é propriedade intelectual do SLAP.</p>
                          </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${crisisKits.map((kit, index) => `
                        <div class="crisis-card">
                            <h3 class="text-lg font-bold">${kit.title}</h3>
                            <p class="text-sm text-stone-600 mb-4">${kit.description}</p>
                            
                            <!-- NOVO PLAYER DE ÁUDIO -->
                            <div class="audio-player-container" data-player-id="player-${index}">
                                <button class="play-pause-button">
                                    <svg class="play-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg>
                                    <svg class="pause-icon hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
                                </button>
                                <span class="time-display">0:00 / 0:00</span>
                                <input type="range" class="progress-bar" value="0" step="1">
                                <button class="speed-button">1x</button>
                                <audio class="audio-element" preload="metadata" src="${kit.audioSrc}"></audio>
                            </div>

                        </div>
                    `).join('')}
                    </div>
                </section>
            `;
            
            // --- NOVA LÓGICA DO PLAYER ---
            const players = document.querySelectorAll('.audio-player-container');
            let currentlyPlayingAudio = null;

            function formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes}:${secs.toString().padStart(2, '0')}`;
            }

            players.forEach(player => {
                const audio = player.querySelector('.audio-element');
                const playPauseBtn = player.querySelector('.play-pause-button');
                const progressBar = player.querySelector('.progress-bar');
                const timeDisplay = player.querySelector('.time-display');
                const speedBtn = player.querySelector('.speed-button');
                const playIcon = playPauseBtn.querySelector('.play-icon');
                const pauseIcon = playPauseBtn.querySelector('.pause-icon');

                // Pausar e redefinir outros players
                const stopOtherPlayers = () => {
                    players.forEach(otherPlayer => {
                        if (otherPlayer !== player) {
                            const otherAudio = otherPlayer.querySelector('.audio-element');
                            otherAudio.pause();
                            otherPlayer.querySelector('.play-icon').classList.remove('hidden');
                            otherPlayer.querySelector('.pause-icon').classList.add('hidden');
                        }
                    });
                };

                playPauseBtn.addEventListener('click', () => {
                    if (audio.paused) {
                        stopOtherPlayers();
                        audio.play();
                        playIcon.classList.add('hidden');
                        pauseIcon.classList.remove('hidden');
                        currentlyPlayingAudio = audio;
                    } else {
                        audio.pause();
                        playIcon.classList.remove('hidden');
                        pauseIcon.classList.add('hidden');
                        currentlyPlayingAudio = null;
                    }
                });

                audio.addEventListener('loadedmetadata', () => {
                    progressBar.max = Math.floor(audio.duration);
                    timeDisplay.textContent = `0:00 / ${formatTime(audio.duration)}`;
                });

                audio.addEventListener('timeupdate', () => {
                    progressBar.value = Math.floor(audio.currentTime);
                    timeDisplay.textContent = `${formatTime(audio.currentTime)} / ${formatTime(audio.duration)}`;
                });
                
                audio.addEventListener('ended', () => {
                    playIcon.classList.remove('hidden');
                    pauseIcon.classList.add('hidden');
                    progressBar.value = 0;
                    audio.currentTime = 0;
                    currentlyPlayingAudio = null;
                });

                progressBar.addEventListener('input', () => {
                    audio.currentTime = progressBar.value;
                });

                speedBtn.addEventListener('click', () => {
                    if (audio.playbackRate === 1.0) {
                        audio.playbackRate = 1.5;
                        speedBtn.textContent = '1.5x';
                        speedBtn.classList.add('active');
                    } else {
                        audio.playbackRate = 1.0;
                        speedBtn.textContent = '1x';
                        speedBtn.classList.remove('active');
                    }
                });
        }); }
        
        window.renderGoodPracticesContent = renderGoodPracticesContent;
        window.renderGlossaryContent = renderGlossaryContent;
        window.renderContentFunnel = renderContentFunnel;
        window.renderProhibitedContent = renderProhibitedContent;
        
        function renderRegimentoInternoSection() {
    setActiveHubButton(null); // No active button in nav
    showHeader();
    document.getElementById('main-title').textContent = 'Regimento Interno';
    document.getElementById('main-description').textContent = 'Clique em cada tópico para expandir e ver as diretrizes, políticas e procedimentos do SLAP.';

    // Conteúdo completo para todos os tópicos
    const specificContent = {
        "Pontualidade": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O compromisso com a pontualidade é essencial para o bom funcionamento da escola e a experiência do aluno. O professor deve estar logado no Zoom, com equipamentos testados e materiais abertos, no mínimo 5 minutos antes do horário da aula.</li>
                <li>Atrasos, mesmo que breves, impactam a credibilidade da instituição e a qualidade do serviço prestado. Por isso, atrasos recorrentes serão registrados e discutidos com a coordenação.</li>
                <li>Em casos de imprevistos, o professor deve comunicar imediatamente a coordenação, justificando o ocorrido e sinalizando o tempo estimado de atraso.</li>
            </ul>`,
        "Assiduidade": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>A presença regular é um indicador de comprometimento com o trabalho e com os alunos. Professores devem comparecer a todas as aulas programadas, salvo em casos de urgência, doença ou acordo prévio com a coordenação.</li>
                <li>O excesso de faltas, mesmo justificadas, poderá gerar uma reavaliação da continuidade do professor na equipe, especialmente se houver impacto negativo na retenção de alunos ou no fluxo de aulas.</li>
                <li>Em caso de ausência prevista, o professor deve solicitar a liberação com no mínimo 24 horas de antecedência, possibilitando a organização de uma substituição adequada.</li>
            </ul>`,
        "Reuniões": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Reuniões pedagógicas, administrativas e de alinhamento fazem parte da jornada de trabalho do professor. A participação é obrigatória.</li>
                <li>O professor que não puder comparecer deve informar previamente e, obrigatoriamente, se atualizar por meio da ata e dos registros fornecidos pela coordenação.</li>
                <li>As reuniões são oportunidades valiosas de alinhamento com a missão da escola, troca de experiências e crescimento coletivo.</li>
            </ul>`,
        "Planejamento pedagógico": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Todos os professores devem desenvolver planos de aula para alunos VIP caso haja divergência de interesses com o conteúdo programático.</li>
                <li>O planejamento deve estar alinhado com a metodologia do SLAP, priorizando o desenvolvimento da fluência oral, a autonomia do aluno e a personalização do ensino.</li>
                <li>O não cumprimento dos prazos de entrega dos planos pode resultar em advertência e impactar a renovação de contratos.</li>
            </ul>`,
        "Conduta ética e profissional": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O professor do SLAP deve manter uma conduta ética em todas as suas interações, prezando pela responsabilidade, imparcialidade, respeito e integridade.</li>
                <li>É vedado fazer comentários pejorativos sobre a escola, alunos, pais ou colegas em qualquer ambiente, físico ou digital.</li>
                <li>A ética profissional também inclui não se apropriar de ideias, materiais ou práticas de colegas sem a devida autorização.</li>
            </ul>`,
        "Relacionamento com os alunos": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O vínculo com os alunos deve ser baseado no respeito, na empatia e na clareza de papéis.</li>
                <li>É proibido manter qualquer tipo de relacionamento íntimo, pessoal ou financeiro com alunos fora do ambiente institucional, principalmente se isso gerar conflitos de interesse ou afetar a imparcialidade.</li>
                <li>O professor deve atuar como modelo de comunicação, profissionalismo e respeito cultural, linguístico e social.</li>
            </ul>`,
        "Relacionamento com pais e responsáveis": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Quando aplicável, a comunicação com pais e responsáveis deve ser feita com cautela, clareza e sempre mediada ou autorizada pela coordenação.</li>
                <li>Em hipótese alguma o professor tratar de assuntos administrativos ou financeiros sem autorização da coordenação ou gestão.</li>
            </ul>`,
        "Uso dos materiais da escola": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Os materiais didáticos, audiovisuais, slides, atividades e roteiros fornecidos pela escola são de uso exclusivo nas aulas do SLAP.</li>
                <li>É proibida a reprodução, modificação ou redistribuição desses materiais para uso externo sem autorização expressa da coordenação.</li>
                <li>O professor também é incentivado a contribuir com sugestões e criações próprias, desde que alinhadas com a proposta pedagógica.</li>
            </ul>`,
        "Colaboração com a equipe escolar": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>A colaboração é parte fundamental da cultura do SLAP. Espera-se que todos os professores estejam abertos ao diálogo, à escuta ativa e à construção coletiva.</li>
                <li>Situações de conflito devem ser encaminhadas à coordenação com profissionalismo e descrição, evitando confrontos diretos ou exposição em grupos.</li>
            </ul>`,
        "Comunicação institucional": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Toda comunicação com alunos, responsáveis e demais membros da equipe deve acontecer pelos canais oficiais da escola (e-mail institucional, WhatsApp institucional ou plataforma definida).</li>
                <li>O professor deve responder às mensagens internas com agilidade, salvo situações emergenciais.</li>
            </ul>`,
        "Eventos e atividades extras": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>A participação em eventos promovidos pelo SLAP, como workshops, conversações especiais, aulas presenciais, publicidades, semanas temáticas, é altamente valorizada e, em alguns casos, obrigatória.</li>
                <li>O professor pode ser convidado a propor ou conduzir atividades extras. A proatividade nesse sentido será sempre reconhecida.</li>
            </ul>`,
        "Uso das redes sociais": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Professores são livres para manter redes sociais pessoais, mas devem zelar pela imagem da instituição.</li>
                <li>É proibido:
                    <ul class="list-disc list-inside pl-5">
                        <li>Criticar a escola, colegas ou alunos publicamente.</li>
                        <li>Compartilhar imagens de alunos sem autorização da coordenação pedagógica.</li>
                        <li>Utilizar o nome da escola para promover serviços particulares ou concorrentes.</li>
                    </ul>
                </li>
            </ul>`,
        "Acompanhamento pedagógico dos alunos": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Cada professor é responsável por acompanhar o progresso de seus alunos, com base em critérios definidos pela escola (participação, fluência, vocabulário, etc).</li>
                <li>Relatórios formais e feedbacks devem ser enviados nos prazos estipulados.</li>
                <li>Casos de estagnação, desmotivação ou evolução acelerada devem ser comunicados à coordenação para possíveis ajustes no plano de estudos.</li>
            </ul>`,
        "Sigilo e confidencialidade": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Toda e qualquer informação relacionada a dados pessoais, desempenho, dificuldades ou histórico de alunos e famílias deve ser mantida em sigilo.</li>
                <li>Informações pedagógicas compartilhadas em reuniões internas também são de acesso restrito e não devem ser repassadas externamente.</li>
            </ul>`,
        "Vestimenta e apresentação pessoal": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Durante as aulas online, o professor deve estar vestido de forma apropriada, com aparência profissional, mesmo em casa.</li>
                <li>Cuidado com iluminação, ruídos externos e fundo de tela. É recomendado o uso de fundo neutro ou virtual autorizado.</li>
            </ul>`,
        "Substituições": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O professor deve informar à coordenação qualquer impossibilidade de dar aula com pelo menos 24 horas de antecedência.</li>
                <li>Em caso de emergência, comunicar assim que possível. A escola providenciará o substituto ou remanejamento.</li>
                <li>Está vedado ao professor designer um substituto sem autorização prévia ou conhecimento da coordenação pedagógica.</li>
                <li>O substituto deverá possuir nível linguístico compatível ou próximo do professor substituído para ensinar o nível da turma ou aluno.</li>
            </ul>`,
        "Faltas": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>As faltas devem ser comunicadas com antecedência e justificadas de maneira formal.</li>
                <li>Os pedidos de falta com justificativas pessoais poderão ser autorizados ou negados pela coordenação pedagógica visto que não há urgência ou força maior.</li>
                <li>Em casos reincidentes, mesmo com justificativa, o professor poderá ser orientado, advertido ou ter sua carga reduzida.</li>
            </ul>`,
        "Materiais de trabalho necessários": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O professor é responsável por garantir:
                    <ul class="list-disc list-inside pl-5">
                        <li>Computador funcional</li>
                        <li>Conexão de internet estável</li>
                        <li>Câmera e microfone de boa qualidade</li>
                        <li>Ambiente organizado, silencioso e sem interrupções</li>
                    </ul>
                </li>
                <li>A escola pode fornecer orientações técnicas, mas a infraestrutura é de responsabilidade do docente.</li>
            </ul>`,
        "Prazos": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Todos os prazos estabelecidos pela coordenação para entrega de conteúdos, feedbacks, relatórios ou participação em eventos devem ser rigorosamente respeitados.</li>
                <li>A recorrência de atrasos compromete a credibilidade do professor e será registrada formalmente.</li>
            </ul>`,
        "Postura e linguagem nas aulas": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O professor deve prezar por uma comunicação clara, acessível e educada, adaptando seu vocabulário ao nível dos alunos.</li>
                <li>É proibido:
                    <ul class="list-disc list-inside pl-5">
                        <li>Usar sarcasmo, apelidos ou linguagem ofensiva</li>
                        <li>Fazer piadas que possam ser mal interpretadas</li>
                        <li>Expor dificuldades dos alunos de forma vexatória</li>
                    </ul>
                </li>
            </ul>`,
        "Associação de imagem a concorrentes": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Não é permitido utilizar sua posição no SLAP para divulgar ou associar-se publicamente a cursos concorrentes.</li>
                <li>Também é vedado o uso de marcas, materiais ou nome da escola em vídeos, eventos ou postagens vinculadas a projetos paralelos concorrentes.</li>
            </ul>`,
        "Conflito de interesses e aulas externas": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O professor pode ter outras atividades profissionais, desde que informe à coordenação e evite conflitos de interesse.</li>
                <li>É expressamente proibido:
                    <ul class="list-disc list-inside pl-5">
                        <li>Oferecer aulas particulares aos alunos do SLAP sem autorização</li>
                        <li>Usar o relacionamento com alunos para captar clientes para serviços externos</li>
                        <li>Utilizar materiais da escola em aulas particulares</li>
                    </ul>
                </li>
            </ul>`,
        "Publicidade": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O professor não deve utilizar o nome da escola para fins publicitários sem autorização expressa da coordenação.</li>
                <li>Publicações em redes sociais que mencionem o SLAP devem respeitar a identidade visual, os valores institucionais e a linguagem adequada.</li>
                <li>É permitido divulgar atividades realizadas no contexto da escola, desde que previamente alinhadas com a coordenação e com o devido cuidado com a imagem dos alunos.</li>
                <li>As publicidades que contém as participações dos professores por meio do SLAP não incluem remuneração individualizada devido ao contrato vincular o cliente e a escola, sendo um contrato entre empresas.</li>
                <li>Os professores designados como creators têm, em seu escopo de trabalho, a função fazer parte de projetos de publicidade dentro do SLAP quando convocados.</li>
            </ul>`,
        "Nível linguístico": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>O professor deve manter, no mínimo, nível de proficiência B2 (CEFR) na língua inglesa, compatível com o padrão exigido pelo SLAP.</li>
                <li>A escola poderá solicitar periodicamente demonstrações de aula, certificados de proficiência ou avaliações internas.</li>
                <li>O aprimoramento constante da competência linguística e didática será incentivado por meio de treinamentos, workshops e feedbacks.</li>
            </ul>`,
        "Observação de aula": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>A coordenação pedagógica poderá observar aulas ao vivo ou gravadas para fins de avaliação, orientação e desenvolvimento profissional.</li>
                <li>O professor será avisado previamente em caso de observações programadas, mas também poderá haver observações pontuais sem aviso prévio.</li>
                <li>O objetivo é garantir a qualidade do ensino, oferecer feedback construtivo e alinhar a prática docente com os valores da escola.</li>
            </ul>`,
        "Aniversários": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>A cultura do SLAP valoriza o acolhimento e a celebração da vida. Por isso, o professor poderá solicitar uma folga durante o seu aniversário onde a coordenação poderá liberar ou não o professor para celebrar o seu aniversário, sempre priorizando o andamento e desenvolvimento do calendário pedagógico.</li>
            </ul>`,
        "Hierarquia": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>A estrutura hierárquica do SLAP deve ser respeitada por todos os docentes. Demandas, sugestões e conflitos devem ser direcionados à coordenação pedagógica antes de serem levados a instâncias superiores.</li>
                <li>A comunicação clara e o respeito às funções de cada membro da equipe são fundamentais para o bom funcionamento da escola.</li>
            </ul>`,
        "Viagens a trabalho": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Caso haja necessidade de deslocamento presencial para eventos, treinamentos ou representações, a escola comunicará com antecedência e esclarecerá as condições.</li>
                <li>Despesas como transporte, alimentação ou hospedagem serão definidas pela coordenação e acordadas previamente com o professor envolvido.</li>
                <li>A participação deve ser encarada com seriedade e profissionalismo, respeitando os horários e objetivos da viagem.</li>
            </ul>`,
        "Consolidação das Leis do Trabalho (CLT)": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>A escola respeita os direitos trabalhistas previstos na legislação brasileira, quando houver vínculo empregatício formal.</li>
                <li>Em situações de prestação de serviço (autônomos ou PJ), os termos contratuais firmados serão a base da relação de trabalho.</li>
                <li>Em ambos os casos, o SLAP se compromete a garantir um ambiente de trabalho digno, respeitoso e justo.</li>
            </ul>`,
        "Pagamentos": `
            <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
                <li>Os pagamentos serão realizados conforme acordado em contrato, respeitando datas e valores combinados.</li>
                <li>Qualquer inconsistência deve ser comunicada à coordenação administrativa por escrito.</li>
                <li>A pontualidade na entrega das aulas, relatórios e cumprimento de prazos influencia diretamente na regularidade dos pagamentos.</li>
            </ul>`
    };

    const placeholderContent = `
        <ul class="list-disc list-inside space-y-2 py-2 text-stone-600 leading-relaxed">
            <li>(Conteúdo não preenchido)</li>
        </ul>`;

    const topics = [
        "Pontualidade", "Assiduidade", "Reuniões", "Planejamento pedagógico",
        "Conduta ética e profissional", "Relacionamento com os alunos",
        "Relacionamento com pais e responsáveis", "Uso dos materiais da escola",
        "Colaboração com a equipe escolar", "Comunicação institucional",
        "Eventos e atividades extras", "Uso das redes sociais",
        "Acompanhamento pedagógico dos alunos", "Sigilo e confidencialidade",
        "Vestimenta e apresentação pessoal", "Substituições", "Faltas",
        "Materiais de trabalho necessários", "Prazos", "Postura e linguagem nas aulas",
        "Associação de imagem a concorrentes", "Conflito de interesses e aulas externas",
        "Publicidade", "Nível linguístico", "Observação de aula", "Aniversários",
        "Hierarquia", "Viagens a trabalho", "Consolidação das Leis do Trabalho (CLT)",
        "Pagamentos"
    ];

    const topicsHtml = topics.map(topic => `
        <div class="faq-item">
            <div class="faq-question">
                <span>${topic}</span>
                <svg class="faq-arrow w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
            </div>
            <div class="faq-answer">
                ${specificContent[topic] || placeholderContent}
            </div>
        </div>
    `).join('');

    contentArea.innerHTML = `
        <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
            <div class="space-y-3">
                ${topicsHtml}
            </div>
        </section>
    `;

    document.querySelectorAll('.faq-question').forEach(button => {
        button.addEventListener('click', toggleFaq);
    });

    if (currentChart) {
        currentChart.destroy();
    }
}
        
        function renderLinksUteisSection() {
            setActiveHubButton(null); // No active button in nav
            showHeader();
            document.getElementById('main-title').textContent = 'Links Úteis';
            document.getElementById('main-description').textContent = 'Um repositório central de aulas em vídeo e exercícios interativos para os principais tópicos gramaticais.';

            contentArea.innerHTML = `
                 <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 links-uteis-section">
                    ${Object.entries(usefulLinks).map(([title, links]) => `
                        <div class="faq-item">
                            <div class="faq-question">
                                <span>${title}</span>
                                <svg class="faq-arrow w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                            </div>
                            <div class="faq-answer">
                                <ul class="divide-y divide-stone-200">
                                    ${links.map(link => `
                                        <li class="py-3">
                                            <a href="${link.url}" target="_blank" class="hover:underline transition-colors">${link.title}</a>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                    `).join('')}
                </section>
            `;
             document.querySelectorAll('.faq-question').forEach(button => {
                button.addEventListener('click', toggleFaq);
            });
        }
        
        // --- QUIZ DATA AND FUNCTIONS ---
        const quizData = [
             { question: "She ___ a doctor. She's a teacher.", options: ["isn't", "aren't", "don't", "doesn't"], correctAnswer: 0, explanation: "Usamos 'isn't' (is not) para a terceira pessoa do singular (she/he/it) no verbo 'to be'." },
             { question: "___ they live in London?", options: ["Do", "Does", "Is", "Are"], correctAnswer: 0, explanation: "'Do' é o auxiliar correto para fazer perguntas com 'they' no Simple Present." },
             { question: "I went to the party, but I didn't see ___.", options: ["nobody", "anybody", "somebody", "everybody"], correctAnswer: 1, explanation: "'Anybody' é usado em frases negativas e interrogativas para significar 'ninguém' ou 'alguém'." },
             { question: "This is the ___ movie I've ever seen.", options: ["best", "good", "better", "more good"], correctAnswer: 0, explanation: "'Best' é o superlativo de 'good', usado para comparar um item com todos os outros." },
             { question: "If I ___ you, I would study more for the test.", options: ["was", "am", "were", "be"], correctAnswer: 2, explanation: "No Second Conditional, usamos 'were' para todas as pessoas (incluindo I, he, she, it) para expressar uma situação hipotética." },
             { question: "He has been working here ___ 2010.", options: ["for", "since", "at", "on"], correctAnswer: 1, explanation: "'Since' é usado com um ponto específico no tempo (since 2010), enquanto 'for' é usado com uma duração (for 10 years)." },
             { question: "My phone is much more expensive ___ yours.", options: ["that", "than", "then", "as"], correctAnswer: 1, explanation: "'Than' é a conjunção usada para fazer comparações." },
             { question: "Could you please pass me ___ water?", options: ["a", "an", "the", "some"], correctAnswer: 3, explanation: "'Some' é usado para substantivos incontáveis como 'water' em pedidos ou ofertas." },
             { question: "They ___ to the cinema yesterday.", options: ["go", "goes", "went", "gone"], correctAnswer: 2, explanation: "'Went' é o Simple Past do verbo irregular 'go'." },
             { question: "I'm looking forward ___ you again.", options: ["to seeing", "to see", "see", "seeing"], correctAnswer: 0, explanation: "A expressão 'look forward to' é seguida por um verbo no gerúndio (-ing)." },
             { question: "What does the idiom 'break a leg' mean?", options: ["To have an accident", "Good luck", "To work hard", "To tell a secret"], correctAnswer: 1, explanation: "'Break a leg' é uma expressão idiomática usada para desejar boa sorte a alguém, especialmente antes de uma apresentação." },
             { question: "Choose the synonym for 'ubiquitous'.", options: ["Rare", "Everywhere", "Hidden", "Expensive"], correctAnswer: 1, explanation: "'Ubiquitous' significa algo que está ou parece estar presente em todos os lugares ao mesmo tempo." },
             { question: "The opposite of 'generous' is ___.", options: ["Kind", "Happy", "Stingy", "Brave"], correctAnswer: 2, explanation: "'Stingy' (avarento, pão-duro) é o antônimo de 'generous' (generoso)." },
             { question: "I need to ___ the trash. It smells bad.", options: ["take out", "take off", "take in", "take on"], correctAnswer: 0, explanation: "O phrasal verb 'take out' significa remover algo de um lugar, como em 'levar o lixo para fora'." },
             { question: "She's very ___ and always has a smile on her face.", options: ["cheerful", "moody", "shy", "serious"], correctAnswer: 0, explanation: "'Cheerful' significa alegre e otimista, o que combina com a descrição de alguém que sempre sorri." },
             { question: "There isn't ___ milk in the fridge.", options: ["many", "much", "a lot", "some"], correctAnswer: 1, explanation: "'Much' é usado com substantivos incontáveis (como 'milk') em frases negativas." },
             { question: "He is very good ___ playing the guitar.", options: ["in", "on", "at", "for"], correctAnswer: 2, explanation: "A preposição correta a ser usada com 'good' para indicar habilidade em algo é 'at'." },
             { question: "It's raining cats and ___.", options: ["mice", "dogs", "birds", "fishes"], correctAnswer: 1, explanation: "'Raining cats and dogs' é uma expressão idiomática que significa que está chovendo muito forte." },
             { question: "Have you ever ___ to Japan?", options: ["be", "was", "been", "went"], correctAnswer: 2, explanation: "O Present Perfect (Have you ever...) usa o Past Participle do verbo. O Past Participle de 'be' é 'been'." },
             { question: "The book was ___ by a famous author.", options: ["write", "wrote", "written", "writing"], correctAnswer: 2, explanation: "Na voz passiva ('The book was...'), usamos o Past Participle do verbo. 'Written' é o Past Participle de 'write'." },
             { question: "I'm sorry, I can't ___ you a hand right now.", options: ["give", "take", "make", "do"], correctAnswer: 0, explanation: "A expressão 'give someone a hand' significa 'ajudar alguém'."},
             { question: "What's the capital of Australia?", options: ["Sydney", "Melbourne", "Canberra", "Perth"], correctAnswer: 2, explanation: "Embora Sydney seja a cidade mais famosa, a capital da Austrália é Canberra."},
             { question: "He drives very ___. I feel unsafe with him.", options: ["careful", "carefully", "careless", "carelessly"], correctAnswer: 3, explanation: "'Carelessly' é um advérbio que modifica o verbo 'drives', significando 'de forma descuidada'."},
             { question: "If you heat water to 100°C, it ___.", options: ["boil", "boils", "will boil", "is boiling"], correctAnswer: 1, explanation: "Para fatos científicos ou verdades universais, usamos o Zero Conditional (Simple Present + Simple Present)."},
             { question: "She bought a new dress ___ she didn't have enough money.", options: ["because", "so", "although", "but"], correctAnswer: 2, explanation: "'Although' (embora) é usado para mostrar um contraste entre duas ideias."},
             { question: "I ___ my keys. I can't find them anywhere.", options: ["lost", "have lost", "did lose", "am losing"], correctAnswer: 1, explanation: "O Present Perfect ('have lost') é usado para uma ação passada que tem um resultado no presente (não consigo encontrar as chaves)."},
             { question: "He's allergic ___ nuts.", options: ["to", "for", "with", "of"], correctAnswer: 0, explanation: "A preposição correta a ser usada com 'allergic' é 'to'."},
             { question: "This cake tastes ___ heaven.", options: ["as", "like", "of", "for"], correctAnswer: 1, explanation: "Usamos 'like' para comparar o sabor de algo com outra coisa."},
             { question: "You ___ smoke here. It's forbidden.", options: ["must", "shouldn't", "mustn't", "can"], correctAnswer: 2, explanation: "'Mustn't' expressa uma proibição forte."},
             { question: "A 'bookworm' is a person who ___.", options: ["writes books", "sells books", "hates books", "loves to read"], correctAnswer: 3, explanation: "'Bookworm' é uma gíria para alguém que ama ler livros."},
             { question: "___ is a lot of traffic in the morning.", options: ["It", "There", "Here", "That"], correctAnswer: 1, explanation: "Usamos 'There is' para indicar a existência de algo."},
             { question: "She is ___ a talented singer.", options: ["so", "such", "very", "too"], correctAnswer: 1, explanation: "Usamos 'such a' antes de um substantivo singular com adjetivo (such a talented singer)."},
             { question: "I would rather ___ at home than go out.", options: ["stay", "to stay", "staying", "stayed"], correctAnswer: 0, explanation: "A estrutura 'would rather' é seguida pelo verbo no infinitivo sem 'to'."},
             { question: "He was accused ___ stealing the money.", options: ["for", "with", "of", "to"], correctAnswer: 2, explanation: "O verbo 'accuse' é seguido pela preposição 'of'."},
             { question: "The phrasal verb 'to look up to someone' means ___.", options: ["to search for information", "to admire and respect someone", "to be careful", "to visit someone"], correctAnswer: 1, explanation: "'Look up to someone' significa admirar e respeitar essa pessoa."},
             { question: "By the time I arrived, the movie ___ already started.", options: ["had", "has", "was", "did"], correctAnswer: 0, explanation: "O Past Perfect ('had started') é usado para uma ação que aconteceu antes de outra ação no passado ('I arrived')."},
             { question: "I'm not used to ___ so early.", options: ["wake up", "waking up", "woke up", "have woken up"], correctAnswer: 1, explanation: "A expressão 'be used to' é seguida por um verbo no gerúndio (-ing)." },
             { question: "Which word is a synonym for 'compulsory'?", options: ["Optional", "Mandatory", "Difficult", "Easy"], correctAnswer: 1, explanation: "'Compulsory' e 'mandatory' ambos significam algo que é obrigatório."},
             { question: "They decided ___ a new car.", options: ["to buy", "buy", "buying", "bought"], correctAnswer: 0, explanation: "O verbo 'decide' é seguido por um infinitivo com 'to'."},
             { question: "This is a problem ___ I cannot solve.", options: ["who", "which", "whose", "where"], correctAnswer: 1, explanation: "'Which' ou 'that' são os pronomes relativos corretos para se referir a coisas (a problem)."},
             { question: "We didn't go to the beach ___ the bad weather.", options: ["because", "because of", "so", "due"], correctAnswer: 1, explanation: "'Because of' é seguido por um substantivo ou frase nominal ('the bad weather'), enquanto 'because' é seguido por uma oração completa."},
             { question: "It's no use ___ over spilled milk.", options: ["cry", "to cry", "crying", "cried"], correctAnswer: 2, explanation: "A expressão 'it's no use' é seguida por um verbo no gerúndio (-ing)."},
             { question: "The word 'astounding' means ___.", options: ["very boring", "very common", "very surprising", "very small"], correctAnswer: 2, explanation: "'Astounding' significa algo extremamente surpreendente ou impressionante."},
             { question: "Let's meet ___ Friday afternoon.", options: ["in", "at", "on", "for"], correctAnswer: 2, explanation: "Usamos a preposição 'on' para dias da semana."},
             { question: "I wish I ___ fly.", options: ["can", "could", "will", "would"], correctAnswer: 1, explanation: "A estrutura 'I wish' é seguida pelo Simple Past ('could') para expressar um desejo sobre o presente."},
             { question: "He's been ___ for hours. He must be exhausted.", options: ["study", "studies", "studying", "studied"], correctAnswer: 2, explanation: "O Present Perfect Continuous ('has been studying') é usado para uma ação que começou no passado e continua até o presente, com ênfase na duração."},
             { question: "The test was easier ___ I expected.", options: ["that", "as", "then", "than"], correctAnswer: 3, explanation: "'Than' é usado para comparações."},
             { question: "What does it mean to 'feel under the weather'?", options: ["To feel happy", "To feel sick", "To feel cold", "To feel angry"], correctAnswer: 1, explanation: "'Feel under the weather' é um eufemismo para dizer que você está se sentindo doente."},
             { question: "She succeeded ___ passing the exam.", options: ["on", "at", "in", "to"], correctAnswer: 2, explanation: "O verbo 'succeed' é seguido pela preposição 'in'."},
             { question: "I'm not interested ___ politics.", options: ["in", "on", "about", "for"], correctAnswer: 0, explanation: "Usamos a preposição 'in' com 'interested'."},
             { question: "This shirt doesn't fit me. I need a larger ___.", options: ["one", "it", "thing", "piece"], correctAnswer: 0, explanation: "'One' é usado como um pronome para evitar a repetição da palavra 'shirt'."},
             { question: "He avoids ___ junk food.", options: ["eat", "to eat", "eating", "eaten"], correctAnswer: 2, explanation: "O verbo 'avoid' é seguido por um verbo no gerúndio (-ing)."},
             { question: "My sister, ___ lives in New York, is a lawyer.", options: ["that", "which", "who", "whose"], correctAnswer: 2, explanation: "'Who' é o pronome relativo correto para se referir a pessoas em uma non-defining clause."},
             { question: "I'll call you as soon as I ___.", options: ["will arrive", "arrive", "arrived", "am arriving"], correctAnswer: 1, explanation: "Após conjunções de tempo como 'as soon as', usamos o Simple Present para se referir ao futuro."},
             { question: "What is a 'hoax'?", options: ["A funny story", "A scientific discovery", "A trick to deceive people", "A type of animal"], correctAnswer: 2, explanation: "Um 'hoax' é um engano ou uma farsa, uma tentativa de enganar as pessoas."},
             { question: "This movie is based ___ a true story.", options: ["in", "on", "at", "from"], correctAnswer: 1, explanation: "A expressão correta é 'based on'."},
             { question: "Despite ___ hard, he failed the exam.", options: ["studying", "he studied", "to study", "study"], correctAnswer: 0, explanation: "'Despite' é seguido por um substantivo ou um verbo no gerúndio (-ing)."},
             { question: "The word 'flabbergasted' means ___.", options: ["Extremely tired", "Extremely common", "Extremely surprising", "Extremely happy"], correctAnswer: 1, explanation: "'Flabbergasted' significa estar extremamente chocado ou surpreso."},
             { question: "You had better ___ now or you'll be late.", options: ["go", "to go", "going", "gone"], correctAnswer: 0, explanation: "A expressão 'had better' é seguida pelo verbo no infinitivo sem 'to'."},
             { question: "The opposite of 'brave' is ___.", options: ["Strong", "Cowardly", "Reckless", "Quiet"], correctAnswer: 2, explanation: "'Reckless' (imprudente) é o oposto de 'brave' (corajoso)."},
             { question: "Could you tell me where ___?", options: ["is the bank", "the bank is", "the bank be", "does the bank is"], correctAnswer: 1, explanation: "Em perguntas indiretas (embedded questions), a ordem da frase é afirmativa (sujeito + verbo)."},
             { question: "She is responsible ___ the marketing department.", options: ["of", "with", "for", "to"], correctAnswer: 2, explanation: "A preposição correta a ser usada com 'responsible' é 'for'."},
             { question: "I can't ___ up with his behavior anymore.", options: ["put", "get", "take", "make"], correctAnswer: 0, explanation: "O phrasal verb 'put up with' significa 'tolerar' ou 'aguentar'."},
             { question: "The word 'ephemeral' means ___.", options: ["Long-lasting", "Permanent", "Lasting for a very short time", "Beautiful"], correctAnswer: 2, explanation: "'Ephemeral' descreve algo que é passageiro, que dura por um tempo muito curto."},
             { question: "Neither my brother ___ my sister likes spinach.", options: ["or", "nor", "and", "but"], correctAnswer: 1, explanation: "A estrutura correta é 'neither... nor'."},
             { question: "If he had known, he ___ have come.", options: ["would", "will", "should", "can"], correctAnswer: 0, explanation: "Esta é a estrutura do Third Conditional (If + Past Perfect, would have + Past Participle)."},
             { question: "I prefer tea ___ coffee.", options: ["than", "from", "over", "to"], correctAnswer: 3, explanation: "Quando usamos o verbo 'prefer' para comparar duas coisas, usamos a preposição 'to'."},
             { question: "A 'down-to-earth' person is ___.", options: ["Dreamy and idealistic", "Practical and realistic", "Arrogant and proud", "Shy and quiet"], correctAnswer: 1, explanation: "Uma pessoa 'down-to-earth' é sensata, prática e realista."},
             { question: "I suggest ___ a doctor.", options: ["you to see", "that you see", "seeing", "to seeing"], correctAnswer: 1, explanation: "A estrutura correta é 'suggest that someone do something'. 'Suggest seeing' também é possível, mas a outra opção é mais formal e completa."},
             { question: "The train ___ at 10 AM tomorrow.", options: ["is leaving", "leaves", "will leave", "leave"], correctAnswer: 1, explanation: "Usamos o Simple Present ('leaves') para horários e programações fixas no futuro."},
             { question: "The word 'resilient' describes someone who can ___.", options: ["Run very fast", "Recover quickly from difficulties", "Solve complex math problems", "Sing beautifully"], correctAnswer: 1, explanation: "'Resilient' descreve a capacidade de se recuperar rapidamente de situações difíceis."},
             { question: "He was made ___ the entire report again.", options: ["to write", "write", "writing", "wrote"], correctAnswer: 0, explanation: "Na voz passiva com 'make' (was made), o verbo seguinte vai para o infinitivo com 'to'."},
             { question: "I'm tired. I'm going to hit the ___.", options: ["road", "roof", "sack", "wall"], correctAnswer: 2, explanation: "'Hit the sack' ou 'hit the hay' é uma gíria que significa 'ir para a cama dormir'."},
             { question: "You'll get used to ___ on the left.", options: ["drive", "be driving", "driving", "driven"], correctAnswer: 2, explanation: "A estrutura 'get used to' é seguida por um verbo no gerúndio (-ing)."},
             { question: "The word 'gregarious' means ___.", options: ["Shy", "Sociable", "Angry", "Intelligent"], correctAnswer: 1, explanation: "Uma pessoa 'gregarious' é sociável e gosta de estar com outras pessoas."},
             { question: "It is ___ to see you again.", options: ["a pleasure", "pleasure", "the pleasure", "pleasured"], correctAnswer: 0, explanation: "A expressão correta é 'It is a pleasure...'."},
             { question: "I am not ___ to lift that box.", options: ["enough strong", "strong enough", "too strong", "so strong"], correctAnswer: 1, explanation: "A estrutura correta é adjetivo + 'enough' (strong enough)."},
             { question: "She insisted ___ paying for the meal.", options: ["on", "in", "to", "for"], correctAnswer: 0, explanation: "O verbo 'insist' é seguido pela preposição 'on'."},
             { question: "To 'spill the beans' means to ___.", options: ["Be clumsy", "Reveal a secret", "Eat quickly", "Waste money"], correctAnswer: 1, explanation: "A expressão 'spill the beans' significa revelar um segredo ou contar uma informação confidencial."},
             { question: "Hardly ___ I got home when the phone rang.", options: ["had", "did", "have", "was"], correctAnswer: 0, explanation: "Quando uma frase começa com 'Hardly', usamos a inversão: 'Hardly had I... when...'."},
             { question: "The word 'meticulous' is a synonym for ___.", options: ["Careless", "Fast", "Careful and precise", "Huge"], correctAnswer: 2, explanation: "'Meticulous' significa ser muito cuidadoso, prestando atenção a todos os detalhes."},
             { question: "I'm ___ with this result.", options: ["disappoint", "disappointing", "disappointed", "disappointment"], correctAnswer: 2, explanation: "Adjetivos terminados em '-ed' (disappointed) descrevem como alguém se sente."},
             { question: "There are ___ people here than at the last meeting.", options: ["less", "fewer", "little", "much"], correctAnswer: 1, explanation: "'Fewer' é usado para substantivos contáveis (people), enquanto 'less' é para incontáveis."},
             { question: "The opposite of 'cautious' is ___.", options: ["Careful", "Brave", "Reckless", "Quiet"], correctAnswer: 2, explanation: "'Reckless' (imprudente) é o oposto de 'cautious' (cauteloso)."},
             { question: "I'd like to ___ a complaint.", options: ["do", "have", "make", "give"], correctAnswer: 2, explanation: "A colocação correta é 'make a complaint'."},
             { question: "The phrasal verb 'to run out of something' means ___.", options: ["to have no more of something", "to run outside", "to exercise", "to leave quickly"], correctAnswer: 0, explanation: "'Run out of' significa esgotar o estoque de algo, não ter mais."},
             { question: "This soup is ___ hot to eat.", options: ["so", "such", "enough", "too"], correctAnswer: 3, explanation: "'Too' é usado antes de um adjetivo para indicar um excesso negativo."},
             { question: "The word 'obsolete' means ___.", options: ["Very modern", "No longer in use", "Very popular", "Complicated"], correctAnswer: 1, explanation: "Algo 'obsolete' está ultrapassado ou não é mais usado."},
             { question: "He reminded me ___ my appointment.", options: ["of", "to", "about", "for"], correctAnswer: 0, explanation: "A estrutura correta é 'remind someone of something'."},
             { question: "If you don't mind, I'd rather you ___ smoke in here.", options: ["don't", "didn't", "wouldn't", "not"], correctAnswer: 1, explanation: "Após 'I'd rather' + pronome, usamos o Simple Past ('didn't') para expressar uma preferência sobre a ação de outra pessoa."}
        ];

        let currentQuizQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        
        const clickSound = document.getElementById('click-sound');
        const correctSound = document.getElementById('correct-sound');
        const wrongSound = document.getElementById('wrong-sound');

        function renderTestYourEnglishSection() {
            setActiveHubButton(null); // No active button in nav
            showHeader();
            document.getElementById('main-title').textContent = 'English Quiz';
            document.getElementById('main-description').textContent = 'Hora de testar seus conhecimentos! Responda a 10 perguntas e veja como você se sai.';
            
            contentArea.innerHTML = `
                <section id="quiz-container" class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 max-w-3xl mx-auto w-full">
                    <!-- Quiz content will be injected here -->
                </section>
            `;
            startQuiz();
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            // Embaralha o banco de perguntas completo
            quizData.sort(() => Math.random() - 0.5);
            // Seleciona as primeiras 10 perguntas para o quiz atual
            currentQuizQuestions = quizData.slice(0, 10);
            displayQuestion();
        }
        
        function displayQuestion() {
            const quizContainer = document.getElementById('quiz-container');
            if (currentQuestionIndex < currentQuizQuestions.length) {
                const questionData = currentQuizQuestions[currentQuestionIndex];
                let optionsHtml = '';
                questionData.options.forEach((option, index) => {
                    optionsHtml += `<button class="quiz-option" onclick="selectAnswer(${index})">${option}</button>`;
                });

                quizContainer.innerHTML = `
                    <div id="quiz-content">
                         <div class="flex justify-between items-center mb-4">
                            <p class="text-sm font-semibold text-stone-500">Questão ${currentQuestionIndex + 1} de ${currentQuizQuestions.length}</p>
                            <p class="text-sm font-semibold text-[#F1D24B]">Pontuação: ${score}</p>
                         </div>
                        <h3 class="text-xl font-bold mb-6 text-stone-800">${questionData.question}</h3>
                        <div id="quiz-options">${optionsHtml}</div>
                        <div id="feedback-area" class="mt-4"></div>
                        <div id="quiz-nav" class="mt-6 text-right"></div>
                    </div>
                `;
            } else {
                showResult();
            }
        }

        function selectAnswer(selectedIndex) {
            const questionData = currentQuizQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('#quiz-options .quiz-option');
            const feedbackArea = document.getElementById('feedback-area');
            const navArea = document.getElementById('quiz-nav');

            options.forEach(button => button.disabled = true);

            if (selectedIndex === questionData.correctAnswer) {
                score++;
                options[selectedIndex].classList.add('correct');
                feedbackArea.innerHTML = `
                    <div class="quiz-feedback correct">
                        <p id="quiz-explanation"><strong>Correto!</strong> ${questionData.explanation}</p>
                    </div>`;
                correctSound.play();
            } else {
                options[selectedIndex].classList.add('incorrect');
                options[questionData.correctAnswer].classList.add('correct');
                feedbackArea.innerHTML = `
                     <div class="quiz-feedback incorrect">
                        <p id="quiz-explanation"><strong>Incorreto.</strong> A resposta certa é <strong>'${questionData.options[questionData.correctAnswer]}'</strong>. ${questionData.explanation}</p>
                    </div>`;
                wrongSound.play();
            }

            if (currentQuestionIndex < currentQuizQuestions.length - 1) {
                 navArea.innerHTML = `<button class="quiz-nav-button" onclick="nextQuestion()">Próxima Questão &rarr;</button>`;
            } else {
                 navArea.innerHTML = `<button class="quiz-nav-button" onclick="showResult()">Ver Resultado</button>`;
            }
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            displayQuestion();
        }
        
        function showResult() {
            const quizContainer = document.getElementById('quiz-container');
            const percentage = Math.round((score / currentQuizQuestions.length) * 100);
            let resultMessage = '';
            if (percentage >= 80) {
                resultMessage = 'Excelente trabalho! Você tem um ótimo conhecimento de inglês.';
            } else if (percentage >= 50) {
                resultMessage = 'Bom trabalho! Continue praticando para melhorar ainda mais.';
            } else {
                resultMessage = 'Não desanime! Continue estudando e tente novamente.';
            }

            quizContainer.innerHTML = `
                <div class="text-center">
                    <h3 class="text-2xl font-bold mb-2 text-stone-800">Quiz Finalizado!</h3>
                    <p class="text-lg text-stone-600 mb-4">Você acertou ${score} de ${currentQuizQuestions.length} questões (${percentage}%).</p>
                    <p class="text-lg font-semibold text-[#84C7DF] mb-6">${resultMessage}</p>
                    <button class="quiz-nav-button" onclick="startQuiz()">Tentar Novamente</button>
                </div>
            `;
        }

        // --- TEACHER'S ROOM DATA AND FUNCTIONS ---
        // COLE ESTE BLOCO ATUALIZADO NO LUGAR DO ANTIGO
const teachersData = [
    {
        id: 'aleff-rodrigues',
        name: 'Aleff Rodrigues',
        photo: 'https://res.cloudinary.com/dqfi22uz0/image/upload/v1749540047/IMG_5219_tn7xuv.jpg',
        role: 'CEO, Professor de Inglês',
        email: 'aleff@slapingles.com',
        birthDate: '27/12/1997',
        residence: 'João Pessoa, PB',
        certifications: ['FCE (B2 First)', 'Graduação em Direito'],
        strengths: ['Gramática', 'Pronúncia', 'Networking', 'Fluência'],
        interests: ['Música Pop', 'Empreendedorismo', 'Marketing', 'Marvel'],
        favoriteSubjects: ['Past Simple', 'Present Perfect', 'Modal Verbs'],
        favoriteArtists: ['Fifth Harmony', 'Olivia Rodrigo', 'Lauren Jauregui'],
        selfDescription: 'Sou um cara sonhador e extremamente ambicioso — no melhor sentido da palavra. Tenho grandes sonhos, não só para realizar os meus próprios objetivos, mas também para ajudar as pessoas que amo a conquistarem os delas. Sou determinado, focado e sempre busco evoluir. Como todo mundo, tenho meus defeitos, mas prefiro destacar as qualidades porque, afinal, ninguém quer ler coisa ruim, né?'
    },
    {
        id: 'leticia-laganaro',
        name: 'Letícia Laganaro',
        photo: 'https://res.cloudinary.com/dqfi22uz0/image/upload/w_160,h_160,c_fill,g_face,f_auto,q_auto/v1749540047/IMG_5218_khmacs.jpg',
        role: 'Coordenadora Pedagógica, Professora de Inglês',
        email: 'leticia@slapingles.com',
        birthDate: '25/04/2000',
        residence: 'Peruíbe, SP',
        certifications: ['Graduação em Relações Internacionais', 'FCE (B2 First)', 'TOEIC'],
        strengths: ['Paciência', 'Animação', 'Gramática'],
        interests: ['Música', 'Livros', 'Tecnologia', 'Inglês', 'Bichinhos fofinhos'],
        favoriteSubjects: ['Present Simple', 'Would', 'Vocabulário'],
        favoriteArtists: ['Taylor Swift', 'Shawn Mendes', 'Sabrina Carpenter'],
        selfDescription: 'Uma pessoa muito sensível, que ama aprender coisas novas e gosta de criar conexões verdadeiras com as pessoas. Ama inglês e ama poder compartilhar isso com os alunos.'
    },
    {
        id: 'victor-teixeira',
        name: 'Victor Teixeira',
        photo: 'https://res.cloudinary.com/dqfi22uz0/image/upload/w_160,h_160,c_fill,g_face,f_auto,q_auto/v1749540098/AVATAR_MASC_AZUL_mg0oos.png',
        role: 'Professor de Inglês',
        email: 'victor@slapingles.com',
        birthDate: '21/02/2000',
        residence: 'Peruíbe, SP',
        certifications: ['Nenhuma'],
        strengths: ['Vocabulário', 'Interação com alunos'],
        interests: ['Videogame', 'Animais', 'Música', 'Tecnologia'],
        favoriteSubjects: ['T cousins', 'Tag Questions', 'Animal Vocabulary'],
        favoriteArtists: ['Nothing Nowhere', 'Lund', 'Vaboh'],
        selfDescription: 'Introvertido, honesto e levemente niilista. Gosto de fazer piada, de ouvir minhas músicas sozinho e de jogar videogame.'
    },
    {
        id: 'areli-nunes',
        name: 'Areli Nunes',
        photo: 'https://res.cloudinary.com/dqfi22uz0/image/upload/w_160,h_160,c_fill,g_face,f_auto,q_auto/v1749540047/IMG_5216_lc2pex.jpg',
        role: 'Professora de Inglês',
        email: 'areli@slapingles.com',
        birthDate: '08/09/2001',
        residence: 'Franca, SP',
        certifications: ['Não informado'],
        strengths: ['Interação com os alunos', 'Paciência', 'Facilidade para lidar com pessoas'],
        interests: ['Shawn Mendes', 'Tênis', 'Livros', 'Música pop', 'Cozinhar'],
        favoriteSubjects: ['Idioms', '-ED sounds', 'Verbs in the past'],
        favoriteArtists: ['Shawn Mendes', 'Taylor Swift', 'Selena Gomez'],
        selfDescription: 'Uma pessoa empática, que gosta muito de conversar, mas também insegura.'
    },
    {
        id: 'felipe-carnelos',
        name: 'Felipe Carnelós',
        photo: 'https://res.cloudinary.com/dqfi22uz0/image/upload/w_160,h_160,c_fill,g_face,f_auto,q_auto/v1749540050/IMG_5221_bbx425.jpg',
        role: 'Professor de Inglês',
        email: 'felipe.carnelos@slap.com',
        birthDate: '28 de Fevereiro de 1985',
        residence: 'Porto Alegre, RS',
        certifications: ['C2 Proficiency (CPE)', 'Mestrado em Linguística'],
        strengths: ['Gramática Avançada', 'Análise Crítica de Textos', 'Cultura Britânica', 'Argumentação'],
        interests: ['História', 'Xadrez', 'Documentários', 'Literatura Clássica'],
        favoriteSubjects: ['Passive Voice', 'Modal Verbs', 'Advanced Adjectives'],
        favoriteArtists: ['Johann Sebastian Bach', 'Miles Davis', 'Ludwig van Beethoven'],
        selfDescription: 'Como professor, busco aprofundar o conhecimento dos meus alunos, estimulando o pensamento crítico e a fluidez em temas complexos. A língua inglesa é uma ferramenta para desvendar o mundo.'
    },
    {
        id: 'jaynni-nascimento',
        name: 'Jaynni Nascimento',
        photo: 'https://res.cloudinary.com/dqfi22uz0/image/upload/v1749540046/IMG_5217_dptxe3.jpg',
        role: 'Professora de Inglês',
        email: 'jaynni@slapingles.com',
        birthDate: '25/04/2000',
        residence: 'João Pessoa, PB',
        certifications: ['Graduação em Psicologia', 'FCE (B2 First)', 'TKT'],
        strengths: ['Criatividade', 'Organização', 'Paciência'],
        interests: ['Psicologia', 'Filmes', 'Arte', 'Inglês', 'Cantar'],
        favoriteSubjects: ['Would', 'Present Perfect', 'Ordinal Numbers'],
        favoriteArtists: ['Adele', 'Anavitória', 'Liniker'],
        selfDescription: 'Uma mulher preta, sensível, comunicativa e com uma criança interior muito viva. Muito apaixonada pela vida, por pessoas, por ouvir, conversar, compartilhar e aprender.'
    },
    {
        id: 'anael-castilho',
        name: 'Anael D Castilho',
        photo: 'https://res.cloudinary.com/dqfi22uz0/image/upload/v1749540102/AVATAR_MASC_LARANJA_onmyg9.png',
        role: 'Professor de Inglês',
        email: 'anael@slapingles.com',
        birthDate: '23/04/1997',
        residence: 'João Pessoa, PB',
        certifications: ['Linguaskill'],
        strengths: ['Rapport', 'Criatividade', 'Manter os alunos atentos e interessados'],
        interests: ['Café', 'Musculação', 'Filosofia', 'Cultura japonesa', 'Música (violão)'],
        favoriteSubjects: ['Present Perfect', 'Phrasal Verbs', 'Prepositions'],
        favoriteArtists: ['Linkin Park', 'Avenged Sevenfold', 'Disturbed'],
        selfDescription: 'Uma pessoa peculiar e espontânea. Uma caixa de surpresas, uma montanha-russa de emoções. Sempre quebrando padrões sem ferir ninguém. Fiel aos seus valores e extremamente ético.'
    }
];
        function renderTeachersRoomSection() {
            setActiveHubButton('nav-teachers-room');
            showHeader();
            document.getElementById('main-title').textContent = 'Teacher\'s Room';
            document.getElementById('main-description').textContent = 'Conheça a nossa incrível equipe de professores. Clique na foto para ver mais detalhes!';
            
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                        ${teachersData.map((teacher, index) => `
                            <div class="teacher-card" onclick="window.renderTeacherDossier(${index})">
                                <img src="${teacher.photo}" onerror="this.onerror=null;this.src='https://placehold.co/120x120/e0e0e0/ffffff?text=Foto'" alt="${teacher.name}">
                                <p class="text-base font-semibold text-stone-700">${teacher.name}</p>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
        }

        function renderTeacherDossier(index) {
            const teacher = teachersData[index];
            if (!teacher) {
                contentArea.innerHTML = '<p class="text-red-500">Professor não encontrado.</p>';
                return;
            }

            // Hide the main header for the dossier page to allow more content space
            hideHeader(); 
            
            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 max-w-4xl mx-auto">
                    <button onclick="window.renderTeachersRoomSection()" class="mb-6 inline-flex items-center text-stone-600 hover:text-[#F1D24B] transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1"><polyline points="15 18 9 12 15 6"></polyline></svg>
                        Voltar para Professores
                    </button>

                    <div class="teacher-dossier-header">
                        <img src="${teacher.photo}" onerror="this.onerror=null;this.src='https://placehold.co/160x160/e0e0e0/ffffff?text=Foto'" alt="${teacher.name}">
                        <h2 class="text-3xl font-bold text-[#F1D24B] mt-4">${teacher.name}</h2>
                        <p class="text-xl text-stone-700 font-medium">${teacher.role}</p>
                    </div>

                    <div class="teacher-dossier-info-grid">
                        <div class="info-item">
                            <strong>Email Corporativo:</strong>
                            <p class="text-stone-700">${teacher.email}</p>
                        </div>
                        <div class="info-item">
                            <strong>Data de Nascimento:</strong>
                            <p class="text-stone-700">${teacher.birthDate}</p>
                        </div>
                        <div class="info-item">
                            <strong>Onde Mora:</strong>
                            <p class="text-stone-700">${teacher.residence}</p>
                        </div>
                        <div class="info-item">
                            <strong>Certificações:</strong>
                            <div class="flex flex-wrap pt-2">
                                ${teacher.certifications.map(cert => `<span class="tag">${cert}</span>`).join('')}
                            </div>
                        </div>
                        <div class="info-item">
                            <strong>Pontos Fortes:</strong>
                            <div class="flex flex-wrap pt-2">
                                ${teacher.strengths.map(strength => `<span class="tag">${strength}</span>`).join('')}
                            </div>
                        </div>
                        <div class="info-item">
                            <strong>Interesses:</strong>
                            <div class="flex flex-wrap pt-2">
                                ${teacher.interests.map(interest => `<span class="tag">${interest}</span>`).join('')}
                            </div>
                        </div>
                        <div class="info-item">
                            <strong>Assuntos Favoritos de Ensinar:</strong>
                            <div class="flex flex-wrap pt-2">
                                ${teacher.favoriteSubjects.map(subject => `<span class="tag">${subject.toUpperCase()}</span>`).join('')}
                            </div>
                        </div>
                        <div class="info-item">
                            <strong>Artistas Favoritos:</strong>
                            <div class="flex flex-wrap pt-2">
                                ${teacher.favoriteArtists.map(artist => `<span class="tag">${artist}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="info-item mt-4">
                        <strong>Como ${teacher.name.split(' ')[0]} se Descreve:</strong>
                        <p class="text-stone-700 mt-2">${teacher.selfDescription}</p>
                    </div>
                </section>
            `;
            if (currentChart) {
                currentChart.destroy();
            }
        }

        // --- BRAINFLIP GAME INTEGRATION ---
        function renderBrainFlipGameSection() {
            setActiveHubButton('nav-brainflip');
            showHeader();
            document.getElementById('main-title').textContent = 'BrainFlip: Flashcards Pedagógicos';
            document.getElementById('main-description').textContent = 'Teste seus conhecimentos em conceitos pedagógicos! Clique nos cartões para virar e aprender com técnica de memorização.';

            contentArea.innerHTML = `
                <section class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 flex flex-col items-center justify-center min-h-[70vh]">
                    <h1 class="text-4xl md:text-5xl font-extrabold text-blue-700 mb-8 mt-4 text-center">BrainFlip</h1>
                    <p class="text-lg text-stone-700 mb-8 text-center max-w-2xl">
                        Um jogo interativo de flashcards pedagógicos para professores de inglês. Clique nas cartas para virar e aprender!
                    </p>

                    <div class="flashcard-container mb-8">
                        <div id="flashcard" class="flashcard cursor-pointer">
                            <div id="flashcard-front" class="flashcard-face flashcard-front"></div>
                            <div id="flashcard-back" class="flashcard-face flashcard-back"></div>
                        </div>
                    </div>

                    <div class="flex items-center justify-center space-x-4 mb-8">
                        <button id="prev-btn" class="navigation-button-game">
                            Anterior
                        </button>
                        <span id="card-counter" class="text-xl font-semibold text-stone-800">1 / 0</span>
                        <button id="next-btn" class="navigation-button-game">
                            Próximo
                        </button>
                    </div>
                </section>
            `;

            // Game Logic
            const flashcardsData = [
                // Conceitos Pedagógicos
                {
                    front: "Teacher Talking Time (TTT)",
                    back: "O tempo que o professor fala durante a aula. O ideal é minimizá-lo para maximizar o STT."
                },
                {
                    front: "Student Talking Time (STT)",
                    back: "O tempo que os alunos falam durante a aula. Um indicador chave de engajamento e prática."
                },
                {
                    front: "Lexical Approach",
                    back: "Metodologia que foca no ensino de 'chunks' de linguagem (collocations, fixed expressions) em vez de palavras isoladas."
                },
                {
                    front: "Comprehensible Input",
                    back: "Linguagem que os alunos conseguem entender, mesmo que contenha estruturas novas (i + 1, segundo Krashen)."
                },
                {
                    front: "Teoria de Krashen",
                    back: "Cinco hipóteses sobre a aquisição de segunda língua: Aquisição-Aprendizagem, Monitor, Ordem Natural, Input e Filtro Afetivo."
                },
                {
                    front: "Scaffolding",
                    back: "Suporte temporário dado pelo professor para ajudar o aluno a realizar uma tarefa que ele não faria sozinho, removido gradualmente."
                },
                {
                    front: "Error Correction",
                    back: "Estratégias para corrigir erros dos alunos, que podem ser diretas, indiretas, recasts, elicitation, etc., dependendo do estágio do erro."
                },
                {
                    front: "CEFR (Common European Framework of Reference)",
                    back: "Padrão internacional para descrever habilidades linguísticas, com níveis de A1 a C2 (Básico, Independente, Proficiente)."
                },
                {
                    front: "PPP vs. TBL (Presentation, Practice, Production vs. Task-Based Learning)",
                    back: "PPP é uma abordagem linear (apresenta, pratica, produz). TBL é mais comunicativa, focando em tarefas com um objetivo real."
                },
                {
                    front: "Task-Based Learning (TBL)",
                    back: "Abordagem onde a aprendizagem ocorre através da realização de tarefas significativas que envolvem a comunicação real da língua."
                },
                {
                    front: "Dogme",
                    back: "Abordagem de ensino 'unplugged', que minimiza materiais pré-fabricados e foca na linguagem emergente dos alunos."
                },
                {
                    front: "Formative Assessment",
                    back: "Avaliação contínua realizada durante o processo de aprendizagem para monitorar o progresso e fornecer feedback."
                },
                {
                    front: "Andragogia",
                    back: "Princípios da educação de adultos, que se diferenciam da pedagogia (educação de crianças) pela autonomia e experiência do aprendiz."
                },
                {
                    front: "Metodologia ativa",
                    back: "Abordagens de ensino que colocam o aluno no centro do processo, tornando-o protagonista da sua aprendizagem (ex: Aprendizagem Baseada em Projetos)."
                },
                {
                    front: "Ensino híbrido (Blended Learning)",
                    back: "Combinação de ensino presencial e online, utilizando diferentes modalidades para otimizar a aprendizagem."
                },
                {
                    front: "CLIL (Content and Language Integrated Learning)",
                    back: "Ensino de uma disciplina (ex: história, ciências) através de uma língua estrangeira, desenvolvendo conteúdo e habilidades linguísticas simultaneamente."
                },
                {
                    front: "Warm-ups",
                    back: "Atividades curtas no início da aula para engajar os alunos, ativar conhecimentos prévios e prepará-los para o tema."
                },
                {
                    front: "Cool downs",
                    back: "Atividades no final da aula para revisar o conteúdo, consolidar a aprendizagem ou relaxar e refletir."
                },
                {
                    front: "ICQs / CCQs (Instruction Checking Questions / Concept Checking Questions)",
                    back: "Perguntas curtas para verificar se os alunos entenderam as instruções (ICQs) ou o conceito (CCQs) apresentado."
                },
                {
                    front: "Autonomy in Learning",
                    back: "Capacidade do aluno de tomar controle de sua própria aprendizagem, definindo metas e escolhendo métodos."
                },
                {
                    front: "Differentiation",
                    back: "Adaptação do ensino para atender às necessidades diversas dos alunos em uma mesma turma."
                },
                {
                    front: "Feedback",
                    back: "Informação dada aos alunos sobre seu desempenho, com o objetivo de orientar a melhoria."
                },
                {
                    front: "Intercultural Competence",
                    back: "Habilidade de se comunicar e interagir de forma eficaz e apropriada com pessoas de diferentes culturas."
                },
                {
                    front: "Affective Filter",
                    back: "Em Krashen's theory, barreiras emocionais (ansiedade, falta de confiança) que impedem a aquisição da linguagem."
                },
                {
                    front: "Output Hypothesis",
                    back: "A ideia de que produzir linguagem (falar, escrever) é essencial para a aquisição, pois força o aprendiz a processar a língua de forma mais profunda."
                },
                {
                    front: "Silent Way",
                    back: "Metodologia que enfatiza a descoberta do aluno e minimiza a fala do professor, usando ferramentas como 'cues' e 'rods'."
                },
                {
                    front: "Community Language Learning (CLL)",
                    back: "Abordagem humanística onde o professor atua como um 'conselheiro' e os alunos colaboram para construir o currículo."
                },
                {
                    front: "Total Physical Response (TPR)",
                    back: "Método que usa comandos e respostas físicas para ensinar vocabulário e estruturas, bom para iniciantes."
                },
                {
                    front: "Communicative Language Teaching (CLT)",
                    back: "Abordagem ampla que foca no desenvolvimento da competência comunicativa, priorizando a interação e o uso real da língua."
                },
                {
                    front: "Content-Based Instruction (CBI)",
                    back: "Ensino de língua estrangeira através de tópicos de conteúdo (semelhante ao CLIL, mas pode ser mais flexível)."
                },
                {
                    front: "Authentic Materials",
                    back: "Textos e áudios criados para falantes nativos da língua, não especificamente para fins de ensino (ex: jornais, músicas, filmes)."
                },
                {
                    front: "Extensive Reading",
                    back: "Leitura de grandes quantidades de texto por prazer, com foco na compreensão geral e fluência."
                },
                {
                    front: "Intensive Reading",
                    back: "Leitura detalhada de textos curtos para extrair informações específicas e analisar a linguagem."
                },
                {
                    front: "Task Recast",
                    back: "Uma forma indireta de correção de erro onde o professor reformula a fala incorreta do aluno de forma correta, sem interromper a comunicação."
                },
                {
                    front: "Noticing Hypothesis",
                    back: "A ideia de que para adquirir uma nova característica da língua, o aprendiz precisa primeiro 'notar' essa característica no input."
                },
                {
                    front: "Zone of Proximal Development (ZPD)",
                    back: "Conceito de Vygotsky: a distância entre o que um aluno pode fazer sozinho e o que ele pode fazer com a ajuda de um mais capaz (ligado ao scaffolding)."
                },
                {
                    front: "Form-Focused Instruction (FFI)",
                    back: "Qualquer atividade que intencionalmente direcione a atenção dos alunos para a forma da língua."
                },
                {
                    front: "Interlanguage",
                    back: "O sistema linguístico único que um aprendiz de segunda língua desenvolve à medida que adquire a nova língua, com características tanto da L1 quanto da L2."
                },
                {
                    front: "Lexical Chunks",
                    back: "Combinações de palavras que frequentemente ocorrem juntas e funcionam como uma unidade de significado (ex: 'take a shower', 'for example')."
                },
                {
                    front: "Washback Effect",
                    back: "O impacto que um teste tem sobre o ensino e a aprendizagem que o precede."
                },

                // Conceitos SLAP
                {
                    front: "SLAP: Spark",
                    back: "Despertar interesse e engajamento. Criar uma conexão emocional com o tema."
                },
                {
                    front: "SLAP: Learn",
                    back: "Apresentar conteúdo com clareza e propósito. Foco na compreensão e assimilação de novas informações."
                },
                {
                    front: "SLAP: Apply",
                    back: "Colocar em prática de forma significativa. Usar o que foi aprendido em contextos reais e relevantes."
                },
                {
                    front: "SLAP: Perform",
                    back: "Consolidar, revisar e transferir conhecimento. Avaliar o progresso e garantir a retenção a longo prazo."
                },
                {
                    front: "SLAP (Geral)",
                    back: "Framework para planejar e executar aulas engajadoras e eficazes: Spark, Learn, Apply, Perform."
                },
                // Adicione mais 60+ flashcards aqui para atingir 100+
                { front: "Ação Comunicativa", back: "Qualquer ato de comunicação que visa transmitir ou receber uma mensagem com um propósito real." },
                { front: "Aprendizagem Colaborativa", back: "Alunos trabalhando juntos em grupos para atingir um objetivo comum de aprendizagem." },
                { front: "Autenticidade (Material)", back: "Materiais reais, não adaptados, usados para falantes nativos (ex: notícias, músicas, filmes)." },
                { front: "Brainstorming", back: "Técnica para gerar ideias rapidamente, sem julgamento, para um tópico específico." },
                { front: "Coerência (Texto)", back: "A qualidade de um texto que o torna compreensível, com ideias conectadas logicamente." },
                { front: "Coesão (Texto)", back: "Uso de elementos linguísticos (pronomes, conectivos) para ligar frases e parágrafos em um texto." },
                { front: "Comunicação Não-Verbal", back: "Mensagens transmitidas através de gestos, expressões faciais, postura, tom de voz." },
                { front: "Constructivismo", back: "Teoria da aprendizagem onde o aluno constrói seu próprio conhecimento ativamente, em vez de apenas recebê-lo." },
                { front: "Critérios de Sucesso", back: "Definições claras do que um aluno precisa fazer para demonstrar que alcançou o objetivo de aprendizagem." },
                { front: "Cultura do Alvo", back: "Os aspectos culturais de um país ou comunidade onde a língua alvo é falada." },
                { front: "Curadoria de Conteúdo", back: "O processo de selecionar, organizar e apresentar materiais relevantes para o aprendizado." },
                { front: "Didática", back: "A arte e ciência do ensino, que estuda os melhores métodos e técnicas para a aprendizagem." },
                { front: "Engajamento do Aluno", back: "Nível de envolvimento e participação do aluno nas atividades de aprendizagem." },
                { front: "Estratégias de Aprendizagem", back: "Ações e pensamentos que os alunos usam para melhorar a aquisição, armazenamento e recuperação de informações." },
                { front: "Estilos de Aprendizagem", back: "As preferências individuais de como os alunos absorvem, processam e retêm informações (visual, auditivo, cinestésico)." },
                { front: "Fluência", back: "A capacidade de falar ou escrever uma língua de forma suave, sem hesitação excessiva, e com bom ritmo." },
                { front: "Grammar-Translation Method", back: "Método tradicional focado na tradução de textos e no estudo de regras gramaticais, com pouca ênfase na fala." },
                { front: "Habilidades Receptivas", back: "Compreensão auditiva (listening) e compreensão de leitura (reading)." },
                { front: "Habilidades Produtivas", back: "Fala (speaking) e escrita (writing)." },
                { front: "Inferência", back: "A capacidade de deduzir significado de palavras ou frases desconhecidas a partir do contexto." },
                { front: "Input vs. Intake", back: "Input é a linguagem a que o aluno é exposto. Intake é a parte do input que o aluno processa e internaliza para a aquisição." },
                { front: "Interação", back: "A comunicação bidirecional entre professor-aluno ou aluno-aluno, essencial para a aprendizagem de línguas." },
                { front: "Language Acquisition Device (LAD)", back: "Conceito de Chomsky: um mecanismo inato na mente humana que facilita a aquisição da linguagem." },
                { front: "Loop de Feedback", back: "Ciclo contínuo de dar feedback, receber, agir sobre ele e então dar mais feedback." },
                { front: "Micro-ensino", back: "Prática de ensino onde professores treinam habilidades específicas em sessões curtas e focadas, geralmente gravadas para análise." },
                { front: "Motivação Intrínseca", back: "Desejo de aprender por interesse próprio, satisfação pessoal ou desafio." },
                { front: "Motivação Extrínseca", back: "Desejo de aprender por recompensas externas, como notas, reconhecimento ou pressão social." },
                { front: "Neuroplasticidade", back: "A capacidade do cérebro de se adaptar e reorganizar, formando novas conexões neurais ao longo da vida, importante para a aprendizagem." },
                { front: "Objetivos de Aprendizagem", back: "Declarações claras do que os alunos serão capazes de fazer ao final de uma aula ou unidade." },
                { front: "Peer Correction", back: "Correção de erros feita pelos próprios colegas de turma." },
                { front: "Performance", back: "O uso real da linguagem pelo aluno em um determinado momento, que pode ser diferente de sua competência subjacente." },
                { front: "Personalização (Ensino)", back: "Adaptação do conteúdo, ritmo ou métodos de ensino às necessidades e interesses individuais de cada aluno." },
                { front: "Prática Controlada", back: "Atividades onde os alunos praticam o uso da língua com foco na forma e precisão, com pouca liberdade de expressão." },
                { front: "Prática Livre", back: "Atividades onde os alunos usam a língua de forma mais espontânea e criativa, com foco na fluência e comunicação." },
                { front: "Projetos (Aprendizagem Baseada em)", back: "Metodologia onde os alunos aprendem através da criação de um produto ou resolução de um problema real." },
                { front: "Rapport", back: "A relação de confiança e entendimento mútuo entre professor e aluno, ou entre os próprios alunos." },
                { front: "Recursos Visuais", back: "Mapas mentais, infográficos, imagens, vídeos, etc., usados para apoiar a aprendizagem." },
                { front: "Reflexão (Pedagogia)", back: "O processo de pensar criticamente sobre a própria prática de ensino ou aprendizagem para melhorá-la." },
                { front: "Role-Play (Simulação)", back: "Atividade onde os alunos assumem papéis e simulam situações da vida real para praticar a língua." },
                { front: "Self-Correction", back: "A capacidade do aluno de identificar e corrigir seus próprios erros." },
                { front: "Silent Period", back: "Um período inicial em que os alunos de uma nova língua podem preferir ouvir e processar antes de começar a falar." },
                { front: "Storytelling (Contação de Histórias)", back: "Uso de narrativas para engajar os alunos, apresentar vocabulário ou conceitos, e desenvolver a compreensão auditiva." },
                { front: "Summative Assessment", back: "Avaliação que ocorre no final de uma unidade ou curso para medir o que foi aprendido (ex: provas finais)." },
                { front: "Target Language", back: "A língua que está sendo aprendida (neste caso, o inglês)." },
                { front: "Task-Based Syllabus", back: "Um currículo organizado em torno de uma série de tarefas que os alunos devem realizar." },
                { front: "Teaching for Understanding", back: "Abordagem que visa que os alunos não apenas memorizem, mas realmente compreendam os conceitos e possam aplicá-los." },
                { front: "Think-Pair-Share", back: "Estratégia colaborativa: alunos pensam individualmente, discutem em pares, e depois compartilham com a turma." },
                { front: "Timing (Gerenciamento de Tempo)", back: "A habilidade de planejar e executar atividades dentro de um tempo limite adequado na aula." },
                { front: "Transferência de Conhecimento", back: "A capacidade de aplicar o que foi aprendido em um contexto para uma nova situação ou problema." },
                { front: "Utilização de Tecnologia", back: "Integração de ferramentas digitais e recursos online para aprimorar o processo de ensino e aprendizagem." },
                { front: "Variedade de Atividades", back: "Uso de diferentes tipos de exercícios e tarefas para manter o engajamento e atender a diversos estilos de aprendizagem." },
                { front: "Visualização (Aprendizagem)", back: "Técnica de criar imagens mentais para ajudar a lembrar e processar informações." },
                { front: "Vocabulário Produtivo", back: "Palavras que um aluno pode usar ativamente na fala e na escrita." },
                { front: "Vocabulário Receptivo", back: "Palavras que um aluno pode entender ao ouvir ou ler, mas não necessariamente usar ativamente." },
                { front: "Whole Class Interaction", back: "Atividades que envolvem a participação de todos os alunos na turma ao mesmo tempo." },
                { front: "Word Cloud", back: "Representação visual de palavras onde o tamanho de cada palavra indica sua frequência ou importância em um texto." },
                { front: "Zone of Actual Development (ZAD)", back: "O que um aluno pode fazer independentemente, sem ajuda." },
                { front: "Peer Teaching", back: "Alunos ensinando uns aos outros, o que pode reforçar a compreensão do conteúdo." },
                { front: "Active Recall", back: "Estratégia de estudo onde o aluno tenta recuperar informações da memória sem pistas, como em flashcards." },
                { front: "Spaced Repetition", back: "Técnica de estudo onde o material é revisado em intervalos crescentes para otimizar a retenção a longo prazo." },
                { front: "Metacognition", back: "Consciência e compreensão dos próprios processos de pensamento e aprendizagem." },
                { front: "Task-Based Assessment", back: "Avaliação baseada na conclusão de uma tarefa, focando na comunicação e no uso da língua em contexto real." },
                { front: "Language Awareness", back: "A capacidade de perceber e analisar aspectos da língua, tanto em si mesmo quanto em outros." },
                { front: "Corpus Linguistics", back: "Estudo da linguagem usando grandes coleções de textos e fala ('corpora') para identificar padrões de uso." },
                {
                    front: "Blended Learning",
                    back: "Ensino híbrido, que combina modalidades online e presenciais."
                },
                {
                    front: "Flipped Classroom",
                    back: "Sala de aula invertida, onde os alunos estudam o conteúdo em casa e praticam na escola."
                },
                {
                    front: "Gamification",
                    back: "Aplicação de elementos de jogos em contextos não-jogo para aumentar o engajamento e a motivação."
                },
                {
                    front: "Peer Assessment",
                    back: "Avaliação mútua entre alunos, onde eles fornecem feedback sobre o trabalho uns dos outros."
                },
                {
                    front: "Self-Assessment",
                    back: "Avaliação do próprio desempenho ou aprendizagem por parte do aluno."
                },
                {
                    front: "Growth Mindset",
                    back: "Mentalidade de crescimento, a crença de que habilidades e inteligência podem ser desenvolvidas através de esforço e dedicação."
                },
                {
                    front: "Fixed Mindset",
                    back: "Mentalidade fixa, a crença de que habilidades e inteligência são traços inatos e não podem ser fundamentalmente alterados."
                },
                {
                    front: "Critical Thinking",
                    back: "A capacidade de analisar informações de forma objetiva e razoável, formando um julgamento."
                },
                {
                    front: "Creative Thinking",
                    back: "A capacidade de gerar novas ideias e soluções originais para problemas."
                },
                {
                    front: "Problem-Based Learning (PBL)",
                    back: "Aprendizagem baseada em problemas, onde os alunos aprendem resolvendo problemas complexos e reais."
                },
                {
                    front: "Project-Based Learning (PBL)",
                    back: "Aprendizagem baseada em projetos, onde os alunos trabalham em um projeto estendido para investigar e responder a uma questão ou problema."
                },
                {
                    front: "Inquiry-Based Learning",
                    back: "Aprendizagem baseada em investigação, onde os alunos exploram perguntas, dados e fenômenos em busca de compreensão."
                },
                {
                    front: "Active Listening",
                    back: "Habilidade de ouvir atentamente e demonstrar compreensão, fazendo perguntas e fornecendo feedback."
                },
                {
                    front: "Non-Native English Speaking Teacher (NNEST)",
                    back: "Professor de inglês cuja língua materna não é o inglês."
                },
                {
                    front: "Native English Speaking Teacher (NEST)",
                    back: "Professor de inglês cuja língua materna é o inglês."
                },
                {
                    front: "Corpus",
                    back: "Uma grande coleção de textos e/ou falas, usada para estudar padrões linguísticos."
                },
                {
                    front: "Authentic Task",
                    back: "Uma tarefa que simula uma situação de comunicação real, que um falante da língua faria na vida real."
                },
                {
                    front: "Simplified Input",
                    back: "Linguagem que é simplificada para os alunos, com vocabulário e estruturas mais simples, sem perder o significado."
                },
                {
                    front: "Recasting",
                    back: "Reformular a fala incorreta do aluno de forma correta, sem explicitamente indicar o erro, mantendo o fluxo da conversa."
                },
                {
                    front: "Elicitation",
                    back: "Técnica de correção onde o professor tenta fazer com que o aluno se corrija, através de perguntas ou pausas sugestivas."
                },
                {
                    front: "Clarification Request",
                    back: "Pedido do professor ou colega para que o aluno reformule ou explique o que disse, indicando que a mensagem não foi clara."
                },
                {
                    front: "Self-monitoring",
                    back: "A capacidade de um aluno de observar e avaliar sua própria produção de linguagem."
                },
                {
                    front: "Extensive Listening",
                    back: "Ouvir longos trechos de áudio para prazer ou compreensão geral, sem focar em detalhes minuciosos."
                },
                {
                    front: "Intensive Listening",
                    back: "Ouvir áudios curtos e focar em detalhes específicos, vocabulário ou pronúncia."
                },
                {
                    front: "Lesson Plan",
                    back: "Um guia detalhado para o professor sobre o que, como e por que ensinar em uma aula específica."
                },
                {
                    front: "Scheme of Work",
                    back: "Um plano de longo prazo que descreve os objetivos, conteúdo e sequência de aulas para um curso ou período."
                },
                {
                    front: "Needs Analysis",
                    back: "O processo de identificar o que os alunos precisam aprender e por que, antes de planejar um curso."
                },
                {
                    front: "Course Design",
                    back: "O processo de criar o plano geral de um curso, incluindo objetivos, conteúdo, atividades e avaliação."
                },
                {
                    front: "Diagnostic Assessment",
                    back: "Avaliação inicial para identificar os pontos fortes e fracos dos alunos antes do ensino começar."
                },
                {
                    front: "Criterion-Referenced Assessment",
                    back: "Avaliação que compara o desempenho do aluno com um conjunto predefinido de padrões de desempenho."
                },
                {
                    front: "Norm-Referenced Assessment",
                    back: "Avaliação que compara o desempenho do aluno com o desempenho de outros alunos em um grupo."
                },
                {
                    front: "Reliability (Assessment)",
                    back: "A consistência de um teste ou avaliação; se produziria os mesmos resultados se repetido sob as mesmas condições."
                },
                {
                    front: "Validity (Assessment)",
                    back: "A extensão em que um teste mede o que se propõe a medir."
                },
                {
                    front: "Practicality (Assessment)",
                    back: "A viabilidade de um teste em termos de recursos, tempo e facilidade de administração e pontuação."
                },
                {
                    front: "Authenticity (Assessment)",
                    back: "A extensão em que uma tarefa de avaliação reflete tarefas do mundo real."
                },
                {
                    front: "Washback",
                    back: "O efeito que um teste tem sobre o ensino e a aprendizagem que o precede."
                },
                {
                    front: "Common European Framework of Reference (CEFR)",
                    back: "Um sistema amplamente aceito para descrever a proficiência em línguas estrangeiras (A1, A2, B1, B2, C1, C2)."
                },
                {
                    front: "Can-Do Statements",
                    back: "Afirmações que descrevem o que um usuário da língua pode fazer em cada nível do CEFR (ex: 'Posso me apresentar')."
                },
                {
                    front: "Curriculum",
                    back: "O plano geral de estudos para um curso, incluindo objetivos, conteúdo, metodologia e avaliação."
                },
                {
                    front: "Syllabus",
                    back: "Um documento que descreve o conteúdo específico e os requisitos de um curso, geralmente mais detalhado que o currículo."
                },
                {
                    front: "Content-Based Language Teaching",
                    back: "Ensino de uma língua através do conteúdo de outras disciplinas, com o objetivo de desenvolver a língua e o conhecimento do conteúdo."
                },
                {
                    front: "Affective Factors",
                    back: "Emoções, atitudes e sentimentos que influenciam a aprendizagem de uma segunda língua (ex: motivação, ansiedade, autoconfiança)."
                },
                {
                    front: "Cognitive Factors",
                    back: "Processos mentais envolvidos na aprendizagem, como memória, atenção, percepção e resolução de problemas."
                },
                {
                    front: "Interaction Hypothesis",
                    back: "A teoria de que a interação comunicativa (negociação de significado) é crucial para a aquisição da segunda língua."
                },
                {
                    front: "Output-Driven Instruction",
                    back: "Ensino que enfatiza a produção de linguagem pelos alunos, forçando-os a usar o que sabem e a identificar lacunas."
                },
                {
                    front: "Corrective Feedback",
                    back: "Informação dada aos alunos sobre seus erros linguísticos, visando a melhoria."
                },
                {
                    front: "Extensive Output",
                    back: "Produção de longos trechos de linguagem (escrita ou falada) de forma fluida, sem foco excessivo na precisão."
                },
                {
                    front: "Intensive Output",
                    back: "Produção de linguagem com foco na precisão gramatical e no uso correto do vocabulário."
                },
                {
                    front: "Teacher's Role",
                    back: "O papel do professor na sala de aula, que pode variar de facilitador, mentor, transmissor de conhecimento, entre outros."
                },
                {
                    front: "Learner's Role",
                    back: "O papel do aluno na sala de aula, que pode ser ativo, passivo, colaborativo, autônomo, etc."
                },
                {
                    front: "Target Audience",
                    back: "O público para quem o material ou a comunicação é destinada."
                },
                {
                    front: "Proficiency",
                    back: "O nível de habilidade e competência em uma língua."
                },
                {
                    front: "Accuracy",
                    back: "A correção gramatical e o uso apropriado do vocabulário."
                },
                {
                    front: "Lexical Resources",
                    back: "O vocabulário e o conhecimento de expressões idiomáticas que um falante possui."
                },
                {
                    front: "Grammatical Resources",
                    back: "O conhecimento e a capacidade de usar as regras gramaticais da língua."
                },
                {
                    front: "Phonological Resources",
                    back: "O conhecimento e a capacidade de usar os sons e a entonação da língua."
                },
                {
                    front: "Strategic Competence",
                    back: "A capacidade de usar estratégias de comunicação para superar lacunas no conhecimento da língua (ex: paráfrase, pedir clareza)."
                },
                {
                    front: "Sociolinguistic Competence",
                    back: "A capacidade de usar a linguagem de forma apropriada em diferentes contextos sociais e culturais."
                },
                {
                    front: "Discourse Competence",
                    back: "A capacidade de produzir e entender textos coerentes e coesos."
                },
                {
                    front: "Fluency vs. Accuracy",
                    back: "Fluência refere-se à facilidade e ao ritmo da fala, enquanto precisão se refere à correção gramatical e ao uso apropriado do vocabulário."
                }

            ];

            // *** CÓDIGO DE RANDOMIZAÇÃO ADICIONADO AQUI ***
            // Algoritmo Fisher-Yates (ou Knuth) para embaralhar o array
            function shuffleArray(array) {
                let currentIndex = array.length, randomIndex;

                // Enquanto ainda houver elementos para embaralhar.
                while (currentIndex !== 0) {
                    // Pega um elemento restante.
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex--;

                    // E troca-o com o elemento atual.
                    [array[currentIndex], array[randomIndex]] = [
                        array[randomIndex], array[currentIndex]];
                }
                return array;
            }

            shuffleArray(flashcardsData); // Embaralha os cards assim que a função é chamada

            let currentIndex = 0;
            const flashcardElement = document.getElementById('flashcard');
            const flashcardFrontElement = document.getElementById('flashcard-front');
            const flashcardBackElement = document.getElementById('flashcard-back');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const cardCounter = document.getElementById('card-counter');

            /**
             * Updates the content of the flashcard and the counter.
             * @param {number} index - The index of the flashcard to be displayed.
             */
            function displayCard(index) {
                // Ensures the index is within array bounds
                if (index < 0) {
                    currentIndex = flashcardsData.length - 1; // Loop to the end
                } else if (index >= flashcardsData.length) {
                    currentIndex = 0; // Loop to the beginning
                } else {
                    currentIndex = index;
                }

                // Set the text for the front and back of the card
                flashcardFrontElement.textContent = flashcardsData[currentIndex].front;
                flashcardBackElement.textContent = flashcardsData[currentIndex].back;

                // Update the card counter
                cardCounter.textContent = `${currentIndex + 1} / ${flashcardsData.length}`;

                // If the card is flipped, unflip it to show the front of the new card
                if (flashcardElement.classList.contains('flipped')) {
                    flashcardElement.classList.remove('flipped');
                }
            }

            /**
             * Flips the flashcard, showing the back or the front.
             */
            function flipCard() {
                flashcardElement.classList.toggle('flipped');
            }

            /**
             * Displays the next card in the sequence.
             */
            function nextCard() {
                displayCard(currentIndex + 1);
            }

            /**
             * Displays the previous card in the sequence.
             */
            function prevCard() {
                displayCard(currentIndex - 1);
            }

            // Add event listeners
            flashcardElement.addEventListener('click', flipCard);
            nextBtn.addEventListener('click', nextCard);
            prevBtn.addEventListener('click', prevCard);

            // Initialize the game by displaying the first card
            displayCard(currentIndex);
        }

        // Add render functions to window scope to be called from onclick attributes
        window.renderInicioSection = renderInicioSection;
        window.renderSlapLevelsSection = renderSlapLevelsSection;
        window.renderTestYourEnglishSection = renderTestYourEnglishSection;
        window.renderCefrSection = renderCefrSection;
        window.renderDeepDiveSection = renderDeepDiveSection;
        window.renderCreatorsRoom = renderCreatorsRoom;
        window.renderMethodSection = renderMethodSection;
        window.renderPdiSection = renderPdiSection;
        window.renderRegimentoInternoSection = renderRegimentoInternoSection;
        window.renderLinksUteisSection = renderLinksUteisSection;
        window.renderTeachersRoomSection = renderTeachersRoomSection;
        window.renderTeacherDossier = renderTeacherDossier;
        window.renderBrainFlipGameSection = renderBrainFlipGameSection;
        window.renderGradeSection = renderGradeSection;
        // ...
window.renderTeacherDossier = renderTeacherDossier;
window.renderBrainFlipGameSection = renderBrainFlipGameSection;
window.renderLessonDetail = renderLessonDetail; // <-- Adicione esta linha
window.renderCalendarSection = renderCalendarSection; // <-- ADICIONE ESTA
window.changeMonth = changeMonth;                 // <-- ADICIONE ESTA
window.showCalendarModal = showCalendarModal;     // <-- ADICIONE ESTA
window.closeCalendarModal = closeCalendarModal;   // <-- ADICIONE ESTA
// ...// Add new game function to window

       document.addEventListener('DOMContentLoaded', () => {
    
    // --- INÍCIO DA ADIÇÃO: CÓDIGO DE VERIFICAÇÃO DE LOGIN ---
    const userJson = sessionStorage.getItem('loggedInUser');
    if (userJson) {
        loggedInUser = JSON.parse(userJson);
    } else {
        alert('Acesso negado. É necessário fazer login para continuar.');
        window.location.href = 'index.html';
        return; // Impede o resto do código de ser executado
    }
    // Mapeamento dos alvos para as funções que renderizam cada página
    const pageRenderers = {
        'inicio': renderInicioSection,
        'slap-levels': renderSlapLevelsSection,
        'cefr': renderCefrSection,
        'deep-dive': renderDeepDiveSection,
        'creators-room': renderCreatorsRoom,
        'method': renderMethodSection,
        'teachers-room': renderTeachersRoomSection,
        'brainflip': renderBrainFlipGameSection,
        'test-your-english': renderTestYourEnglishSection,
        'grade': renderGradeSection,
        'calendario': renderCalendarSection,
    };

    // Nova função para gerenciar o estado ativo dos botões
    function setActiveNavItem(element) {
        // Remove o estado ativo de todos os itens
        document.querySelectorAll('#main-navigation .nav-item').forEach(item => {
            item.classList.remove('active');
            item.classList.remove('active-parent');
        });

        if (element) {
            element.classList.add('active');

            // Se for um item de submenu, destaca também o menu principal
            const parentDropdown = element.closest('.nav-dropdown');
            if (parentDropdown) {
                parentDropdown.querySelector('.dropdown-toggle').classList.add('active-parent');
            }
        }
    }

    const mainNav = document.getElementById('main-navigation');

    // Um único "ouvinte" de eventos para toda a navegação
    mainNav.addEventListener('click', (event) => {
        const target = event.target.closest('.nav-item');
        if (!target) return; // Ignora cliques fora dos botões

        // Toca o som de clique
        clickSound.currentTime = 0;
        clickSound.play().catch(e => console.error("Erro ao tocar o som:", e));

        // Gerencia a abertura/fechamento dos dropdowns
        if (target.classList.contains('dropdown-toggle')) {
            const dropdown = target.closest('.nav-dropdown');
            const submenu = dropdown.querySelector('.submenu');
            const arrow = target.querySelector('.dropdown-arrow');

            // Fecha outros menus abertos para manter a interface limpa
            document.querySelectorAll('.submenu.open').forEach(openSubmenu => {
                if (openSubmenu !== submenu) {
                    openSubmenu.classList.remove('open');
                    const otherArrow = openSubmenu.closest('.nav-dropdown').querySelector('.dropdown-arrow');
                    if(otherArrow) otherArrow.classList.remove('rotate-180');
                }
            });
            
            // Abre ou fecha o menu clicado
            submenu.classList.toggle('open');
            arrow.classList.toggle('rotate-180');
            return; // Para a execução aqui, pois é apenas para abrir o menu
        }

        // Gerencia a navegação para uma página
        const pageKey = target.dataset.target;
        if (pageKey && pageRenderers[pageKey]) {
            pageRenderers[pageKey]();
            setActiveNavItem(target);
            
            // Fecha todos os menus ao navegar para uma nova página
             document.querySelectorAll('.submenu.open').forEach(openSubmenu => {
                openSubmenu.classList.remove('open');
                 const arrow = openSubmenu.closest('.nav-dropdown').querySelector('.dropdown-arrow');
                 if(arrow) arrow.classList.remove('rotate-180');
            });
             // Abre o menu pai do item clicado
            const parentDropdown = target.closest('.nav-dropdown');
            if (parentDropdown) {
                 parentDropdown.querySelector('.submenu').classList.add('open');
                 const arrow = parentDropdown.querySelector('.dropdown-arrow');
                 if(arrow) arrow.classList.add('rotate-180');
            }
        }
    });

    // Carrega a página inicial e define o botão "Início" como ativo
    renderInicioSection();
    setActiveNavItem(document.querySelector('[data-target="inicio"]'));
});

    </script>

</body>
</html>
